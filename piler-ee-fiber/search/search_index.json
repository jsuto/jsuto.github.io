{"config":{"lang":["en"],"separator":"[\\s\\-]+","pipeline":["stopWordFilter"]},"docs":[{"location":"","title":"Piler enterprise 2.x documentation","text":""},{"location":"#compliance","title":"Compliance","text":"<p>Compliance Overview</p> <p>GDPR</p> <p>GDPR Article 17 - Right to Erasure</p> <p>GoBD (Germany)</p> <p>SIEM Integration</p> <p>Piler Verfahrensdokumentation Enterprise Edition</p>"},{"location":"#new-features","title":"New features","text":"<p>New features in 2.0.0</p> <p>New features in 2.1.0</p>"},{"location":"#for-end-users","title":"For end users","text":"<p>User guide to the UI</p>"},{"location":"#for-administrators","title":"For administrators","text":"<p>Overview</p> <p>Benchmarking the archive</p> <p>eDiscovery</p> <p>Export emails</p> <p>Import legacy emails</p> <p>Installing piler enterprise edition</p> <p>Migration from competitors (Barracuda, Mailarchiva, Mailstore, ...) to piler</p> <p>Permission profiles</p> <p>REST API</p> <p>S3 compatible storage</p> <p>Securing the archive</p> <p>Azure AD/Entra SSO login</p> <p>Google Workspace SSO login</p> <p>Setting up AI feature</p> <p>Tuning the archive</p> <p>UI config options</p> <p>Upgrading piler enterprise</p> <p>User roles</p>"},{"location":"ai-features-setup/","title":"AI Features Setup Guide","text":"<p>Piler's AI features provide intelligent email summarization, conversational search, and thread analysis using a local LLM (Large Language Model). This guide walks you through setting up the AI infrastructure.</p>"},{"location":"ai-features-setup/#overview","title":"Overview","text":"<p>AI Features Available:</p> <ul> <li>\u2728 Email Summarization Instant AI-generated summaries</li> <li>\ud83d\udd0d Conversational Search Natural language queries</li> <li>\ud83d\udccb Thread Summarization Structured thread intelligence</li> </ul> <p>Key Advantage: 100% on-premise. Your data NEVER leaves your infrastructure.</p>"},{"location":"ai-features-setup/#prerequisites","title":"Prerequisites","text":""},{"location":"ai-features-setup/#hardware-requirements","title":"Hardware Requirements","text":"Deployment Size Minimum Recommended Notes Small (100-500 users) 4 CPU cores, 8GB RAM RTX 3060 (12GB VRAM) CPU-only works but slow (10-30s per query) Medium (500-5K users) 8 CPU cores, 16GB RAM RTX 4090 (24GB VRAM) GPU highly recommended (2-5s per query) Large (5K+ users) 16 CPU cores, 32GB RAM A100 (40GB VRAM) GPU required for acceptable performance <p>GPU strongly recommended for production (20-50x faster than CPU).</p>"},{"location":"ai-features-setup/#software-requirements","title":"Software Requirements","text":"<ul> <li>Linux: Ubuntu 22.04+, Debian 12+, RHEL 9+, or similar</li> <li>macOS: macOS 12+ (Apple Silicon or Intel)</li> <li>Docker: (optional) For containerized deployment</li> </ul>"},{"location":"ai-features-setup/#installation-methods","title":"Installation Methods","text":""},{"location":"ai-features-setup/#method-1-ollama-recommended","title":"Method 1: Ollama (Recommended) \u2b50","text":"<p>Why Ollama:</p> <ul> <li>\u2705 Easiest installation (one command)</li> <li>\u2705 Automatic GPU detection</li> <li>\u2705 Model management built-in</li> <li>\u2705 Works on Linux, macOS, Windows</li> <li>\u2705 Production-ready</li> <li>\u2705 Free and open source</li> </ul>"},{"location":"ai-features-setup/#install-ollama","title":"Install Ollama","text":"<p>Linux/macOS:</p> <pre><code># One-line install\ncurl -fsSL https://ollama.com/install.sh | sh\n\n# Verify installation\nollama --version\n# Should show: ollama version X.X.X\n</code></pre> <p>Or with Docker:</p> <pre><code>docker pull ollama/ollama:latest\n\n# GPU support (NVIDIA)\ndocker run -d --gpus=all -v ollama:/root/.ollama -p 11434:11434 --name ollama ollama/ollama\n\n# CPU only\ndocker run -d -v ollama:/root/.ollama -p 11434:11434 --name ollama ollama/ollama\n</code></pre>"},{"location":"ai-features-setup/#pull-the-llm-model","title":"Pull the LLM Model","text":"<p>Recommended model: Llama 3.1 (8B)</p> <pre><code># Pull model (will download ~4.7GB)\nollama pull llama3.1:8b\n\n# Verify model is available\nollama list\n# Should show: llama3.1:8b ... 4.7 GB\n</code></pre> <p>Alternative models:</p> Model Size VRAM Speed Quality Use Case llama3.1:8b 4.7GB 6GB Fast Excellent Recommended llama3.1:70b 40GB 48GB Slow Best Large deployments only mistral:7b 4.1GB 5GB Very fast Good Budget/CPU setups qwen2.5:7b 4.7GB 6GB Fast Excellent Multilingual phi3:mini 2.3GB 3GB Very fast Good Small/demo setups"},{"location":"ai-features-setup/#test-ollama","title":"Test Ollama","text":"<pre><code># Test generation\ncurl http://localhost:11434/api/generate -d '{\n  \"model\": \"llama3.1:8b\",\n  \"prompt\": \"Summarize: This is a test email about quarterly budget approval.\",\n  \"stream\": false\n}'\n\n# Should return JSON with summary\n</code></pre>"},{"location":"ai-features-setup/#start-ollama-as-service","title":"Start Ollama as Service","text":"<p>Linux (systemd):</p> <pre><code># Ollama installer creates service automatically\nsudo systemctl enable ollama\nsudo systemctl start ollama\nsudo systemctl status ollama\n</code></pre> <p>macOS (launchd):</p> <pre><code># Ollama runs as service automatically after install\n# Check status:\nps aux | grep ollama\n</code></pre> <p>Docker:</p> <pre><code># Already running if you used docker run -d\ndocker ps | grep ollama\n</code></pre>"},{"location":"ai-features-setup/#method-2-lm-studio-alternative","title":"Method 2: LM Studio (Alternative)","text":"<p>Why LM Studio:</p> <ul> <li>GUI for model management</li> <li>Good for macOS/Windows users</li> <li>Easy testing and experimentation</li> </ul> <p>Install:</p> <ol> <li>Download from https://lmstudio.ai/</li> <li>Install and open LM Studio</li> <li>Download a model (llama3.1:8b recommended)</li> <li>Start local server on port 11434</li> </ol> <p>Configure Piler:</p> <pre><code>LLM_BASE_URL=http://localhost:1234  # LM Studio default port\nLLM_MODEL=llama3.1:8b\n</code></pre>"},{"location":"ai-features-setup/#method-3-custom-llm-server-advanced","title":"Method 3: Custom LLM Server (Advanced)","text":"<p>For organizations with specific requirements:</p> <p>vLLM (High performance):</p> <pre><code>pip install vllm\nvllm serve meta-llama/Llama-3.1-8B-Instruct --port 11434\n</code></pre> <p>Ollama on remote server:</p> <pre><code># On GPU server\nOLLAMA_HOST=0.0.0.0:11434 ollama serve\n\n# On Piler server\nLLM_BASE_URL=http://gpu-server.internal:11434\n</code></pre>"},{"location":"ai-features-setup/#piler-configuration","title":"Piler Configuration","text":""},{"location":"ai-features-setup/#1-enable-ai-features","title":"1. Enable AI Features","text":"<p>Edit your Piler <code>.env</code> file:</p> <pre><code># Enable AI features\nLLM_ENABLED=true\n\n# Ollama connection\nLLM_BASE_URL=http://localhost:11434\nLLM_MODEL=llama3.1:8b\n\n# Cache settings (optional tuning)\nLLM_CACHE_EXPIRY_MINUTES=15\n\n# Advanced (optional)\nNL2QUERY_PROMPT_FILE=  # Empty = use embedded default\n</code></pre>"},{"location":"ai-features-setup/#2-restart-piler","title":"2. Restart Piler","text":"<pre><code># Systemd\nsudo systemctl restart piler\n\n# Docker\ndocker-compose restart piler-ui\n\n# Manual\npkill piler-ui\n./piler-ui\n</code></pre>"},{"location":"ai-features-setup/#3-verify-ai-features","title":"3. Verify AI Features","text":"<p>Check LLM connectivity:</p> <pre><code>curl http://localhost:3000/api/v1/llm/ping \\\n  -H \"Authorization: Bearer YOUR_TOKEN\"\n\n# Should return:\n{\"status\":\"ok\",\"model\":\"llama3.1:8b\"}\n</code></pre> <p>In the UI:</p> <ol> <li>Log in to Piler</li> <li>View any email</li> <li>Click \"AI Tools\" dropdown</li> <li>Click \"AI Summary\"</li> <li>Should see summary within 2-5 seconds \u2705</li> </ol>"},{"location":"ai-features-setup/#network-setup","title":"Network Setup","text":""},{"location":"ai-features-setup/#same-server-simplest","title":"Same Server (Simplest)","text":"<p>Piler and Ollama on same machine:</p> <pre><code>\u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510\n\u2502  Server                         \u2502\n\u2502  \u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510    \u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510  \u2502\n\u2502  \u2502 Piler UI \u2502\u2500\u2500\u2500\u2192\u2502  Ollama   \u2502  \u2502\n\u2502  \u2502 :3000    \u2502    \u2502  :11434   \u2502  \u2502\n\u2502  \u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518    \u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518  \u2502\n\u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518\n\nConfig:\nLLM_BASE_URL=http://localhost:11434\n</code></pre> <p>Firewall: No changes needed (local connection)</p>"},{"location":"ai-features-setup/#separate-llm-server-recommended-for-production","title":"Separate LLM Server (Recommended for Production)","text":"<p>Piler on one server, Ollama on GPU server:</p> <pre><code>\u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510         \u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500-\u2510\n\u2502 Piler Server\u2502         \u2502  GPU Server       \u2502\n\u2502             \u2502         \u2502                   \u2502\n\u2502  Piler UI   \u2502\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2192\u2502  Ollama :11434    \u2502\n\u2502  :3000      \u2502 Network \u2502  (GPU-accelerated)\u2502\n\u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518         \u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500 \u2500\u2518\n\nConfig:\nLLM_BASE_URL=http://gpu-server.internal:11434\n</code></pre> <p>Firewall rules:</p> <pre><code># On GPU server\nsudo ufw allow from PILER_SERVER_IP to any port 11434\n\n# Or open to network (if trusted)\nsudo ufw allow 11434/tcp\n</code></pre> <p>Ollama config (GPU server):</p> <pre><code># Allow network access\nexport OLLAMA_HOST=0.0.0.0:11434\n\n# Start Ollama\nollama serve\n</code></pre>"},{"location":"ai-features-setup/#docker-compose-setup","title":"Docker Compose Setup","text":"<p>Full stack with Ollama:</p> <pre><code>version: '3.8'\n\nservices:\n  piler-ui:\n    image: sutoj/piler-ui:latest\n    environment:\n      LLM_ENABLED: \"true\"\n      LLM_BASE_URL: \"http://ollama:11434\"\n      LLM_MODEL: \"llama3.1:8b\"\n    depends_on:\n      - ollama\n    networks:\n      - piler-network\n\n  ollama:\n    image: ollama/ollama:latest\n    volumes:\n      - ollama-data:/root/.ollama\n    ports:\n      - \"11434:11434\"\n    # GPU support (uncomment if you have NVIDIA GPU)\n    # deploy:\n    #   resources:\n    #     reservations:\n    #       devices:\n    #         - driver: nvidia\n    #           count: 1\n    #           capabilities: [gpu]\n    networks:\n      - piler-network\n\nnetworks:\n  piler-network:\n    driver: bridge\n\nvolumes:\n  ollama-data:\n</code></pre> <p>Pull model:</p> <pre><code>docker-compose up -d\ndocker exec -it &lt;ollama-container&gt; ollama pull llama3.1:8b\n</code></pre>"},{"location":"ai-features-setup/#performance-tuning","title":"Performance Tuning","text":""},{"location":"ai-features-setup/#gpu-acceleration-nvidia","title":"GPU Acceleration (NVIDIA)","text":"<p>Verify GPU is detected:</p> <pre><code># Check NVIDIA driver\nnvidia-smi\n\n# Ollama should detect GPU automatically\n# Check logs:\njournalctl -u ollama -f | grep -i gpu\n# Should show: \"Using GPU: NVIDIA GeForce RTX 4090\"\n</code></pre> <p>If GPU not detected:</p> <pre><code># Install CUDA toolkit\n# Ubuntu/Debian:\nsudo apt install nvidia-cuda-toolkit\n\n# Restart Ollama\nsudo systemctl restart ollama\n</code></pre>"},{"location":"ai-features-setup/#cpu-only-optimization","title":"CPU-Only Optimization","text":"<p>If running without GPU:</p> <pre><code># Use smaller model for faster responses\nollama pull phi3:mini  # 2.3GB, faster on CPU\n\n# Update Piler config\nLLM_MODEL=phi3:mini\n</code></pre> <p>Tune thread count:</p> <pre><code># Set CPU threads (default: auto)\nexport OLLAMA_NUM_THREADS=8  # Match your CPU cores\n\nollama serve\n</code></pre>"},{"location":"ai-features-setup/#memory-management","title":"Memory Management","text":"<p>Limit model memory:</p> <pre><code># Unload models after 5 minutes of inactivity (default)\nexport OLLAMA_KEEP_ALIVE=5m\n\n# Or keep loaded always (faster but uses RAM)\nexport OLLAMA_KEEP_ALIVE=-1\n\nollama serve\n</code></pre>"},{"location":"ai-features-setup/#troubleshooting","title":"Troubleshooting","text":""},{"location":"ai-features-setup/#llm-service-not-configured-error","title":"\"LLM service not configured\" Error","text":"<p>Cause: Piler can't reach Ollama</p> <p>Solutions:</p> <ol> <li>Check Ollama is running:</li> </ol> <pre><code>curl http://localhost:11434/api/tags\n# Should return list of models\n</code></pre> <ol> <li>Check Piler config:</li> </ol> <pre><code>grep LLM_BASE_URL .env\n# Should match Ollama address\n</code></pre> <ol> <li>Check firewall (if separate servers):</li> </ol> <pre><code># From Piler server\ncurl http://gpu-server:11434/api/tags\n# Should connect\n</code></pre>"},{"location":"ai-features-setup/#slow-ai-responses-10-seconds","title":"Slow AI Responses (&gt;10 seconds)","text":"<p>Cause: Running on CPU without GPU</p> <p>Solutions:</p> <ol> <li> <p>Add GPU: Install NVIDIA GPU, verify with <code>nvidia-smi</code></p> </li> <li> <p>Use smaller model:</p> </li> </ol> <pre><code>ollama pull phi3:mini\n# Update LLM_MODEL=phi3:mini in .env\n</code></pre> <ol> <li> <p>Upgrade hardware:</p> </li> <li> <p>Minimum: 8 CPU cores, 16GB RAM</p> </li> <li>Recommended: RTX 3060 or better</li> </ol>"},{"location":"ai-features-setup/#model-not-found-error","title":"\"Model not found\" Error","text":"<p>Cause: Model not pulled</p> <p>Solution:</p> <pre><code># Pull the model\nollama pull llama3.1:8b\n\n# Verify\nollama list\n</code></pre>"},{"location":"ai-features-setup/#out-of-memory-oom-errors","title":"Out of Memory (OOM) Errors","text":"<p>Cause: Model too large for available VRAM/RAM</p> <p>Solutions:</p> <ol> <li>Use smaller model:</li> </ol> <pre><code>ollama pull llama3.1:8b  # Instead of 70b\n</code></pre> <ol> <li>Increase swap (Linux):</li> </ol> <pre><code>sudo fallocate -l 16G /swapfile\nsudo chmod 600 /swapfile\nsudo mkswap /swapfile\nsudo swapon /swapfile\n</code></pre> <ol> <li>Reduce concurrent requests:</li> </ol> <pre><code># Piler handles this automatically with rate limiting\n# No config needed\n</code></pre>"},{"location":"ai-features-setup/#connection-timeout","title":"Connection Timeout","text":"<p>Cause: LLM taking too long to respond</p> <p>Solution: Piler has built-in timeouts:</p> <ul> <li>Email summary: 60 seconds</li> <li>Thread summary: 120 seconds</li> <li>Search translation: 10 seconds</li> </ul> <p>These are reasonable. If hitting timeouts, your LLM is too slow (needs GPU).</p>"},{"location":"ai-features-setup/#security-considerations","title":"Security Considerations","text":""},{"location":"ai-features-setup/#network-security","title":"Network Security","text":"<p>Ollama has NO authentication!</p> <p>If running on separate server:</p> <pre><code># Option 1: Firewall (recommended)\nsudo ufw allow from PILER_IP to any port 11434\nsudo ufw deny 11434  # Block others\n\n# Option 2: VPN/Private network\n# Run Ollama on private network only\n\n# Option 3: Reverse proxy with auth (advanced)\n# Use nginx with basic auth in front of Ollama\n</code></pre> <p>Never expose Ollama directly to the internet!</p>"},{"location":"ai-features-setup/#data-privacy","title":"Data Privacy","text":"<p>What gets sent to Ollama:</p> <ul> <li>Email subject</li> <li>Email body (truncated to 50KB for summaries)</li> <li>Thread messages (up to 50 messages)</li> </ul> <p>What NEVER leaves your server:</p> <ul> <li>Nothing! Ollama runs locally</li> <li>No external API calls</li> <li>No telemetry (unless you enable it)</li> </ul> <p>Compliance:</p> <ul> <li>\u2705 GDPR compliant (data stays on-premise)</li> <li>\u2705 HIPAA compatible (no third-party processing)</li> <li>\u2705 SOC 2 friendly (complete audit trail)</li> </ul>"},{"location":"ai-features-setup/#production-deployment","title":"Production Deployment","text":""},{"location":"ai-features-setup/#recommended-architecture","title":"Recommended Architecture","text":"<p>For small deployments (&lt;500 users):</p> <pre><code>\u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510\n\u2502  Single Server             \u2502\n\u2502  \u2022 Piler UI                \u2502\n\u2502  \u2022 Ollama (CPU/small GPU)  \u2502\n\u2502  \u2022 MySQL                   \u2502\n\u2502  \u2022 Manticore               \u2502\n\u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518\n\nHardware: 8 cores, 16GB RAM, optional RTX 3060\n</code></pre> <p>For medium deployments (500-5K users):</p> <pre><code>\u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510      \u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510\n\u2502 Piler Server\u2502      \u2502  GPU Server  \u2502\n\u2502 \u2022 UI        \u2502\u2500\u2500\u2500\u2500\u2500\u2192\u2502  \u2022 Ollama    \u2502\n\u2502 \u2022 MySQL     \u2502      \u2502  \u2022 RTX 4090  \u2502\n\u2502 \u2022 Manticore \u2502      \u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518\n\u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518\n</code></pre> <p>For large deployments (5K+ users):</p> <pre><code>\u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510      \u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510\n\u2502 Piler Master\u2502      \u2502  GPU Cluster       \u2502\n\u2502 \u2022 UI        \u2502\u2500\u2500\u2500\u2500\u2500\u2192\u2502  \u2022 Ollama (node 1) \u2502\n\u2502             \u2502      \u2502  \u2022 Ollama (node 2) \u2502\n\u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518      \u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518\n         \u2502\n         \u251c\u2500\u2500\u2192 Worker 1 (emails)\n         \u2514\u2500\u2500\u2192 Worker 2 (emails)\n\nUse load balancer for Ollama nodes\n</code></pre>"},{"location":"ai-features-setup/#high-availability","title":"High Availability","text":"<p>Option 1: Multiple Ollama instances</p> <pre><code># Run Ollama on 2+ servers\n# Use nginx/HAProxy load balancer\n\n# Piler config:\nLLM_BASE_URL=http://llm-loadbalancer:11434\n</code></pre> <p>Option 2: Failover</p> <pre><code># Primary Ollama on GPU server\n# Backup Ollama on CPU (slower but works)\n\n# Application handles failover automatically via retries\n</code></pre>"},{"location":"ai-features-setup/#cost-analysis","title":"Cost Analysis","text":""},{"location":"ai-features-setup/#on-premise-ollama","title":"On-Premise (Ollama)","text":"<p>One-time costs:</p> <ul> <li>RTX 4090 GPU: $1,600-2,000</li> <li>Server: $2,000-4,000 (if needed)</li> <li>Setup: $500-1,000 (engineering time)</li> </ul> <p>Ongoing:</p> <ul> <li>Power: ~$30-50/month (300W GPU)</li> <li>Maintenance: Minimal</li> </ul> <p>Total first year: ~$4,000-7,000</p> <p>Unlimited queries after initial investment.</p>"},{"location":"ai-features-setup/#cloud-api-alternative-not-recommended","title":"Cloud API (Alternative - Not Recommended)","text":"<p>OpenAI/Anthropic pricing:</p> <ul> <li>~$0.01-0.05 per summary</li> <li>1,000 summaries/day = $10-50/day = $3,650-18,250/year</li> <li>10,000 summaries/day = $36,500-182,500/year</li> </ul> <p>Drawbacks:</p> <ul> <li>\u274c Data leaves your infrastructure (compliance risk)</li> <li>\u274c Ongoing per-query costs</li> <li>\u274c Vendor lock-in</li> <li>\u274c Potential downtime (external dependency)</li> </ul> <p>Recommendation: On-premise Ollama for enterprise. Cloud APIs only for trials/demos.</p>"},{"location":"ai-features-setup/#configuration-reference","title":"Configuration Reference","text":""},{"location":"ai-features-setup/#all-available-options","title":"All Available Options","text":"<pre><code># Core AI Settings\nLLM_ENABLED=true|false\n# Enable/disable all AI features\n# Default: false\n\nLLM_BASE_URL=http://localhost:11434\n# Ollama/LLM server URL\n# Default: http://localhost:11434\n\nLLM_MODEL=llama3.1:8b\n# Model name (must be pulled in Ollama)\n# Default: llama3.1:8b\n# Alternatives: mistral:7b, qwen2.5:7b, phi3:mini\n\nLLM_CACHE_EXPIRY_MINUTES=15\n# Redis cache TTL for summaries\n# Default: 15 minutes\n# Threads cached for 60 minutes (hardcoded)\n\nNL2QUERY_PROMPT_FILE=\n# Custom prompt template for conversational search\n# Empty = use embedded default\n# Example: /etc/piler/prompts/custom_nl2query.txt\n</code></pre>"},{"location":"ai-features-setup/#multi-tenant-configuration","title":"Multi-Tenant Configuration","text":"<p>Same LLM for all tenants:</p> <pre><code># Global config in .env\nLLM_ENABLED=true\nLLM_BASE_URL=http://localhost:11434\n</code></pre> <p>Per-tenant enable/disable:</p> <pre><code>-- In tenant_settings table\nUPDATE piler.tenant_settings\nSET settings_json = JSON_SET(settings_json, '$.llm_enabled', true)\nWHERE tenant_id = 'tenant1';\n</code></pre>"},{"location":"ai-features-setup/#customizing-ai-behavior","title":"Customizing AI Behavior","text":""},{"location":"ai-features-setup/#default-conversational-search-prompt","title":"Default Conversational Search Prompt","text":"<p>The conversational search uses this prompt template (embedded in binary):</p> <p>Location: <code>internal/llm/prompts/nl2query.txt</code></p> Click to view full default prompt template <pre><code>You are a search query translator for an email archiving system. Convert natural language questions into Piler search syntax.\n\nSEARCH SYNTAX:\n- from:email@domain.com - Filter by sender\n- to:email@domain.com - Filter by recipient\n- subject:keyword - Search in subject (can include multiple words: subject:word1 word2)\n- subject:\"exact phrase\" - Search for exact phrase in subject\n- body:keyword - Search in body text (can include multiple words: body:word1 word2)\n- body:\"exact phrase\" - Search for exact phrase in body\n- date1:YYYY-MM-DD - Start date (use with date2 for range)\n- date2:YYYY-MM-DD - End date (use with date1 for range)\n- a:any - Has any attachment\n- a:pdf - Has PDF attachments ONLY\n- a:word - Has Word document attachments ONLY\n- a:excel - Has Excel spreadsheet attachments ONLY\n- a:image - Has image attachments ONLY (jpg, png, gif, etc. - use a:image, NOT a:jpg)\n- a:zip - Has zip/archive attachments ONLY\n- attachment:filename.pdf - Has specific attachment filename\n- size:&gt;5M - Size greater than 5MB (use M for megabytes, K for kilobytes)\n- direction:inbound - Received emails (also: direction:outbound, direction:internal)\n- category:name - Filter by category (short form: cat:name)\n- tag:tagname - Search by tag\n- note:text - Search in notes\n- id:123 - Specific message ID\n\nOPERATORS:\n- Multiple terms separated by spaces are implicitly AND (no parentheses needed)\n- OR - Either term (use uppercase: urgent OR important)\n- NOT - Exclude term (use uppercase: NOT spam)\n- \"exact phrase\" - Phrase search in quotes\n- * - Wildcard (john* matches john, johnny, johns)\n- ( ) - ONLY use parentheses for grouping OR/NOT operations, NOT for simple AND queries\n\nIMPORTANT NOTES:\n- For date ranges, use date1: and date2: together (NOT date:X..Y)\n- For \"has any attachment\" use a:any (NOT has:attachment)\n- Valid attachment types: a:pdf, a:word, a:excel, a:image, a:zip, a:any\n- For images, ALWAYS use a:image (NOT a:jpg, a:png, etc.)\n- For size, use M for megabytes, K for kilobytes (e.g., size:&gt;5M NOT size:&gt;5MB)\n- Keep queries SIMPLE - only include meaningful search terms, skip filler words\n- Skip generic words like \"with\", \"about\", \"problems\", \"issues\", \"emails\", \"messages\"\n- Focus on specific entities: names, subjects, dates, attachment types\n- Example: \"virtualfax problems with pdf attachments\" \u2192 \"subject:virtualfax a:pdf\" (skip \"problems with\")\n- There is NO is:unread filter (this is an archive, not a mailbox)\n- Direction must be: inbound, outbound, or internal\n\nRELATIVE DATES (calculate from today: {{CURRENT_DATE}}):\n- \"today\" \u2192 date1:{{TODAY}} date2:{{TODAY}}\n- \"yesterday\" \u2192 date1:{{YESTERDAY}} date2:{{YESTERDAY}}\n- \"last week\" \u2192 date1:{{LAST_WEEK}} (7 days ago)\n- \"last month\" \u2192 date1:{{LAST_MONTH}} (30 days ago)\n- \"last quarter\" \u2192 date1:{{LAST_QUARTER}} (90 days ago)\n- \"this month\" \u2192 date1:{{MONTH_START}} date2:{{TODAY}}\n- \"this year\" \u2192 date1:{{YEAR_START}}\n\nEXAMPLES:\nInput: \"emails from sarah last week\"\nOutput: {\"query\":\"from:sarah date1:{{LAST_WEEK}}\",\"explanation\":\"Emails from Sarah sent since {{LAST_WEEK}}\",\"confidence\":0.95}\n\nInput: \"urgent messages about project\"\nOutput: {\"query\":\"subject:urgent subject:project\",\"explanation\":\"Messages about urgent project\",\"confidence\":0.90}\n\nInput: \"employment invitation\"\nOutput: {\"query\":\"subject:employment invitation\",\"explanation\":\"Emails about employment invitation\",\"confidence\":0.92}\n\nInput: \"virtualfax problems with pdf attachments\"\nOutput: {\"query\":\"subject:virtualfax a:pdf\",\"explanation\":\"Virtualfax emails with PDF attachments\",\"confidence\":0.93}\n\nInput: \"large PDF attachments from vendors\"\nOutput: {\"query\":\"from:*vendor* size:&gt;5M a:pdf\",\"explanation\":\"PDF attachments larger than 5MB from vendor domains\",\"confidence\":0.88}\n\nInput: \"images from operator\"\nOutput: {\"query\":\"a:image from:operator\",\"explanation\":\"Image attachments from operator\",\"confidence\":0.95}\n\nInput: \"invoices in December\"\nOutput: {\"query\":\"subject:invoice date1:2024-12-01 date2:2024-12-31\",\"explanation\":\"Emails with 'invoice' in subject from December 2024\",\"confidence\":0.92}\n\nInput: \"emails with any attachments from john\"\nOutput: {\"query\":\"from:john a:any\",\"explanation\":\"Emails from John that have attachments\",\"confidence\":0.95}\n\nInput: \"emails about budget OR finance from sarah\"\nOutput: {\"query\":\"from:sarah (subject:budget OR subject:finance)\",\"explanation\":\"Emails from Sarah about budget or finance\",\"confidence\":0.93}\n\nInput: \"attachments sent in the last 5 years\"\nOutput: {\"query\":\"date1:2020-01-20 a:any\",\"explanation\":\"Emails with attachments since January 2020\",\"confidence\":0.94}\n\nCONTEXT-AWARE EXAMPLES (showing how to handle follow-ups):\n\nContext: Previous query was \"virtualfax problems with pdf attachments\" \u2192 \"subject:virtualfax a:pdf\"\nInput: \"after 2015-10-21\"\nOutput: {\"query\":\"subject:virtualfax a:pdf date1:2015-10-21\",\"explanation\":\"Virtualfax emails with PDF attachments after October 21, 2015\",\"confidence\":0.96}\n\nContext: Previous query was \"emails from john\" \u2192 \"from:john\"\nInput: \"just PDFs\"\nOutput: {\"query\":\"from:john a:pdf\",\"explanation\":\"PDF emails from John\",\"confidence\":0.95}\n\nContext: Previous query was \"invoices last month\" \u2192 \"subject:invoice date1:2024-12-20\"\nInput: \"over $10,000\"\nOutput: {\"query\":\"subject:invoice date1:2024-12-20 body:$10,000 OR body:10000\",\"explanation\":\"Invoices from last month over $10,000\",\"confidence\":0.88}\n\n{{CONVERSATION_CONTEXT}}\n\nIMPORTANT RULES:\n1. MUST return valid JSON with exactly these fields: query, explanation, confidence\n2. If there is CONTEXT from previous queries, you MUST include those search terms in the new query\n3. For follow-up/refinement queries (like \"just PDFs\" or \"after 2020\"), ALWAYS combine with previous context\n4. Use confidence &lt; 0.7 if the question is ambiguous\n5. For ambiguous queries, explain what clarification is needed in the explanation field\n6. Calculate today's date from context (assume current date: {{CURRENT_DATE}})\n7. NEVER change dates provided by the user - if user says \"2015\" use 2015, NOT 2025 (this is an archive with old emails)\n8. Use EXACT dates from user input - do not assume typos or correct dates\n9. Always escape special characters in email addresses\n10. Use wildcards (*) for partial matches when appropriate\n11. Prefer (subject:X OR body:X) over just subject:X unless explicitly about subject only\n\nRESPONSE FORMAT (copy this structure exactly):\n{\n  \"query\": \"your translated search query here\",\n  \"explanation\": \"brief explanation of what you're searching for\",\n  \"confidence\": 0.95\n}\n\nRespond with ONLY the JSON object above. No markdown, no code blocks, no extra text.\n</code></pre>"},{"location":"ai-features-setup/#customizing-the-prompt","title":"Customizing the Prompt","text":"<p>Why customize:</p> <ul> <li>Add industry-specific examples (legal, healthcare, finance)</li> <li>Improve accuracy for your organization's terminology</li> <li>Adjust for different LLM models</li> </ul> <p>How to customize:</p> <ol> <li>Create custom prompt file:</li> </ol> <pre><code># Copy embedded template (extract from binary or docs)\ncat &gt; /etc/piler/custom_nl2query.txt &lt;&lt; 'EOF'\n[Paste default template above]\n\n# Add your custom examples:\nInput: \"discovery documents from opposing counsel\"\nOutput: {\"query\":\"from:*@opposing-firm.com category:discovery\",\"explanation\":\"...\",\"confidence\":0.94}\n\nInput: \"patient records with consent forms\"\nOutput: {\"query\":\"subject:patient subject:consent a:pdf\",\"explanation\":\"...\",\"confidence\":0.93}\nEOF\n</code></pre> <ol> <li>Point Piler to custom prompt:</li> </ol> <pre><code># In .env\nNL2QUERY_PROMPT_FILE=/etc/piler/custom_nl2query.txt\n</code></pre> <ol> <li>Restart Piler:</li> </ol> <pre><code>sudo systemctl restart piler-ui\n</code></pre> <p>Template variables available:</p> <ul> <li><code>{{CURRENT_DATE}}</code> Today's date (auto-calculated)</li> <li><code>{{LAST_WEEK}}</code>, <code>{{LAST_MONTH}}</code>, <code>{{LAST_QUARTER}}</code> Relative dates</li> <li><code>{{CONVERSATION_CONTEXT}}</code> Previous queries (auto-injected)</li> </ul> <p>Testing your prompt:</p> <p>Try queries in the UI and check if translations match expectations. Iterate based on real usage patterns.</p>"},{"location":"ai-features-setup/#monitoring","title":"Monitoring","text":""},{"location":"ai-features-setup/#check-ai-feature-health","title":"Check AI Feature Health","text":"<p>1. Test LLM connectivity:</p> <pre><code>curl http://localhost:3000/api/v1/llm/ping \\\n  -H \"Cookie: session=YOUR_SESSION\"\n\n# Should return:\n{\"status\":\"ok\",\"model\":\"llama3.1:8b\"}\n</code></pre> <p>2. Monitor Ollama:</p> <pre><code># Check running models\ncurl http://localhost:11434/api/tags\n\n# Monitor logs\njournalctl -u ollama -f\n\n# Check resource usage\nhtop  # Watch CPU/RAM\nnvidia-smi -l 1  # Watch GPU (if NVIDIA)\n</code></pre> <p>3. Check Piler logs:</p> <pre><code>tail -f /var/log/piler/app.log | grep -i llm\n\n# Look for:\n# \"LLM summarization failed\" - problems\n# \"Cache hit for email summary\" - working well\n</code></pre>"},{"location":"ai-features-setup/#performance-metrics","title":"Performance Metrics","text":"<p>Target metrics:</p> <ul> <li>Email summary: &lt;5 seconds (P95)</li> <li>Thread summary: &lt;30 seconds for 20-message thread (P95)</li> <li>Search translation: &lt;3 seconds (P95)</li> <li>LLM uptime: &gt;99%</li> </ul> <p>If slower:</p> <ul> <li>Add GPU</li> <li>Use smaller model</li> <li>Check network latency (if separate servers)</li> </ul>"},{"location":"ai-features-setup/#upgrading","title":"Upgrading","text":""},{"location":"ai-features-setup/#update-ollama","title":"Update Ollama","text":"<pre><code># Linux/macOS\ncurl -fsSL https://ollama.com/install.sh | sh\n\n# Docker\ndocker pull ollama/ollama:latest\ndocker-compose up -d\n</code></pre>"},{"location":"ai-features-setup/#update-model","title":"Update Model","text":"<pre><code># Pull newer version\nollama pull llama3.1:8b\n\n# Old version removed automatically if space needed\n</code></pre>"},{"location":"ai-features-setup/#piler-updates","title":"Piler Updates","text":"<p>AI features are part of Piler UI - update Piler as normal:</p> <pre><code># Binary update\nsudo systemctl stop piler-ui\nsudo cp new-piler-ui /var/piler/ui/app\nsudo systemctl start piler\n\n# Docker update\ndocker-compose pull sutoj/piler-ui:2.1.0\ndocker-compose up -d\n</code></pre>"},{"location":"ai-features-setup/#faq","title":"FAQ","text":""},{"location":"ai-features-setup/#q-do-i-need-a-gpu","title":"Q: Do I need a GPU?","text":"<p>A: Highly recommended but not required.</p> <ul> <li>Without GPU: 10-30 seconds per summary (acceptable for light use)</li> <li>With GPU: 2-5 seconds per summary (production quality)</li> </ul>"},{"location":"ai-features-setup/#q-can-i-use-gpt-4claude-instead-of-ollama","title":"Q: Can I use GPT-4/Claude instead of Ollama?","text":"<p>A: Technically yes, but not recommended:</p> <ul> <li>\u274c Data leaves your infrastructure</li> <li>\u274c Ongoing costs</li> <li>\u274c Requires code changes (different API format)</li> <li>\u274c Compliance risks</li> </ul> <p>Ollama is designed for on-premise use.</p>"},{"location":"ai-features-setup/#q-how-much-disk-space-for-models","title":"Q: How much disk space for models?","text":"<p>A: ~5-10GB per model</p> <ul> <li>llama3.1:8b: 4.7GB</li> <li>Keep 2-3 models for testing: ~15GB</li> <li>Models stored in <code>~/.ollama/models/</code></li> </ul>"},{"location":"ai-features-setup/#q-can-multiple-piler-instances-share-one-ollama","title":"Q: Can multiple Piler instances share one Ollama?","text":"<p>A: Yes! Ollama handles concurrent requests.</p> <ul> <li>Single RTX 4090: ~10-20 concurrent requests</li> <li>Add more GPUs for higher concurrency</li> </ul>"},{"location":"ai-features-setup/#q-what-if-ollama-crashes","title":"Q: What if Ollama crashes?","text":"<p>A: AI features gracefully degrade:</p> <ol> <li>User gets \"LLM service unavailable\" error</li> <li>Can still use traditional search</li> <li>Cached summaries still served (if available)</li> <li>No impact on email viewing/searching</li> </ol> <p>Ollama auto-restarts via systemd.</p>"},{"location":"ai-features-setup/#q-can-i-customize-ai-prompts","title":"Q: Can I customize AI prompts?","text":"<p>A: Yes! See AI Prompt Customization Guide</p>"},{"location":"ai-features-setup/#q-does-this-work-offlineair-gapped","title":"Q: Does this work offline/air-gapped?","text":"<p>A: Yes!</p> <ol> <li>Download Ollama installer on internet-connected machine</li> <li>Pull model: <code>ollama pull llama3.1:8b</code></li> <li>Copy model files to air-gapped server</li> <li>Works completely offline</li> </ol>"},{"location":"ai-features-setup/#support","title":"Support","text":""},{"location":"ai-features-setup/#getting-help","title":"Getting Help","text":"<ol> <li>Check logs: <code>journalctl -u piler-ui</code> and <code>journalctl -u ollama</code></li> <li>Test Ollama directly: <code>curl http://localhost:11434/api/tags</code></li> <li>Verify config: <code>grep LLM .env</code></li> <li>Contact support: support@mailpiler.com</li> </ol>"},{"location":"ai-features-setup/#reporting-issues","title":"Reporting Issues","text":"<p>Include:</p> <ul> <li>Piler version: <code>./piler-ui --version</code></li> <li>Ollama version: <code>ollama --version</code></li> <li>Model: <code>ollama list</code></li> <li>Error logs (last 50 lines)</li> <li>Hardware: CPU, RAM, GPU (if any)</li> </ul>"},{"location":"ai-features-setup/#next-steps","title":"Next Steps","text":"<ol> <li>\u2705 Install Ollama</li> <li>\u2705 Pull llama3.1:8b model</li> <li>\u2705 Configure Piler (LLM_ENABLED=true)</li> <li>\u2705 Restart Piler</li> <li>\u2705 Test AI Summary feature</li> <li>\u2705 Train users on AI features</li> </ol> <p>See also:</p> <ul> <li>AI Features User Guide - How to use AI features</li> <li>Configuration Options - All Piler settings</li> </ul> <p>Last Update: November 22, 2025</p> <p>Piler Version: 2.1.0+</p> <p>Status: Production Ready</p>"},{"location":"azure-ad-auth/","title":"Authenticating against Azure AD/Entra","text":"<p>This documentation applies to Piler enterprise edition 2.0.0</p> <p>Revision #1</p> <p>Publication date: 2025-SEP-26</p> <p>Azure is a popular cloud provider, and the piler UI supports Azure AD/Entra to provide Single Sign-On (SSO).</p>"},{"location":"azure-ad-auth/#prerequisites","title":"Prerequisites","text":"<p>You have an Azure subscription or trial, you have created users and preferably groups in the appropriate Azure tenant.</p>"},{"location":"azure-ad-auth/#setup-the-application-in-azure","title":"Setup the application in Azure","text":"<p>Click on \u201cApp registration\u201c, enter a name for the application, select \u201cAny Azure AD directory \u2013 Multitenant\u201d at the supported account types, and set the \u201cRedirect URI\u201c. Be sure to replace \u201carchive.example.com\u201d with your archive FQDN. Finally record the application (client) id value.</p> <p></p> <p>Click \u201cCertificates and secrets\u201d, create a new client secret, and record the secret value.</p> <p></p> <p>Select \u201cAPI permissions\u201d, and add the following permissions, then click on the \u201cGrant Admin consent for \u2026\u201d button</p> <p></p>"},{"location":"azure-ad-auth/#configure-the-piler-ui-to-allow-azure-ad-authentication","title":"Configure the piler UI to allow Azure AD authentication","text":"<p>Add the following to the .env file (or to the settings json if you have a multi-tenant license: Be sure to use your actual IDs and secret values!</p> <pre><code>ENABLE_AZURE_AUTH=true\nAZURE_REDIRECT_URL=https://archive.example.com/auth/azure/callback\nAZURE_CLIENT_SECRET=xxxxx~yyyyy_hhhhhhhhhhh.jjjjjjjjjjjjjjjj\nAZURE_CLIENT_ID=aaaaaaaaa-bbbbbb-ccccc-dddddd-eeeeeeeeeeee\nAZURE_TENANT_ID=xxxxxxx-yyyyyyy-zzzzzzzzz-tttttttttt\n</code></pre>"},{"location":"azure-ad-auth/#let-the-users-log-in","title":"Let the users log in","text":"<p>Users will see the \u201cAzure AD\u201d link on the login screen.</p> <p></p> <p>After clicking on it the user is redirected to Azure for authentication. After providing his credentials, he\u2019s redirected back to the piler UI.</p> <p></p> <p>The user also has his group assignments from Azure, and the local groups if there are any.</p> <p></p>"},{"location":"benchmarks/","title":"Benchmarking the new fiber UI","text":"<p>This documentation applies to Piler enterprise edition 2.0.0+</p> <p>Revision #1</p> <p>Publication date: 2025-SEP-26</p> <p>Piler enterprise has a new web app backend. While the 1.x series relies on nginx+PHP, the 2.x series has been rewritten using Go Fiber. While the look of the UI is the same, the backend offers a much better performance.</p>"},{"location":"benchmarks/#benchmark-comparison","title":"Benchmark comparison","text":"<p>The below numbers apply to a virtual machine (VM) having 2 vCPUs and 2 GB memory. Both the fiber and the nginx+php combo have been hit by the k6 performance testing tool using 50 virtual users (VU) for 30s.</p> <p>The search test used an array of 5 search expressions. The view test used an array of 5 messages ranging from 6 kB to 300 kB. Also the search test included a 0.001s delay between requests.</p>"},{"location":"benchmarks/#the-results","title":"The results","text":"Type fiber nginx+php Search 28-29k 9.2k View 18k 1.7k <p>The results indicate that the fiber UI outperforms the legacy UI by a factor of 3 when searching, and by a factor of 10 when retrieving emails from the storage.</p>"},{"location":"benchmarks/#why-nginxphp-fpm-tops-out-earlier","title":"Why nginx/php-fpm tops out earlier","text":"<p>Context switching: PHP-FPM spawns pools of workers, each a separate process. Even with tuning, there\u2019s higher scheduling overhead compared to Fiber goroutines.</p> <p>IPC overhead: Every request goes through nginx \u2192 fastcgi interface \u2192 PHP-FPM socket. Fiber skips this layer.</p> <p>Memory pressure: With 2 GB RAM, each PHP-FPM worker might use 20\u201350 MB under load. 50 workers could eat most of your RAM, so pm.max_children can\u2019t be raised too high.</p> <p>PHP runtime cost: Each request must bootstrap PHP, autoload, parse code paths, etc. Fiber just dispatches Go handlers in memory.</p> <p>The throughput ceiling is in the PHP code execution itself (runtime overhead + DB roundtrips).</p> <p>That\u2019s why Fiber is already giving you a 3\u00d7 boost with the same DB backend and hardware.</p>"},{"location":"compliance/","title":"Piler Enterprise Compliance Overview","text":"<p>This documentation applies to Piler enterprise edition 2.1.0+</p> <p>Revision #1</p> <p>Publication date: 2025-DEC-16</p>"},{"location":"compliance/#piler-enterprise-compliance-overview_1","title":"Piler Enterprise Compliance Overview","text":"<p>This document provides a truthful and detailed overview of Piler Enterprise\u2019s capabilities related to regulatory compliance, security standards, and operational safeguards. All features are accurate as implemented. Final compliance depends on deployment configuration, operational practices, and customer environment.</p>"},{"location":"compliance/#gdpr-data-protection","title":"GDPR / Data Protection","text":"<p>Capabilities:</p> <ul> <li>Configurable retention periods per mailbox or data type.</li> <li>Facilitates data subject access requests (DSAR) via eDiscovery search and export.</li> <li>Supports right-to-erasure requests.</li> <li>Access logging for auditing purposes.</li> </ul> <p>Notes / Caveats:</p> <ul> <li>User IDs and email addresses are treated differently; GDPR obligations must be interpreted contextually.</li> <li>Audit logs provide evidence of access but cannot prevent malicious insiders from performing actions with sufficient privileges.</li> <li>Encryption keys may reside locally; separation depends on deployment choice.</li> </ul>"},{"location":"compliance/#hipaa-health-information-phi","title":"HIPAA (Health Information / PHI)","text":"<p>Capabilities:</p> <ul> <li>Emails and attachments can be encrypted at rest (AES-256) and optionally in transit (TLS for remote database connections).</li> <li>Role-based access control separates administrators, auditors, and other users.</li> <li>Access and export actions are fully logged.</li> <li>On-premise deployment supported.</li> </ul> <p>Notes / Caveats:</p> <ul> <li>Default deployments often colocate MySQL and archive; TLS encryption is recommended but optional in this topology.</li> <li>PHI protection relies on operational configuration: audit logs, TLS, encryption key management, and retention policies.</li> <li>No Business Associate Agreement (BAA) is provided; separate agreements must be arranged if required.</li> </ul>"},{"location":"compliance/#sec-rule-17a-4","title":"SEC Rule 17a-4","text":"<p>Capabilities:</p> <ul> <li>Emails can be stored on WORM-compatible object storage (e.g., S3 Object Lock) if enabled.</li> <li>SHA-256 hashes of all messages are stored in metadata tables; verified on retrieval.</li> <li>Optional TSA verification aggregates message hashes for independent, cryptographically verifiable timestamps.</li> <li>Audit logs record all administrative and user actions; optionally forwarded to external SIEM or log management systems.</li> <li>eDiscovery export allows searches by date, sender/recipient, keywords, and supports hash verification.</li> <li>Configurable retention policies prevent application-level deletion; enforcement depends on storage choice and configuration.</li> </ul> <p>Notes / Caveats:</p> <ul> <li>Tamper-evidence and WORM functionality depend on correct configuration (object locking, TSA cron jobs, SIEM externalization).</li> <li>A malicious administrator with full privileges could bypass local controls.</li> <li>Full SEC 17a-4 compliance requires external immutable storage and independent audit/log retention.</li> </ul>"},{"location":"compliance/#industry-security-principles","title":"Industry Security Principles","text":"<p>Capabilities:</p> <ul> <li>Developed following secure coding practices, including OWASP Top 10 guidelines.</li> <li>Security reviews conducted regularly (code scans, dependency checks, configuration audits).</li> <li>Optional external monitoring and logging (SIEM) supports incident detection and investigation.</li> </ul> <p>Notes / Caveats:</p> <ul> <li>Security effectiveness relies on operational configuration and administrative practices.</li> <li>Internal controls cannot fully prevent malicious administrators from bypassing local safeguards.</li> </ul>"},{"location":"compliance/#general-guidance","title":"General Guidance","text":"<ul> <li>The archive provides technical safeguards to support regulatory compliance.</li> <li>Final compliance depends on customer configuration, operational policies, and independent verification.</li> <li>Piler Enterprise provides strong technical safeguards; for high-assurance scenarios, customers may consider additional layers such as external immutable storage to further strengthen tamper-evidence.</li> <li>Customers and auditors are encouraged to review deployment, configuration, and operational practices to determine suitability for their use case.</li> </ul>"},{"location":"export-emails/","title":"Export emails","text":"<p>This documentation applies to Piler enterprise edition 2.1.0</p> <p>Revision #1</p> <p>Publication date: 2025-DEC-07</p> <pre><code>Usage of pilerexport:\n  -batch-size int\n        Number of files per batch directory (default 1000)\n  -dir string\n        Output directory for EML files\n  -email string\n        Export emails from/to specific email address\n  -progress\n        Show progress bar (suppresses info logs)\n  -start uint\n        Start metadata ID\n  -stop uint\n        End metadata ID\n  -tenantid string\n        Tenant ID (required) (default \"piler\")\n  -zip string\n        Output ZIP file for EML files\n\nExamples:\n  pilerexport -tenantid piler -email user@example.com -dir export\n  pilerexport -tenantid piler -email user@example.com -zip export-user.zip\n</code></pre>"},{"location":"fiber-ui-config-options/","title":"UI configuration options","text":"<p>This documentation applies to Piler enterprise edition 2.0.0</p> <p>Revision #1</p> <p>Publication date: 2025-SEP-09</p>"},{"location":"fiber-ui-config-options/#piler_key","title":"PILER_KEY","text":"<p>Default value: <code>/etc/piler/piler.key</code></p> <p>Description: Path to the private key file used by Piler for signing and cryptographic operations.</p>"},{"location":"fiber-ui-config-options/#retriever_method","title":"RETRIEVER_METHOD","text":"<p>Default value: <code>direct</code></p> <p>Description: Defines how archived emails are retrieved. Options:</p> <ul> <li><code>direct</code>: Read directly from storage</li> <li><code>socket</code>: Use a UNIX domain socket connection</li> <li><code>s3</code>: Retrieve from Amazon S3 or compatible storage</li> </ul>"},{"location":"fiber-ui-config-options/#log_level","title":"LOG_LEVEL","text":"<p>Default value: <code>INFO</code></p> <p>Description: Sets the logging verbosity level. Possible values: <code>DEBUG</code>, <code>INFO</code>, <code>WARN</code>, <code>ERROR</code>.</p>"},{"location":"fiber-ui-config-options/#log_format","title":"LOG_FORMAT","text":"<p>Default value: <code>json</code></p> <p>Description: Output format of logs. Options: <code>json</code>, <code>plain</code>.</p>"},{"location":"fiber-ui-config-options/#username","title":"USERNAME","text":"<p>Default value: <code>\"\"</code></p> <p>Description: Username for the UI to run when started as root.</p>"},{"location":"fiber-ui-config-options/#license_file","title":"LICENSE_FILE","text":"<p>Default value: <code>./license.jwt</code></p> <p>Description: Path to the license file containing a signed license token.</p>"},{"location":"fiber-ui-config-options/#listen_addr","title":"LISTEN_ADDR","text":"<p>Default value: <code>:3000</code></p> <p>Description: Address and port where the Fiber web application will listen for HTTP requests.</p>"},{"location":"fiber-ui-config-options/#trusted_proxies","title":"TRUSTED_PROXIES","text":"<p>Default value: <code>127.0.0.1</code></p> <p>Description: Comma-separated list of trusted proxy IP addresses for handling forwarded headers.</p>"},{"location":"fiber-ui-config-options/#proxy_header","title":"PROXY_HEADER","text":"<p>Default value: <code>X-Forwarded-For</code></p> <p>Description: HTTP header used to extract the real client IP address when behind a proxy.</p>"},{"location":"fiber-ui-config-options/#retriever_socket","title":"RETRIEVER_SOCKET","text":"<p>Default value: <code>/var/piler/sockets/retriever.sock</code></p> <p>Description: Path to the UNIX domain socket used when <code>RETRIEVER_METHOD=socket</code>.</p>"},{"location":"fiber-ui-config-options/#mysql_user","title":"MYSQL_USER","text":"<p>Default value: <code>piler</code></p> <p>Description: MySQL database username.</p>"},{"location":"fiber-ui-config-options/#mysql_password","title":"MYSQL_PASSWORD","text":"<p>Default value: <code>piler123</code></p> <p>Description: MySQL database password.</p>"},{"location":"fiber-ui-config-options/#mysql_host","title":"MYSQL_HOST","text":"<p>Default value: <code>localhost:3306</code></p> <p>Description: Host and port of the MySQL server.</p>"},{"location":"fiber-ui-config-options/#mysql_max_open_conn","title":"MYSQL_MAX_OPEN_CONN","text":"<p>Default value: <code>50</code></p> <p>Description: Maximum number of open MySQL connections per child process.</p>"},{"location":"fiber-ui-config-options/#mysql_max_idle_conn","title":"MYSQL_MAX_IDLE_CONN","text":"<p>Default value: <code>20</code></p> <p>Description: Maximum number of idle MySQL connections in the connection pool.</p>"},{"location":"fiber-ui-config-options/#mysql_conn_max_lifetime","title":"MYSQL_CONN_MAX_LIFETIME","text":"<p>Default value: <code>300s</code></p> <p>Description: Maximum lifetime of a MySQL connection before it is recycled.</p>"},{"location":"fiber-ui-config-options/#manticore_dsn","title":"MANTICORE_DSN","text":"<p>Default value: <code>piler:piler123@tcp(localhost:9306)/?parseTime=true</code></p> <p>Description: DSN for connecting to Manticore search engine (read/write).</p>"},{"location":"fiber-ui-config-options/#manticore_readonly_dsn","title":"MANTICORE_READONLY_DSN","text":"<p>Default value: <code>piler:piler123@tcp(localhost:9307)/?parseTime=true</code></p> <p>Description: DSN for connecting to Manticore search engine (read-only).</p>"},{"location":"fiber-ui-config-options/#redis_addr","title":"REDIS_ADDR","text":"<p>Default value: <code>127.0.0.1:6379</code></p> <p>Description: Redis server address.</p>"},{"location":"fiber-ui-config-options/#tenant_rate_limit_per_minute","title":"TENANT_RATE_LIMIT_PER_MINUTE","text":"<p>Default value: <code>20000</code></p> <p>Description: Maximum number of requests allowed per tenant per minute.</p>"},{"location":"fiber-ui-config-options/#io_rate_limit_per_route","title":"IO_RATE_LIMIT_PER_ROUTE","text":"<p>Default value: <code>200</code></p> <p>Description: I/O rate limit for routes that retrieves emails or attachments from the storage, eg. view, download, attachments (requests per second).</p>"},{"location":"fiber-ui-config-options/#dev_mode","title":"DEV_MODE","text":"<p>Default value: <code>false</code></p> <p>Description: Enables development mode with relaxed security and verbose logging.</p>"},{"location":"fiber-ui-config-options/#node_type","title":"NODE_TYPE","text":"<p>Default value: <code>master</code></p> <p>Description: Role of the current node in a multi-node setup. Options: <code>master</code>, <code>worker</code>.</p>"},{"location":"fiber-ui-config-options/#workers","title":"WORKERS","text":"<p>Default value: <code>\"\"</code></p> <p>Description: List of worker node addresses (for multi-node setups).</p>"},{"location":"fiber-ui-config-options/#jwt_secret","title":"JWT_SECRET","text":"<p>Default value: <code>\"\"</code></p> <p>Description: Secret key used to sign JWT tokens.</p>"},{"location":"fiber-ui-config-options/#enable_category","title":"ENABLE_CATEGORY","text":"<p>Default value: <code>true</code></p> <p>Description: Enable or disable category handling in the UI.</p>"},{"location":"fiber-ui-config-options/#enable_redact","title":"ENABLE_REDACT","text":"<p>Default value: <code>true</code></p> <p>Description: Enable or disable text redaction in the UI.</p>"},{"location":"fiber-ui-config-options/#languages","title":"LANGUAGES","text":"<p>Default value: <code>de,en,es,fr,zh</code></p> <p>Description: List of supported UI languages.</p>"},{"location":"fiber-ui-config-options/#locale","title":"LOCALE","text":"<p>Default value: <code>en-US</code></p> <p>Description: Default locale used for formatting dates and text.</p>"},{"location":"fiber-ui-config-options/#login_logo","title":"LOGIN_LOGO","text":"<p>Default value: <code>/assets/images/login-logo.svg</code></p> <p>Description: Path to the logo displayed on the login page.</p>"},{"location":"fiber-ui-config-options/#header_logo","title":"HEADER_LOGO","text":"<p>Default value: <code>/assets/images/logo-header.svg</code></p> <p>Description: Path to the logo displayed in the application header.</p>"},{"location":"fiber-ui-config-options/#toast_logo","title":"TOAST_LOGO","text":"<p>Default value: <code>/assets/images/logo-round.svg</code></p> <p>Description: Path to the logo used in toast notifications.</p>"},{"location":"fiber-ui-config-options/#header_link","title":"HEADER_LINK","text":"<p>Default value: <code>\"\"</code></p> <p>Description: Custom link displayed in the application header.</p>"},{"location":"fiber-ui-config-options/#header_link_title","title":"HEADER_LINK_TITLE","text":"<p>Default value: <code>\"\"</code></p> <p>Description: Title text for the header link.</p>"},{"location":"fiber-ui-config-options/#max_content_length_to_display","title":"MAX_CONTENT_LENGTH_TO_DISPLAY","text":"<p>Default value: <code>30000</code></p> <p>Description: Maximum content size (in bytes) to render in the UI. Longer messages are truncated in the message preview, but other than that the message is still intact.</p>"},{"location":"fiber-ui-config-options/#rt_index","title":"RT_INDEX","text":"<p>Default value: <code>true</code></p> <p>Description: Enable or disable real-time indexing.</p>"},{"location":"fiber-ui-config-options/#extra_notes","title":"EXTRA_NOTES","text":"<p>Default value: <code>\"\"</code></p> <p>Description: Custom notes displayed in the login page.</p>"},{"location":"fiber-ui-config-options/#multitenancy","title":"MULTITENANCY","text":"<p>Default value: <code>false</code></p> <p>Description: Enable or disable multi-tenant mode.</p>"},{"location":"fiber-ui-config-options/#multinodes","title":"MULTINODES","text":"<p>Default value: <code>false</code></p> <p>Description: Enable or disable multi-node mode.</p>"},{"location":"fiber-ui-config-options/#css","title":"CSS","text":"<p>Default value:  </p> <pre><code>&lt;link rel=\"stylesheet\" href=\"https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css\" integrity=\"sha384-QWTKZyjpPEjISv5WaRU9OFeRpok6YctnYmDr5pNlyT2bRjXh0JMhjY6hW+ALEwIH\" crossorigin=\"anonymous\"&gt; \n&lt;link rel=\"stylesheet\" href=\"https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.3/font/bootstrap-icons.min.css\"&gt; \n&lt;link rel=\"stylesheet\" href=\"/assets/css/style.css\"&gt;\n</code></pre> <p>Description: Built-in CSS includes for styling the UI.</p>"},{"location":"fiber-ui-config-options/#custom_css","title":"CUSTOM_CSS","text":"<p>Default value: <code>\"\"</code></p> <p>Description: Custom CSS overrides for the UI.</p>"},{"location":"fiber-ui-config-options/#admin_group","title":"ADMIN_GROUP","text":"<p>Default value: <code>\"\"</code></p> <p>Description: LDAP or SSO group mapped to administrators.</p>"},{"location":"fiber-ui-config-options/#auditor_group","title":"AUDITOR_GROUP","text":"<p>Default value: <code>\"\"</code></p> <p>Description: LDAP or SSO group mapped to auditors.</p>"},{"location":"fiber-ui-config-options/#restricted_auditor_group","title":"RESTRICTED_AUDITOR_GROUP","text":"<p>Default value: <code>\"\"</code></p> <p>Description: LDAP or SSO group mapped to restricted auditors.</p>"},{"location":"fiber-ui-config-options/#dataofficer_group","title":"DATAOFFICER_GROUP","text":"<p>Default value: <code>\"\"</code></p> <p>Description: LDAP or SSO group mapped to data officers.</p>"},{"location":"fiber-ui-config-options/#enable_google_auth","title":"ENABLE_GOOGLE_AUTH","text":"<p>Default value: <code>false</code></p> <p>Description: Enable Google OAuth2 authentication.</p>"},{"location":"fiber-ui-config-options/#google_client_id","title":"GOOGLE_CLIENT_ID","text":"<p>Default value: <code>\"\"</code></p> <p>Description: Google OAuth2 client ID.</p>"},{"location":"fiber-ui-config-options/#google_client_secret","title":"GOOGLE_CLIENT_SECRET","text":"<p>Default value: <code>\"\"</code></p> <p>Description: Google OAuth2 client secret.</p>"},{"location":"fiber-ui-config-options/#google_redirect_url","title":"GOOGLE_REDIRECT_URL","text":"<p>Default value: <code>\"\"</code></p> <p>Description: Redirect URL for Google OAuth2 login.</p>"},{"location":"fiber-ui-config-options/#enable_azure_auth","title":"ENABLE_AZURE_AUTH","text":"<p>Default value: <code>false</code></p> <p>Description: Enable Microsoft Azure OAuth2 authentication.</p>"},{"location":"fiber-ui-config-options/#azure_client_id","title":"AZURE_CLIENT_ID","text":"<p>Default value: <code>\"\"</code></p> <p>Description: Azure OAuth2 client ID.</p>"},{"location":"fiber-ui-config-options/#azure_client_secret","title":"AZURE_CLIENT_SECRET","text":"<p>Default value: <code>\"\"</code></p> <p>Description: Azure OAuth2 client secret.</p>"},{"location":"fiber-ui-config-options/#azure_tenant_id","title":"AZURE_TENANT_ID","text":"<p>Default value: <code>\"\"</code></p> <p>Description: Azure Active Directory tenant ID.</p>"},{"location":"fiber-ui-config-options/#azure_redirect_url","title":"AZURE_REDIRECT_URL","text":"<p>Default value: <code>\"\"</code></p> <p>Description: Redirect URL for Azure OAuth2 login.</p>"},{"location":"fiber-ui-config-options/#enable_generic_oauth_auth","title":"ENABLE_GENERIC_OAUTH_AUTH","text":"<p>Default value: <code>false</code></p> <p>Description: Enable generic OAuth2 authentication.</p>"},{"location":"fiber-ui-config-options/#generic_oauth_client_id","title":"GENERIC_OAUTH_CLIENT_ID","text":"<p>Default value: <code>\"\"</code></p> <p>Description: Client ID for generic OAuth2 provider.</p>"},{"location":"fiber-ui-config-options/#generic_oauth_client_secret","title":"GENERIC_OAUTH_CLIENT_SECRET","text":"<p>Default value: <code>\"\"</code></p> <p>Description: Client secret for generic OAuth2 provider.</p>"},{"location":"fiber-ui-config-options/#generic_oauth_redirect_url","title":"GENERIC_OAUTH_REDIRECT_URL","text":"<p>Default value: <code>\"\"</code></p> <p>Description: Redirect URL for generic OAuth2 login.</p>"},{"location":"fiber-ui-config-options/#generic_oauth_auth_url","title":"GENERIC_OAUTH_AUTH_URL","text":"<p>Default value: <code>\"\"</code></p> <p>Description: Authorization URL for generic OAuth2 provider.</p>"},{"location":"fiber-ui-config-options/#generic_oauth_token_url","title":"GENERIC_OAUTH_TOKEN_URL","text":"<p>Default value: <code>\"\"</code></p> <p>Description: Token URL for generic OAuth2 provider.</p>"},{"location":"fiber-ui-config-options/#generic_oauth_userinfo_url","title":"GENERIC_OAUTH_USERINFO_URL","text":"<p>Default value: <code>\"\"</code></p> <p>Description: User info URL for generic OAuth2 provider.</p>"},{"location":"fiber-ui-config-options/#enable_authenticator","title":"ENABLE_AUTHENTICATOR","text":"<p>Default value: <code>true</code></p> <p>Description: Enable TOTP authenticator usage for 2FA.</p>"},{"location":"fiber-ui-config-options/#date_format","title":"DATE_FORMAT","text":"<p>Default value: <code>YYYY/MM/DD</code></p> <p>Description: Default date format used in the UI.</p>"},{"location":"fiber-ui-config-options/#timezone","title":"TIMEZONE","text":"<p>Default value: <code>Europe/Budapest</code></p> <p>Description: Default timezone used by the application.</p>"},{"location":"fiber-ui-config-options/#max_download_messages","title":"MAX_DOWNLOAD_MESSAGES","text":"<p>Default value: <code>100</code></p> <p>Description: Maximum number of messages that can be downloaded at once.</p>"},{"location":"fiber-ui-config-options/#smarthost","title":"SMARTHOST","text":"<p>Default value: <code>\"\"</code></p> <p>Description: SMTP relay host (smarthost) used for restoring emails.</p>"},{"location":"fiber-ui-config-options/#smarthost_port","title":"SMARTHOST_PORT","text":"<p>Default value: <code>\"\"</code></p> <p>Description: Port number for the smarthost.</p>"},{"location":"fiber-ui-config-options/#noreply_email_address","title":"NOREPLY_EMAIL_ADDRESS","text":"<p>Default value: <code>no-reply@archive.example.com</code></p> <p>Description: Default \"no-reply\" email address for the UI when restoring email messages.</p>"},{"location":"fiber-ui-config-options/#enable_ldap_auth","title":"ENABLE_LDAP_AUTH","text":"<p>Default value: <code>false</code></p> <p>Description: Enable LDAP authentication.</p>"},{"location":"fiber-ui-config-options/#ldap_host","title":"LDAP_HOST","text":"<p>Default value: <code>\"\"</code></p> <p>Description: LDAP server host and port.</p>"},{"location":"fiber-ui-config-options/#ldap_base_dn","title":"LDAP_BASE_DN","text":"<p>Default value: <code>\"\"</code></p> <p>Description: Base DN for LDAP searches.</p>"},{"location":"fiber-ui-config-options/#ldap_bind_dn","title":"LDAP_BIND_DN","text":"<p>Default value: <code>\"\"</code></p> <p>Description: Bind DN used for LDAP authentication.</p>"},{"location":"fiber-ui-config-options/#ldap_bind_password","title":"LDAP_BIND_PASSWORD","text":"<p>Default value: <code>\"\"</code></p> <p>Description: Password for LDAP bind DN.</p>"},{"location":"fiber-ui-config-options/#ldap_account_objectclass","title":"LDAP_ACCOUNT_OBJECTCLASS","text":"<p>Default value: <code>\"\"</code></p> <p>Description: LDAP object class for user accounts.</p>"},{"location":"fiber-ui-config-options/#ldap_account_mail_attr","title":"LDAP_ACCOUNT_MAIL_ATTR","text":"<p>Default value: <code>\"\"</code></p> <p>Description: LDAP attribute for user email addresses.</p>"},{"location":"fiber-ui-config-options/#ldap_account_userid_attr","title":"LDAP_ACCOUNT_USERID_ATTR","text":"<p>Default value: <code>\"\"</code></p> <p>Description: LDAP attribute for user ID.</p>"},{"location":"fiber-ui-config-options/#ldap_account_username_attr","title":"LDAP_ACCOUNT_USERNAME_ATTR","text":"<p>Default value: <code>\"\"</code></p> <p>Description: LDAP attribute for username.</p>"},{"location":"fiber-ui-config-options/#ldap_distributionlist_objectclass","title":"LDAP_DISTRIBUTIONLIST_OBJECTCLASS","text":"<p>Default value: <code>\"\"</code></p> <p>Description: LDAP object class for distribution lists.</p>"},{"location":"fiber-ui-config-options/#ldap_distributionlist_mail_attr","title":"LDAP_DISTRIBUTIONLIST_MAIL_ATTR","text":"<p>Default value: <code>\"\"</code></p> <p>Description: LDAP attribute for distribution list email addresses.</p>"},{"location":"fiber-ui-config-options/#enable_imap_auth","title":"ENABLE_IMAP_AUTH","text":"<p>Default value: <code>false</code></p> <p>Description: Enable IMAP authentication.</p>"},{"location":"fiber-ui-config-options/#restore_over_imap","title":"RESTORE_OVER_IMAP","text":"<p>Default value: <code>true</code></p> <p>Description: Allow restoring messages to user mailboxes over IMAP.</p>"},{"location":"fiber-ui-config-options/#imap_server","title":"IMAP_SERVER","text":"<p>Default value: <code>\"\"</code></p> <p>Description: IMAP server address.</p>"},{"location":"fiber-ui-config-options/#imap_folder","title":"IMAP_FOLDER","text":"<p>Default value: <code>INBOX</code></p> <p>Description: IMAP folder where restored emails are delivered.</p>"},{"location":"fiber-ui-config-options/#imap_use_tls","title":"IMAP_USE_TLS","text":"<p>Default value: <code>true</code></p> <p>Description: Use TLS for IMAP connections.</p>"},{"location":"fiber-ui-config-options/#enable_pop3_auth","title":"ENABLE_POP3_AUTH","text":"<p>Default value: <code>false</code></p> <p>Description: Enable POP3 authentication.</p>"},{"location":"fiber-ui-config-options/#pop3_server","title":"POP3_SERVER","text":"<p>Default value: <code>\"\"</code></p> <p>Description: POP3 server address.</p>"},{"location":"fiber-ui-config-options/#pop3_use_tls","title":"POP3_USE_TLS","text":"<p>Default value: <code>true</code></p> <p>Description: Use TLS for POP3 connections.</p>"},{"location":"fiber-ui-config-options/#mailcow_host","title":"MAILCOW_HOST","text":"<p>Default value: <code>\"\"</code></p> <p>Description: Mailcow server address.</p>"},{"location":"fiber-ui-config-options/#mailcow_api_key","title":"MAILCOW_API_KEY","text":"<p>Default value: <code>\"\"</code></p> <p>Description: API key for Mailcow integration.</p>"},{"location":"fiber-ui-config-options/#caution_text","title":"CAUTION_TEXT","text":"<p>Default value: <code>Caution: This message was sent from outside the company.&lt;br /&gt;Please do not click links or open attachments unless you&lt;br /&gt;recognize the source of this email and know the content is safe!</code></p> <p>Description: Warning banner displayed on external messages.</p>"},{"location":"fiber-ui-config-options/#gotenberg_addr","title":"GOTENBERG_ADDR","text":"<p>Default value: <code>\"\"</code></p> <p>Description: Address of Gotenberg service used for document PDF export.</p>"},{"location":"fiber-ui-config-options/#enable_export","title":"ENABLE_EXPORT","text":"<p>Default value: <code>true</code></p> <p>Description: Enable export functionality for messages.</p>"},{"location":"fiber-ui-config-options/#min_size_to_enable_export","title":"MIN_SIZE_TO_ENABLE_EXPORT","text":"<p>Default value: <code>10000000000</code></p> <p>Description: Minimum storage size (bytes) required before export is enabled.</p>"},{"location":"fiber-ui-config-options/#max_export_messages","title":"MAX_EXPORT_MESSAGES","text":"<p>Default value: <code>20000</code></p> <p>Description: Maximum number of messages included in a single export.</p>"},{"location":"fiber-ui-config-options/#export_timeout","title":"EXPORT_TIMEOUT","text":"<p>Default value: <code>300s</code></p> <p>Description: Timeout duration for export jobs.</p>"},{"location":"fiber-ui-config-options/#admin_can_manage_exports","title":"ADMIN_CAN_MANAGE_EXPORTS","text":"<p>Default value: <code>true</code></p> <p>Description: Allow administrators to manage export jobs.</p>"},{"location":"fiber-ui-config-options/#dir_export","title":"DIR_EXPORT","text":"<p>Default value: <code>/var/piler/export</code></p> <p>Description: Directory where exported files are stored.</p>"},{"location":"fiber-ui-config-options/#export_warning_text","title":"EXPORT_WARNING_TEXT","text":"<p>Default value: <code>Exported files will be auto removed in 7 days. Please download them in their scheduled period</code></p> <p>Description: Warning text shown to users about export retention.</p>"},{"location":"fiber-ui-config-options/#enable_delete","title":"ENABLE_DELETE","text":"<p>Default value: <code>false</code></p> <p>Description: Enable delete functionality for messages.</p>"},{"location":"fiber-ui-config-options/#need_to_approve_delete","title":"NEED_TO_APPROVE_DELETE","text":"<p>Default value: <code>false</code></p> <p>Description: Require data officer approval before message deletion.</p>"},{"location":"fiber-ui-config-options/#app_trace_name","title":"APP_TRACE_NAME","text":"<p>Default value: <code>\"\"</code></p> <p>Description: Application trace name (used for distributed tracing).</p>"},{"location":"fiber-ui-config-options/#trace_addr","title":"TRACE_ADDR","text":"<p>Default value: <code>\"\"</code></p> <p>Description: Trace collector address (e.g., OpenTelemetry backend).</p>"},{"location":"fiber-ui-config-options/#turnstile_site_key","title":"TURNSTILE_SITE_KEY","text":"<p>Default value: <code>\"\"</code></p> <p>Description: Cloudflare Turnstile site key.</p>"},{"location":"fiber-ui-config-options/#turnstile_secret_key","title":"TURNSTILE_SECRET_KEY","text":"<p>Default value: <code>\"\"</code></p> <p>Description: Cloudflare Turnstile secret key.</p>"},{"location":"fiber-ui-config-options/#tika_url","title":"TIKA_URL","text":"<p>Default value: <code>http://127.0.0.1:9998/tika</code></p> <p>Description: Apache Tika server endpoint for content extraction.</p>"},{"location":"fiber-ui-config-options/#header_line_to_hide","title":"HEADER_LINE_TO_HIDE","text":"<p>Default value: <code>\"\"</code></p> <p>Description: Comma separated Email header lines (without the colon!) to hide in the UI.</p>"},{"location":"fiber-ui-config-options/#example-header_line_to_hidereceiveddelivered-to","title":"Example: HEADER_LINE_TO_HIDE=Received,Delivered-To","text":""},{"location":"fiber-ui-config-options/#saml_cert_file","title":"SAML_CERT_FILE","text":"<p>Default value: <code>saml.crt</code></p> <p>Description: Path to the SAML certificate file.</p>"},{"location":"fiber-ui-config-options/#saml_key_file","title":"SAML_KEY_FILE","text":"<p>Default value: <code>saml.key</code></p> <p>Description: Path to the SAML private key file.</p>"},{"location":"fiber-ui-config-options/#saml_metadata_url","title":"SAML_METADATA_URL","text":"<p>Default value: <code>\"\"</code></p> <p>Description: Metadata URL for SAML IdP.</p>"},{"location":"fiber-ui-config-options/#tsa_public_key_file","title":"TSA_PUBLIC_KEY_FILE","text":"<p>Default value: <code>\"\"</code></p> <p>Description: Path to public key used to verify timestamp authority signatures.</p>"},{"location":"fiber-ui-config-options/#jwt_rsa_public_keys_dir","title":"JWT_RSA_PUBLIC_KEYS_DIR","text":"<p>Default value: <code>\"\"</code></p> <p>Description: Directory containing RSA public keys for JWT validation.</p>"},{"location":"fiber-ui-config-options/#content_security_policy","title":"CONTENT_SECURITY_POLICY","text":"<p>Default value:</p> <pre><code>default-src 'self'; script-src 'self' 'unsafe-eval' 'sha256-ZswfTY7H35rbv8WC7NXBoiC7WNu86vSzCDChNWwZZDM=' \n'sha256-Sc84R3QT4gTYLl5M2SIYCramZDi3OcEjJiog35/7ydU=' https://cdn.jsdelivr.net https://challenges.cloudflare.com ; \nstyle-src 'self' https://cdn.jsdelivr.net; img-src 'self' data: https://cdn.jsdelivr.net https://challenges.cloudflare.com; \nfont-src 'self' https://cdn.jsdelivr.net; frame-src https://challenges.cloudflare.com; connect-src 'self'; \nobject-src 'none'; base-uri 'none'; form-action 'self'; frame-ancestors 'none';\n</code></pre> <p>Description: Content Security Policy (CSP) header applied by the application.</p>"},{"location":"fiber-ui-config-options/#s3_endpoint","title":"S3_ENDPOINT","text":"<p>Default value: <code>\"\"</code></p> <p>Description: S3-compatible storage endpoint, eg. <code>s3.eu-central-003.backblazeb2.com</code></p>"},{"location":"fiber-ui-config-options/#s3_access_key","title":"S3_ACCESS_KEY","text":"<p>Default value: <code>\"\"</code></p> <p>Description: Access key for S3 storage.</p>"},{"location":"fiber-ui-config-options/#s3_secret_key","title":"S3_SECRET_KEY","text":"<p>Default value: <code>\"\"</code></p> <p>Description: Secret key for S3 storage.</p>"},{"location":"fiber-ui-config-options/#s3_use_ssl","title":"S3_USE_SSL","text":"<p>Default value: <code>true</code></p> <p>Description: Enable SSL/TLS for S3 connections.</p>"},{"location":"fiber-ui-config-options/#s3_region","title":"S3_REGION","text":"<p>Default value: <code>\"\"</code></p> <p>Description: S3 region name.</p>"},{"location":"fiber-ui-config-options/#s3_bucket_prefix","title":"S3_BUCKET_PREFIX","text":"<p>Default value: <code>\"\"</code></p> <p>Description: Prefix applied to S3 buckets.</p>"},{"location":"fiber-ui-config-options/#s3_use_subdirs","title":"S3_USE_SUBDIRS","text":"<p>Default value: <code>true</code></p> <p>Description: Store objects in subdirectories within the S3 bucket.</p>"},{"location":"fiber-ui-config-options/#demo_mode","title":"DEMO_MODE","text":"<p>Default value: <code>false</code></p> <p>Description: Enable demo mode with restricted functionality.</p>"},{"location":"fiber-ui-config-options/#allowed_cidrs","title":"ALLOWED_CIDRS","text":"<p>Default value: <code>127.0.0.0/8,172.18.0.0/16,172.19.0.0/16,172.20.0.0/16</code></p> <p>Description: Defines CIDR blocks allowed to access the <code>/metrics</code> and <code>/healthz</code> endpoints.</p>"},{"location":"gdpr-right-to-erasure/","title":"GDPR Article 17 - Right to Erasure","text":"<p>This documentation applies to Piler enterprise edition 2.1.0+</p> <p>Publication date: 2025-DEC-26</p>"},{"location":"gdpr-right-to-erasure/#overview","title":"Overview","text":"<p>Piler Enterprise provides a complete workflow for handling GDPR Article 17 \"Right to Erasure\" (also known as \"Right to be Forgotten\") requests. This feature enables Data Protection Officers (DPOs) and auditors to:</p> <ul> <li>Create erasure requests for data subjects by email address</li> <li>Assess the scope of affected emails</li> <li>Check for legal holds that may block deletion</li> <li>Approve or reject requests with full audit trail</li> <li>Execute deletion with complete erasure</li> <li>Generate deletion certificates as proof of compliance</li> </ul>"},{"location":"gdpr-right-to-erasure/#key-concepts","title":"Key Concepts","text":""},{"location":"gdpr-right-to-erasure/#delete-all-approach","title":"Delete-All Approach","text":"<p>Piler Enterprise uses a full deletion approach rather than redaction for GDPR compliance. When a data subject requests erasure:</p> <ul> <li>All emails where the data subject appears as sender OR recipient are permanently deleted</li> <li>This includes multi-party emails, which are deleted for all parties, not just the data subject</li> <li>The archived message files (.m files) are scheduled for purging</li> </ul> <p>Why delete instead of redact?</p> <ol> <li>Archived message files contain original headers that cannot be modified without compromising archive integrity</li> <li>The \"View Headers\" feature would reveal original sender/recipient data even if metadata was redacted</li> <li>The \"Restore to Mailbox\" feature would deliver the original unredacted message</li> <li>True GDPR Article 17 compliance requires complete erasure of personal data</li> </ol>"},{"location":"gdpr-right-to-erasure/#legal-hold-integration","title":"Legal Hold Integration","text":"<p>The GDPR erasure workflow integrates with the Legal Hold system:</p> <ul> <li>If any affected emails are under an active legal hold, the erasure request is blocked</li> <li>The system checks both user-level holds (specific email addresses) and domain-level holds</li> <li>Blocked requests show the specific legal hold(s) preventing deletion</li> <li>Article 17(3) GDPR explicitly allows retention where required for legal proceedings</li> </ul>"},{"location":"gdpr-right-to-erasure/#request-lifecycle","title":"Request Lifecycle","text":"<p>Each GDPR erasure request progresses through these statuses:</p> Status Description <code>pending</code> Request created, awaiting assessment <code>assessing</code> System is analyzing scope of affected emails <code>blocked</code> Cannot proceed due to active legal hold <code>pending_approval</code> Assessment complete, awaiting DPO/auditor approval <code>approved</code> Approved for execution <code>executing</code> Deletion in progress <code>completed</code> Deletion finished, certificate available <code>rejected</code> Request rejected with documented reason"},{"location":"gdpr-right-to-erasure/#using-the-gdpr-erasure-feature","title":"Using the GDPR Erasure Feature","text":""},{"location":"gdpr-right-to-erasure/#accessing-the-feature","title":"Accessing the Feature","text":"<ol> <li>Log in as an administrator with auditor permissions</li> <li>Navigate to Compliance &gt; GDPR Requests in the admin menu</li> <li>The dashboard shows an overview of all requests by status</li> </ol>"},{"location":"gdpr-right-to-erasure/#creating-an-erasure-request","title":"Creating an Erasure Request","text":"<ol> <li>Click New Erasure Request</li> <li>Enter the Data Subject Name (optional but recommended for documentation)</li> <li>Add one or more Email Addresses associated with the data subject</li> <li>Click \"Add\" after entering each email address</li> <li>The data subject may have multiple email addresses (e.g., work and personal)</li> <li>Review the warning about deletion scope</li> <li>Click Create Request</li> </ol> <p>The system will automatically begin scope assessment after creation.</p>"},{"location":"gdpr-right-to-erasure/#understanding-the-scope-assessment","title":"Understanding the Scope Assessment","text":"<p>The assessment phase counts:</p> <ul> <li>Emails as Sender: Messages where the data subject sent the email</li> <li>Emails as Recipient: Messages where the data subject received the email</li> <li>Attachments: Files associated with affected emails</li> </ul> <p>Important: The total count may include duplicates if the data subject sent emails to themselves or appears in both sender and recipient fields.</p>"},{"location":"gdpr-right-to-erasure/#reviewing-and-approving-requests","title":"Reviewing and Approving Requests","text":"<p>After assessment completes:</p> <ol> <li>Click View Details to review the full scope</li> <li>Verify the data subject's identity through your organization's verification process</li> <li>If approved, click Approve</li> <li>Review the warning about multi-party email deletion</li> <li>Confirm you have verified the data subject's identity</li> <li>If rejected, click Reject and provide a documented reason</li> </ol>"},{"location":"gdpr-right-to-erasure/#executing-the-deletion","title":"Executing the Deletion","text":"<p>After approval:</p> <ol> <li>Click Execute Deletion</li> <li>Review the final warning showing the number of emails to be deleted</li> <li>Confirm to proceed</li> </ol> <p>The deletion process:</p> <ol> <li>Sets each email's retention date to today (scheduling for purge)</li> <li>Removes emails from the Manticore search index</li> <li>Removes emails from the semantic search embeddings (if enabled)</li> <li>Logs all actions to the audit trail</li> </ol> <p>Note: The actual removal of archived message files from storage occurs when the purge daemon runs, according to your system's purge schedule.</p>"},{"location":"gdpr-right-to-erasure/#downloading-the-deletion-certificate","title":"Downloading the Deletion Certificate","text":"<p>After execution completes:</p> <ol> <li>Click Certificate (HTML) for a viewable HTML certificate</li> <li>Click Certificate (PDF) for a PDF version (requires Gotenberg service)</li> </ol> <p>The certificate includes:</p> <ul> <li>Request ID</li> <li>Data subject email address(es)</li> <li>Request and completion dates</li> <li>Number of emails deleted</li> <li>Approver information</li> <li>SHA-256 certificate hash for verification</li> </ul>"},{"location":"gdpr-right-to-erasure/#viewing-the-audit-trail","title":"Viewing the Audit Trail","text":"<p>Click Audit Trail on any request to view:</p> <ul> <li>All actions taken on the request</li> <li>Who performed each action</li> <li>Timestamps and IP addresses</li> <li>Additional details for each action</li> </ul>"},{"location":"gdpr-right-to-erasure/#workflow-diagram","title":"Workflow Diagram","text":"<pre><code>\u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510\n\u2502                    Create Erasure Request                        \u2502\n\u2502  - Enter data subject name (optional)                           \u2502\n\u2502  - Add email address(es)                                        \u2502\n\u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518\n                              \u2502\n                              \u25bc\n\u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510\n\u2502                    Automatic Scope Assessment                    \u2502\n\u2502  - Count emails where subject is sender                         \u2502\n\u2502  - Count emails where subject is recipient                      \u2502\n\u2502  - Count associated attachments                                 \u2502\n\u2502  - Check for blocking legal holds                               \u2502\n\u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518\n                              \u2502\n                    \u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2534\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510\n                    \u2502                   \u2502\n                    \u25bc                   \u25bc\n    \u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510   \u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510\n    \u2502   Legal Hold Found    \u2502   \u2502   No Legal Hold       \u2502\n    \u2502   Status: BLOCKED     \u2502   \u2502   Status: PENDING     \u2502\n    \u2502                       \u2502   \u2502          APPROVAL     \u2502\n    \u2502   Cannot proceed      \u2502   \u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518\n    \u2502   until hold lifted   \u2502               \u2502\n    \u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518               \u2502\n                              \u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2534\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510\n                              \u2502                           \u2502\n                              \u25bc                           \u25bc\n                \u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510   \u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510\n                \u2502       Approve         \u2502   \u2502       Reject          \u2502\n                \u2502   - Verify identity   \u2502   \u2502   - Document reason   \u2502\n                \u2502   - Review scope      \u2502   \u2502   Status: REJECTED    \u2502\n                \u2502   Status: APPROVED    \u2502   \u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518\n                \u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518\n                              \u2502\n                              \u25bc\n\u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510\n\u2502                    Execute Deletion                              \u2502\n\u2502  - Mark emails for purge (set retained date)                    \u2502\n\u2502  - Remove from search index                                      \u2502\n\u2502  - Remove from semantic embeddings                              \u2502\n\u2502  - Log all actions                                              \u2502\n\u2502  Status: EXECUTING \u2192 COMPLETED                                  \u2502\n\u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518\n                              \u2502\n                              \u25bc\n\u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510\n\u2502                    Generate Certificate                          \u2502\n\u2502  - Request details                                              \u2502\n\u2502  - Deletion statistics                                          \u2502\n\u2502  - SHA-256 hash for verification                                \u2502\n\u2502  - Available in HTML and PDF formats                            \u2502\n\u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518\n</code></pre>"},{"location":"gdpr-right-to-erasure/#api-reference","title":"API Reference","text":"<p>The GDPR erasure feature is accessible via REST API for integration with external systems.</p>"},{"location":"gdpr-right-to-erasure/#list-requests","title":"List Requests","text":"<pre><code>GET /api/v1/admin/gdpr/requests\n</code></pre> <p>Query parameters: - <code>status</code> - Filter by status (optional) - <code>limit</code> - Number of results (default: 50) - <code>offset</code> - Pagination offset</p>"},{"location":"gdpr-right-to-erasure/#get-request-details","title":"Get Request Details","text":"<pre><code>GET /api/v1/admin/gdpr/requests/:request_id\n</code></pre>"},{"location":"gdpr-right-to-erasure/#create-request","title":"Create Request","text":"<pre><code>POST /api/v1/admin/gdpr/requests\n\n{\n  \"email_addresses\": [\"john.doe@example.com\", \"j.doe@example.com\"],\n  \"requester_name\": \"John Doe\"\n}\n</code></pre>"},{"location":"gdpr-right-to-erasure/#run-scope-assessment","title":"Run Scope Assessment","text":"<pre><code>POST /api/v1/admin/gdpr/requests/:request_id/assess\n</code></pre>"},{"location":"gdpr-right-to-erasure/#approve-request","title":"Approve Request","text":"<pre><code>POST /api/v1/admin/gdpr/requests/:request_id/approve\n</code></pre>"},{"location":"gdpr-right-to-erasure/#reject-request","title":"Reject Request","text":"<pre><code>POST /api/v1/admin/gdpr/requests/:request_id/reject\n\n{\n  \"reason\": \"Identity could not be verified\"\n}\n</code></pre>"},{"location":"gdpr-right-to-erasure/#execute-deletion","title":"Execute Deletion","text":"<pre><code>POST /api/v1/admin/gdpr/requests/:request_id/execute\n</code></pre>"},{"location":"gdpr-right-to-erasure/#get-certificate-html","title":"Get Certificate (HTML)","text":"<pre><code>GET /api/v1/admin/gdpr/requests/:request_id/certificate\n</code></pre>"},{"location":"gdpr-right-to-erasure/#get-certificate-pdf","title":"Get Certificate (PDF)","text":"<pre><code>GET /api/v1/admin/gdpr/requests/:request_id/certificate/pdf\n</code></pre>"},{"location":"gdpr-right-to-erasure/#get-audit-trail","title":"Get Audit Trail","text":"<pre><code>GET /api/v1/admin/gdpr/requests/:request_id/audit\n</code></pre>"},{"location":"gdpr-right-to-erasure/#database-schema","title":"Database Schema","text":"<p>The GDPR erasure feature uses the following tables:</p>"},{"location":"gdpr-right-to-erasure/#gdpr_requests","title":"gdpr_requests","text":"<p>Stores erasure request information and status.</p> Column Type Description id BIGINT Primary key request_id VARCHAR(50) Human-readable ID (e.g., GDPR-2026-00001) email_addresses JSON Array of data subject email addresses requester_name VARCHAR(255) Data subject name status ENUM Current request status emails_as_sender INT Count from scope assessment emails_as_recipient INT Count from scope assessment attachments_count INT Count from scope assessment blocked_by_legal_hold BOOLEAN Whether blocked by legal hold legal_hold_ids JSON Array of blocking hold IDs blocked_reason TEXT Explanation if blocked created_by VARCHAR(255) User who created request created_at DATETIME Creation timestamp approved_by VARCHAR(255) User who approved/rejected approved_at DATETIME Approval timestamp rejection_reason TEXT Reason if rejected executed_at DATETIME Execution timestamp deleted_count INT Emails deleted redacted_count INT Always 0 (delete-all approach) certificate_hash VARCHAR(64) SHA-256 hash of certificate"},{"location":"gdpr-right-to-erasure/#gdpr_request_audit","title":"gdpr_request_audit","text":"<p>Stores the audit trail for each request.</p> Column Type Description id BIGINT Primary key request_id VARCHAR(50) Reference to gdpr_requests action VARCHAR(50) Action performed performed_by VARCHAR(255) User who performed action performed_at DATETIME Timestamp details JSON Additional context ip_address VARCHAR(45) Client IP address"},{"location":"gdpr-right-to-erasure/#gdpr_request_sequence","title":"gdpr_request_sequence","text":"<p>Generates sequential request IDs per year.</p> Column Type Description year_prefix VARCHAR(4) Year (e.g., \"2026\") last_sequence INT Last used sequence number"},{"location":"gdpr-right-to-erasure/#best-practices","title":"Best Practices","text":""},{"location":"gdpr-right-to-erasure/#identity-verification","title":"Identity Verification","text":"<p>Before approving any erasure request:</p> <ol> <li>Verify the requester's identity through your organization's established procedures</li> <li>Confirm the email addresses belong to the data subject</li> <li>Document the verification method used</li> </ol>"},{"location":"gdpr-right-to-erasure/#legal-hold-coordination","title":"Legal Hold Coordination","text":"<ul> <li>Review all active legal holds before creating erasure requests</li> <li>Coordinate with legal counsel if holds conflict with erasure obligations</li> <li>Document the legal basis for any retention that overrides erasure requests</li> </ul>"},{"location":"gdpr-right-to-erasure/#record-keeping","title":"Record Keeping","text":"<ul> <li>Download and securely store deletion certificates</li> <li>Maintain records of erasure requests for compliance documentation</li> <li>Export audit trails for long-term retention</li> </ul>"},{"location":"gdpr-right-to-erasure/#response-timelines","title":"Response Timelines","text":"<p>Under GDPR, you must respond to erasure requests within:</p> <ul> <li>30 days for standard requests</li> <li>Up to 90 days for complex requests (with notification to the data subject)</li> </ul> <p>Plan your verification and approval workflows accordingly.</p>"},{"location":"gdpr-right-to-erasure/#limitations","title":"Limitations","text":""},{"location":"gdpr-right-to-erasure/#multi-party-emails","title":"Multi-Party Emails","text":"<p>When deleting emails involving multiple parties:</p> <ul> <li>The email is deleted for all parties, not just the data subject</li> <li>Other recipients lose access to that email</li> <li>Consider notifying affected users if appropriate for your organization</li> </ul>"},{"location":"gdpr-right-to-erasure/#backup-considerations","title":"Backup Considerations","text":"<ul> <li>Emails in backups are not immediately deleted</li> <li>Upon backup restoration, purge rules will apply to restored data</li> <li>Consider your backup retention policy in relation to erasure obligations</li> </ul>"},{"location":"gdpr-right-to-erasure/#search-index-timing","title":"Search Index Timing","text":"<ul> <li>Emails are immediately removed from Manticore search index</li> <li>The actual message files are removed when the purge daemon runs</li> <li>Users may briefly see search results that fail to display (until purge completes)</li> </ul>"},{"location":"gdpr-right-to-erasure/#troubleshooting","title":"Troubleshooting","text":""},{"location":"gdpr-right-to-erasure/#request-stuck-in-assessing","title":"Request Stuck in \"Assessing\"","text":"<ul> <li>Check database connectivity</li> <li>Review application logs for errors</li> <li>Manually trigger assessment via the API</li> </ul>"},{"location":"gdpr-right-to-erasure/#legal-hold-blocking-unexpectedly","title":"Legal Hold Blocking Unexpectedly","text":"<ul> <li>Click \"View Details\" to see which holds are blocking</li> <li>Check both user-level and domain-level holds</li> <li>Verify the hold status (only \"active\" holds block)</li> </ul>"},{"location":"gdpr-right-to-erasure/#certificate-pdf-generation-fails","title":"Certificate PDF Generation Fails","text":"<ul> <li>Ensure Gotenberg service is running and accessible</li> <li>Check <code>GOTENBERG_URL</code> configuration</li> <li>HTML certificates remain available as fallback</li> </ul>"},{"location":"gdpr-right-to-erasure/#deletion-not-appearing-complete","title":"Deletion Not Appearing Complete","text":"<ul> <li>Emails are marked for purge but files remain until purge daemon runs</li> <li>Check purge daemon schedule and logs</li> <li>Search index removal is immediate</li> </ul>"},{"location":"gdpr-right-to-erasure/#related-documentation","title":"Related Documentation","text":"<ul> <li>GDPR Compliance Overview - Legal and regulatory framework</li> <li>Legal Hold System - Managing litigation holds</li> <li>Audit Logging - Understanding audit trails</li> <li>Retention Policies - Configuring data retention</li> </ul>"},{"location":"gdpr/","title":"Gdpr","text":"<p>Legal notice</p> <p>This documentation describes how piler enterprise supports compliance with the EU General Data Protection Regulation (GDPR) from a technical and organizational perspective.</p> <p>It does not constitute legal advice and does not replace the controller\u2019s obligation to assess its own legal requirements, risks, and compliance measures.</p> <p>Customers acting as data controllers remain solely responsible for:</p> <ul> <li>determining the lawful basis for processing personal data,</li> <li>configuring retention, access, and legal hold policies,</li> <li>responding to data subject requests, and</li> <li>ensuring overall compliance with applicable data protection laws.</li> </ul> <p>piler enterprise acts exclusively on the documented instructions of the controller and provides technical means to support, but not substitute, regulatory and legal decision-making.</p>"},{"location":"gdpr/#gdpr-roles-and-responsibilities","title":"GDPR roles and responsibilities","text":"<p>Under the EU General Data Protection Regulation (GDPR), compliance obligations depend on the role of each party involved in the processing of personal data.</p>"},{"location":"gdpr/#roles","title":"Roles","text":"<ul> <li> <p>Customer (Controller)   The customer using piler enterprise acts as the data controller within the meaning of Article 4(7) GDPR.   The controller determines the purposes and means of processing personal data contained in archived emails, including:</p> </li> <li> <p>the lawful basis for archiving,</p> </li> <li>retention periods,</li> <li>access policies,</li> <li> <p>and responses to data subject requests.</p> </li> <li> <p>piler enterprise (Processor)   piler enterprise acts as a data processor within the meaning of Article 4(8) GDPR by providing software that processes personal data solely on the documented instructions of the controller.</p> </li> </ul> <p>piler enterprise does not determine the purposes for which personal data is processed and does not use archived email content for its own purposes.</p>"},{"location":"gdpr/#shared-responsibility","title":"Shared responsibility","text":"<p>GDPR compliance depends on the correct configuration, deployment, and use of piler enterprise by the controller, as well as appropriate organizational and technical measures implemented by the controller and/or its service provider.</p> <p>piler enterprise provides technical and organizational features designed to support GDPR-compliant email archiving, including access control, audit logging, retention management, and data security mechanisms. However, the controller remains responsible for ensuring that the processing of personal data complies with applicable data protection laws.</p>"},{"location":"gdpr/#data-processing-agreement-dpa","title":"Data Processing Agreement (DPA)","text":"<p>Where required under Article 28 GDPR, the controller and the processor must enter into a Data Processing Agreement (DPA) governing the processing of personal data when using piler enterprise.</p>"},{"location":"gdpr/#data-processing-agreement-dpa-summary","title":"Data Processing Agreement (DPA) summary","text":"<p>In accordance with Article 28 of the GDPR, piler enterprise acts as a data processor on behalf of the customer (data controller) when processing personal data contained in archived emails.</p> <p>A Data Processing Agreement (DPA) governs this relationship and defines the scope, purpose, and safeguards of the processing activities.</p>"},{"location":"gdpr/#subject-matter-and-duration-of-processing","title":"Subject matter and duration of processing","text":"<ul> <li>The processing concerns the archiving, indexing, storage, search, retrieval, export, and deletion of email messages.</li> <li>Processing takes place for the duration of the customer\u2019s use of piler enterprise and in accordance with the controller\u2019s documented instructions.</li> </ul>"},{"location":"gdpr/#nature-and-purpose-of-processing","title":"Nature and purpose of processing","text":"<ul> <li>Secure and auditable email archiving</li> <li>Compliance with legal, regulatory, and internal retention requirements</li> <li>E-discovery, investigation, and business continuity</li> <li>Fulfilment of data subject access and erasure requests where applicable</li> </ul>"},{"location":"gdpr/#categories-of-personal-data","title":"Categories of personal data","text":"<p>Depending on customer usage, archived emails may contain:</p> <ul> <li>Identification data (e.g. names, email addresses)</li> <li>Contact details</li> <li>Communication content</li> <li>Attachments and metadata</li> <li>Other personal data included in email correspondence</li> </ul>"},{"location":"gdpr/#categories-of-data-subjects","title":"Categories of data subjects","text":"<ul> <li>Employees</li> <li>Contractors</li> <li>Customers</li> <li>Business partners</li> <li>Other correspondents of the controller</li> </ul>"},{"location":"gdpr/#processor-obligations","title":"Processor obligations","text":"<p>piler enterprise commits to:</p> <ul> <li>Process personal data only on documented instructions from the controller</li> <li>Implement appropriate technical and organizational measures to protect personal data</li> <li>Ensure confidentiality of processing</li> <li>Support the controller in fulfilling data subject rights</li> <li>Provide audit logging and accountability mechanisms</li> <li>Assist with compliance obligations where technically feasible</li> </ul>"},{"location":"gdpr/#sub-processing","title":"Sub-processing","text":"<p>piler enterprise does not engage sub-processors unless explicitly agreed or required by the deployment model chosen by the controller (e.g. hosting provider).</p>"},{"location":"gdpr/#data-transfers","title":"Data transfers","text":"<p>piler enterprise does not transfer personal data to third countries unless configured or instructed by the controller.</p>"},{"location":"gdpr/#deletion-or-return-of-data","title":"Deletion or return of data","text":"<p>Upon termination of use, personal data can be deleted or returned in accordance with the controller\u2019s instructions and applicable legal obligations.</p>"},{"location":"gdpr/#lawful-basis-and-purpose-limitation","title":"Lawful basis and purpose limitation","text":"<p>The lawful basis for processing personal data within archived emails is determined solely by the data controller.</p> <p>Typical lawful bases for email archiving include:</p> <ul> <li>Compliance with a legal obligation</li> <li>Legitimate interest of the controller (e.g. business continuity, legal defense, regulatory compliance)</li> </ul> <p>piler enterprise does not assess or determine the lawful basis for processing and does not use archived email content for its own purposes.</p>"},{"location":"gdpr/#purpose-limitation","title":"Purpose limitation","text":"<p>piler enterprise is designed to process personal data exclusively for email archiving\u2013related purposes as instructed by the controller, including:</p> <ul> <li>secure storage,</li> <li>search and retrieval,</li> <li>audit and investigation,</li> <li>retention and deletion management.</li> </ul> <p>Archived email data is not analyzed, profiled, or repurposed beyond these functions.</p>"},{"location":"gdpr/#customer-responsibilities","title":"Customer responsibilities","text":"<p>The controller is responsible for:</p> <ul> <li>documenting the lawful basis for email archiving,</li> <li>informing data subjects as required under GDPR Articles 13 and 14,</li> <li>defining retention periods,</li> <li>ensuring appropriate internal access policies.</li> </ul>"},{"location":"gdpr/#product-safeguards-supporting-purpose-limitation","title":"Product safeguards supporting purpose limitation","text":"<p>piler enterprise supports purpose limitation through:</p> <ul> <li>role-based access control,</li> <li>least-privilege permissions,</li> <li>separation of operational logs from email content,</li> <li>configuration options that restrict access and functionality to authorized users only.</li> </ul>"},{"location":"gdpr/#usage-data-collection-for-licensing-and-billing","title":"Usage Data Collection for Licensing and Billing","text":"<p>Piler Enterprise may transmit aggregated usage statistics to our billing servers to support license compliance and billing obligations. Only domain-level statistics (such as domain names, user counts, and email counts) are transmitted; no email content, subjects, senders, recipients, or message-level data are ever sent. All transmissions are encrypted via TLS/HTTPS to ensure data security. The lawful basis for this processing is the performance of the contract (Article 6(1)(b) GDPR). This telemetry supports operational and billing purposes without exposing personal data, and controllers should document this processing in their Records of Processing Activities.</p>"},{"location":"gdpr/#data-minimization-and-retention-management","title":"Data minimization and retention management","text":"<p>Under GDPR Article 5(1)(c) and (e), personal data must be adequate, relevant, limited to what is necessary, and retained only for as long as required for the specified purpose.</p>"},{"location":"gdpr/#retention-policies","title":"Retention policies","text":"<p>piler enterprise allows controllers to define and enforce retention policies that determine how long archived email data is stored before deletion or anonymization.</p> <p>Retention policies may be configured based on:</p> <ul> <li>mailbox, domain, or tenant,</li> <li>message age,</li> <li>legal or regulatory requirements,</li> <li>internal company policies.</li> </ul> <p>Retention enforcement is automated and auditable.</p>"},{"location":"gdpr/#automated-deletion-and-purging","title":"Automated deletion and purging","text":"<p>When the purging feature is enabled, piler enterprise periodically removes messages that have exceeded their defined retention period.</p> <p>Deletion actions are:</p> <ul> <li>performed automatically according to policy,</li> <li>logged for auditability,</li> <li>irreversible unless prevented by legal hold.</li> </ul>"},{"location":"gdpr/#legal-hold-and-retention-overrides","title":"Legal hold and retention overrides","text":"<p>The legal hold feature allows controllers to prevent deletion of selected email data, even if it would otherwise be eligible for removal under a retention policy.</p> <p>Legal hold may be applied to:</p> <ul> <li>individual mailboxes,</li> <li>users,</li> <li>messages,</li> <li>or cases under investigation.</li> </ul> <p>This ensures compliance with legal obligations while maintaining accountability and traceability.</p>"},{"location":"gdpr/#right-to-erasure-and-selective-deletion","title":"Right to erasure and selective deletion","text":"<p>Where applicable and permitted by law, piler enterprise supports selective deletion of archived messages containing personal data.</p> <p>Deletion may be:</p> <ul> <li>restricted to authorized roles (e.g. auditor, data protection officer),</li> <li>subject to approval workflows,</li> <li>fully logged to provide proof of erasure.</li> </ul> <p>The controller remains responsible for determining whether an erasure request can be fulfilled or must be refused due to overriding legal obligations.</p>"},{"location":"gdpr/#data-minimization-by-design","title":"Data minimization by design","text":"<p>piler enterprise supports data minimization through:</p> <ul> <li>configurable retention limits,</li> <li>message-level deletion capabilities,</li> <li>prevention of unauthorized bulk exports,</li> <li>role-based access control limiting unnecessary exposure of personal data.</li> </ul> <p>Retention and deletion features are designed to prevent excessive or indefinite storage of personal data by default.</p>"},{"location":"gdpr/#data-subject-rights-and-dsar-support","title":"Data subject rights and DSAR support","text":"<p>Under GDPR Chapter III (Articles 12\u201323), data subjects have rights regarding access to, portability of, and in certain cases erasure of their personal data.</p> <p>piler enterprise provides technical features that support controllers in fulfilling these obligations. The controller remains responsible for assessing, responding to, and documenting data subject requests.</p>"},{"location":"gdpr/#right-of-access-article-15","title":"Right of access (Article 15)","text":"<p>piler enterprise supports the right of access by enabling authorized users to efficiently locate and review archived emails related to a specific data subject.</p> <p>Relevant features include:</p> <ul> <li>fast full-text search across archived email content and metadata,</li> <li>filtering by sender, recipient, date range, and keywords,</li> <li>role-based access control restricting searches to authorized users only.</li> </ul> <p>All access to archived messages is logged to ensure accountability.</p>"},{"location":"gdpr/#right-to-data-portability-article-20","title":"Right to data portability (Article 20)","text":"<p>Where applicable, piler enterprise allows controllers to export personal data contained in archived emails in commonly used electronic formats.</p> <p>Exported data may include:</p> <ul> <li>email messages and attachments,</li> <li>relevant metadata,</li> <li>cryptographic signatures to ensure integrity and authenticity.</li> </ul> <p>Exports are subject to access controls and are fully logged for audit purposes.</p>"},{"location":"gdpr/#right-to-erasure-article-17","title":"Right to erasure (Article 17)","text":"<p>Where erasure is permitted under applicable law and does not conflict with legal retention obligations, piler enterprise supports selective deletion of archived emails containing personal data.</p> <p>Deletion actions:</p> <ul> <li>may be restricted to designated roles (e.g. auditor or data protection officer),</li> <li>may require approval workflows depending on configuration,</li> <li>are logged to provide proof of erasure.</li> </ul> <p>If deletion is prevented due to legal hold or statutory retention requirements, this can be demonstrated through audit logs and retention policies.</p>"},{"location":"gdpr/#response-timelines-and-accountability","title":"Response timelines and accountability","text":"<p>piler enterprise provides audit logging that allows controllers to demonstrate:</p> <ul> <li>when a data subject request was handled,</li> <li>which data was accessed, exported, or deleted,</li> <li>which authorized user performed the action.</li> </ul> <p>The controller remains responsible for meeting statutory response deadlines and for communicating with the data subject.</p>"},{"location":"gdpr/#limitations-and-controller-responsibility","title":"Limitations and controller responsibility","text":"<p>piler enterprise does not independently identify data subjects or initiate responses to requests. The controller is responsible for:</p> <ul> <li>verifying the identity of the requester,</li> <li>determining the scope of the request,</li> <li>deciding whether legal exceptions apply,</li> <li>maintaining records of processing activities.</li> </ul> <p>piler enterprise acts solely on the documented instructions of the controller.</p>"},{"location":"gdpr/#notes","title":"Notes","text":"<ul> <li>Identification of data subjects within archived emails is not automatic and may require contextual analysis by authorized personnel.</li> <li>Search results generated by the system may require human review and validation to confirm relevance and completeness.</li> <li>The completeness of search, export, or erasure results depends on the scope of email ingestion, applicable retention policies, and legal hold constraints.</li> </ul>"},{"location":"gdpr/#right-to-erasure-vs-legal-hold","title":"Right to erasure vs. legal hold","text":""},{"location":"gdpr/#regulatory-background","title":"Regulatory background","text":"<p>Under Article 17 of the GDPR, data subjects have the right to request the erasure of their personal data (\u201cright to be forgotten\u201d). However, this right is not absolute.</p> <p>Article 17(3) GDPR explicitly permits the continued processing and retention of personal data where such processing is necessary for, among others:</p> <ul> <li>compliance with a legal obligation to which the controller is subject, or</li> <li>the establishment, exercise, or defence of legal claims.</li> </ul> <p>In practice, this means that statutory retention obligations, litigation holds, and regulatory investigation requirements may lawfully override erasure requests for specific data sets, provided that the scope and duration of retention are proportionate and documented.</p>"},{"location":"gdpr/#how-piler-enterprise-addresses-this-conflict","title":"How piler enterprise addresses this conflict","text":"<p>piler enterprise is designed to help controllers balance erasure obligations with legal retention and legal hold requirements in a controlled, transparent, and auditable manner.</p> <p>The system enforces technical safeguards, while the legal assessment and final decision remain the responsibility of the controller.</p>"},{"location":"gdpr/#1-controlled-erasure-of-archived-emails","title":"1. Controlled erasure of archived emails","text":"<p>Where erasure is permitted under applicable law and no overriding legal obligation exists, piler enterprise supports selective deletion of archived emails containing personal data.</p> <p>Key characteristics:</p> <ul> <li>Erasure actions can be restricted to explicitly authorized roles (e.g. auditor, compliance officer, or data protection officer).</li> <li>Deletion workflows may require explicit approval, depending on organizational policy and system configuration.</li> <li>All erasure actions are logged with user identity, timestamp, and scope of deletion, creating verifiable evidence that the request has been fulfilled.</li> </ul> <p>This enables controllers to demonstrate compliance with valid erasure requests without compromising system integrity or evidential traceability.</p>"},{"location":"gdpr/#2-legal-hold-overrides-erasure-and-purging","title":"2. Legal hold overrides erasure and purging","text":"<p>piler enterprise supports legal hold functionality that prevents deletion of archived emails, even where:</p> <ul> <li>messages have exceeded their normal retention period, or</li> <li>a data subject has submitted an erasure request.</li> </ul> <p>When legal hold is active, affected messages are excluded from both manual deletion and automated purging processes.</p> <p>Legal hold functionality supports compliance with:</p> <ul> <li>litigation hold obligations,</li> <li>regulatory or supervisory authority investigations,</li> <li>industry-specific statutory retention requirements.</li> </ul> <p>Legal hold always takes precedence over erasure and automated retention enforcement, consistent with Article 17(3) GDPR.</p>"},{"location":"gdpr/#3-retention-periods-and-automated-purging","title":"3. Retention periods and automated purging","text":"<p>Controllers may define retention rules to meet local, national, or industry-specific statutory requirements.</p> <p>When automated purging is enabled:</p> <ul> <li>messages exceeding their configured retention period are removed automatically,</li> <li>deletion actions are logged for auditability,</li> <li>legal hold rules override all purging operations.</li> </ul> <p>This approach minimizes long-term data exposure while ensuring that legally required records remain preserved.</p>"},{"location":"gdpr/#backup-and-disaster-recovery-implications","title":"Backup and disaster recovery implications","text":"<p>Under established GDPR guidance, backup systems are treated differently from live processing environments, provided appropriate safeguards are in place.</p> <p>piler enterprise supports GDPR-aligned backup handling as follows:</p> <ul> <li>Archived emails contained in backups are not actively processed or accessed during normal operation.</li> <li>Backup data is restored solely for disaster recovery or system restoration purposes, not for routine access or search.</li> <li>Upon restoration, applicable retention rules, erasure constraints, and legal hold policies are re-applied automatically.</li> <li>Controllers are expected to define backup retention limits to prevent indefinite storage of personal data.</li> </ul> <p>As a result:</p> <ul> <li>Immediate erasure from backup media is not required, provided backups are isolated, secured, and subject to defined retention periods.</li> <li>Any personal data reintroduced during a restore becomes subject to the same GDPR controls as live archived data.</li> </ul>"},{"location":"gdpr/#organizational-responsibility","title":"Organizational responsibility","text":"<p>While piler enterprise provides the technical controls necessary to implement erasure, retention, and legal hold policies, the controller remains responsible for:</p> <ul> <li>assessing whether an erasure request can be lawfully fulfilled,</li> <li>determining whether Article 17(3) exemptions apply,</li> <li>defining retention schedules and legal hold policies,</li> <li>documenting the legal basis for retaining data where erasure is denied.</li> </ul> <p>piler enterprise enables controllers to demonstrate compliance, but does not replace legal or regulatory decision-making.</p>"},{"location":"gdpr/#summary","title":"Summary","text":"<p>piler enterprise supports GDPR-compliant handling of erasure requests by:</p> <ul> <li>enabling auditable deletion of personal data where legally permitted,</li> <li>enforcing legal hold and statutory retention where required,</li> <li>managing purging and backups in a controlled, policy-driven manner.</li> </ul> <p>This provides a balanced, defensible, and regulator-aligned approach to Article 17 compliance in real-world email archiving scenarios.</p>"},{"location":"gdpr/#security-of-processing-article-32-gdpr","title":"Security of processing (Article 32 GDPR)","text":""},{"location":"gdpr/#regulatory-background_1","title":"Regulatory background","text":"<p>Article 32 of the GDPR requires controllers and processors to implement appropriate technical and organizational measures to ensure a level of security appropriate to the risk, including:</p> <ul> <li>Confidentiality, integrity, and availability of personal data</li> <li>Protection against unauthorized or unlawful processing</li> <li>Protection against accidental loss, destruction, or damage</li> <li>The ability to demonstrate the effectiveness of security measures</li> </ul> <p>The measures must take into account the state of the art, implementation costs, and the nature, scope, context, and purposes of processing.</p> <p>The selection and configuration of these measures should be based on the controller\u2019s risk assessment, taking into account the nature of archived email data, potential impact to data subjects, and threat models relevant to the deployment environment.</p>"},{"location":"gdpr/#technical-security-measures-implemented-in-piler-enterprise","title":"Technical security measures implemented in Piler enterprise","text":"<p>Piler enterprise incorporates multiple layers of technical safeguards to protect archived email data throughout its lifecycle.</p>"},{"location":"gdpr/#1-encryption-in-transit-and-at-rest","title":"1. Encryption in transit and at rest","text":"<ul> <li>Email ingestion is protected using TLS encryption during SMTP transmission</li> <li>External mail collection via POP3 and IMAP supports encrypted connections using TLS and is intended to be used with encryption enabled. Support for unencrypted (plaintext) connections is configuration-dependent and should only be enabled following a documented risk assessment by the controller.</li> <li>All archived emails are encrypted at rest using strong symmetric encryption (AES-256)</li> </ul> <p>These measures protect personal data against interception, disclosure, or manipulation during transmission and storage.</p>"},{"location":"gdpr/#2-access-control-and-authentication","title":"2. Access control and authentication","text":"<ul> <li>Role-based access control ensures users can only access data they are authorized to view</li> <li>End users are restricted to their own emails, while auditor roles may access broader datasets where permitted</li> <li>Support for two-factor authentication (2FA) using time-based one-time passwords</li> <li>Integration with Single Sign-On (SSO) systems to centralize identity management</li> </ul> <p>This reduces the risk of unauthorized access and supports the principle of least privilege.</p>"},{"location":"gdpr/#3-integrity-and-tamper-protection","title":"3. Integrity and tamper protection","text":"<ul> <li>Archived messages are stored in a manner that prevents silent modification</li> <li>Exported emails may be cryptographically signed to allow recipients to verify integrity and authenticity outside the archive</li> <li>Audit logs are protected against unauthorized alteration</li> </ul> <p>These mechanisms help ensure the integrity and evidential value of archived communications.</p>"},{"location":"gdpr/#4-network-and-service-level-protections","title":"4. Network and service-level protections","text":"<ul> <li>SMTP access to the archive can be restricted using access control lists</li> <li>The piler SMTP daemon logs relevant transaction metadata for traceability</li> <li>System components log security-relevant events to syslog for centralized monitoring</li> </ul> <p>This supports early detection of misuse or anomalous activity.</p>"},{"location":"gdpr/#organizational-and-configuration-dependent-measures","title":"Organizational and configuration-dependent measures","text":"<p>Some Article 32 requirements depend on how Piler enterprise is deployed and operated. Organizations are expected to define and implement:</p> <ul> <li>User provisioning and de-provisioning procedures</li> <li>Strong password and authentication policies</li> <li>Secure backup and disaster recovery processes</li> <li>Patch management and operating system hardening</li> <li>Incident response and breach notification workflows</li> </ul> <p>Piler enterprise provides the technical foundations, while the controller remains responsible for the surrounding organizational controls.</p>"},{"location":"gdpr/#risk-based-approach","title":"Risk-based approach","text":"<p>Piler enterprise supports a risk-based security model by allowing customers to:</p> <ul> <li>Adjust access controls and approval workflows</li> <li>Limit the number of users with elevated privileges</li> <li>Apply retention and legal hold rules to reduce unnecessary exposure</li> <li>Monitor access and usage through detailed audit logs</li> </ul> <p>This enables organizations to tailor security measures to their specific regulatory and operational risk profile.</p>"},{"location":"gdpr/#summary_1","title":"Summary","text":"<p>Piler enterprise supports compliance with Article 32 GDPR by providing:</p> <ul> <li>Encryption of personal data in transit and at rest</li> <li>Strong authentication and role-based access control</li> <li>Integrity protection and tamper-evident exports</li> <li>Comprehensive logging and monitoring capabilities</li> </ul> <p>Combined with appropriate organizational measures, these features enable a robust and defensible security posture for email archiving under the GDPR.</p>"},{"location":"gdpr/#accountability-audit-logs-evidence-article-52-gdpr","title":"Accountability, audit logs &amp; evidence (Article 5(2) GDPR)","text":""},{"location":"gdpr/#regulatory-background_2","title":"Regulatory background","text":"<p>Under Article 5(2) GDPR, the controller is responsible for, and must be able to demonstrate compliance with the principles of personal data processing (\u201caccountability\u201d).</p> <p>In practice, this means organizations must be able to provide verifiable evidence of:</p> <ul> <li>Who accessed personal data</li> <li>When and how data was accessed or processed</li> <li>Whether access was lawful and authorized</li> <li>Whether data subject requests (eg. access or erasure) were properly handled</li> </ul> <p>Audit logs are a key technical measure to support this obligation.</p>"},{"location":"gdpr/#support-for-records-of-processing-activities-article-30-gdpr","title":"Support for Records of Processing Activities (Article 30 GDPR)","text":"<p>Under Article 30 GDPR, controllers and processors are required to maintain records of processing activities (RoPA) describing how personal data is processed within their organization.</p> <p>piler enterprise does not generate Records of Processing Activities automatically. However, it provides technical evidence and system metadata that can be used by controllers to support the creation and maintenance of Article 30 documentation.</p> <p>Relevant supporting elements include:</p> <ul> <li>configuration data defining retention policies, legal hold rules, and access roles,</li> <li>audit logs showing how archived email data is accessed, searched, exported, or deleted,</li> <li>system logs documenting ingestion and processing of email messages,</li> <li>documentation of technical and organizational security measures implemented within the system.</li> </ul> <p>These elements may assist controllers in documenting:</p> <ul> <li>the categories of personal data processed,</li> <li>the purposes of processing related to email archiving,</li> <li>access controls and recipient categories,</li> <li>retention periods and deletion mechanisms,</li> <li>security measures applied to archived data.</li> </ul> <p>The controller remains fully responsible for maintaining formal Records of Processing Activities and for ensuring their accuracy and completeness. piler enterprise provides technical support for accountability, not legal documentation.</p>"},{"location":"gdpr/#audit-logging-in-piler-enterprise","title":"Audit logging in Piler enterprise","text":"<p>Piler enterprise includes comprehensive and tamper-resistant logging mechanisms to support accountability and traceability across the archiving system.</p>"},{"location":"gdpr/#1-message-ingestion-and-system-level-logging","title":"1. Message ingestion and system-level logging","text":"<p>System components log security-relevant and operational events, including:</p> <ul> <li>SMTP client IP addresses</li> <li>Email recipients</li> <li>SMTP commands used during message transfer</li> <li>Message-ID and metadata</li> <li>Number of attachments per message</li> </ul> <p>These logs provide traceability for how and when emails enter the archive.</p>"},{"location":"gdpr/#2-authentication-and-access-logs","title":"2. Authentication and access logs","text":"<p>The graphical user interface logs all authentication-related events, including:</p> <ul> <li>Successful and failed login attempts</li> <li>Username, timestamp, and source IP address</li> <li>Authentication method (where applicable)</li> </ul> <p>This allows organizations to detect unauthorized access attempts and demonstrate controlled access to personal data.</p>"},{"location":"gdpr/#3-user-activity-audit-trail","title":"3. User activity audit trail","text":"<p>Piler enterprise maintains a detailed audit trail of user actions within the system, including:</p> <ul> <li>Search operations performed by users</li> <li>Viewing of individual emails</li> <li>Export actions</li> <li>Administrative and configuration changes</li> </ul> <p>Each audit entry includes:</p> <ul> <li>User identity</li> <li>Timestamp</li> <li>Source IP address</li> <li>Performed action</li> </ul> <p>This enables precise reconstruction of who accessed which data and why.</p>"},{"location":"gdpr/#supporting-data-subject-rights-and-regulatory-inquiries","title":"Supporting data subject rights and regulatory inquiries","text":"<p>Audit logs produced by Piler enterprise support compliance with multiple GDPR obligations, including:</p> <ul> <li>Article 15 (Right of access): Demonstrating when and by whom personal data was accessed</li> <li>Article 17 (Right to erasure): Providing evidence that deletion actions were executed</li> <li>Article 30 (Records of processing activities): Supporting internal documentation of processing operations</li> <li>Article 33 (Breach notification): Assisting in incident investigation and scope assessment</li> </ul> <p>Logs may also be used to support internal audits, external compliance reviews, or regulatory inspections.</p>"},{"location":"gdpr/#integrity-and-retention-of-audit-logs","title":"Integrity and retention of audit logs","text":"<ul> <li>Audit logs are written in a structured and consistent format</li> <li>Logs can be forwarded to centralized logging or SIEM systems via syslog</li> <li>Access to logs can be restricted to authorized roles only</li> </ul> <p>Organizations are expected to define appropriate log retention periods in line with their regulatory and operational requirements.</p>"},{"location":"gdpr/#organizational-responsibility_1","title":"Organizational responsibility","text":"<p>While Piler enterprise provides detailed technical audit logs, the data controller remains responsible for:</p> <ul> <li>Reviewing and monitoring audit logs</li> <li>Defining escalation and incident response procedures</li> <li>Retaining logs for an appropriate duration</li> <li>Producing logs as evidence to supervisory authorities when required</li> </ul> <p>Piler enterprise enables accountability but does not replace governance or oversight processes.</p>"},{"location":"gdpr/#summary_2","title":"Summary","text":"<p>Piler enterprise supports GDPR accountability requirements by providing:</p> <ul> <li>End-to-end traceability of email ingestion and access</li> <li>Detailed user activity and authentication logs</li> <li>Evidence to support audits, investigations, and data subject requests</li> <li>Integration with external logging and monitoring systems</li> </ul> <p>These capabilities help organizations demonstrate compliance, not merely claim it.</p>"},{"location":"gdpr/#privacy-by-design-by-default-article-25-gdpr","title":"Privacy by design &amp; by default (Article 25 GDPR)","text":""},{"location":"gdpr/#regulatory-background_3","title":"Regulatory background","text":"<p>Article 25 of the GDPR requires controllers to implement data protection by design and by default. This means that privacy safeguards must be:</p> <ul> <li>Integrated into the design and architecture of systems</li> <li>Enabled by default, without requiring user intervention</li> <li>Proportionate to the purpose, scope, and risks of processing</li> </ul> <p>In practice, this focuses on data minimization, access limitation, and controlled processing, rather than optional features.</p>"},{"location":"gdpr/#privacy-by-design-in-piler-enterprise","title":"Privacy by design in Piler enterprise","text":"<p>Piler enterprise incorporates privacy considerations directly into its core architecture and workflows.</p>"},{"location":"gdpr/#1-purpose-limitation-by-system-design","title":"1. Purpose limitation by system design","text":"<ul> <li>Piler enterprise is designed specifically for email archiving and compliance use cases</li> <li>Archived emails are not repurposed for analytics, profiling, or secondary processing</li> <li>Search, review, and export capabilities are limited to explicitly authorized roles</li> </ul> <p>This enforces processing strictly aligned with defined compliance purposes.</p>"},{"location":"gdpr/#2-data-minimization-and-scoped-access","title":"2. Data minimization and scoped access","text":"<ul> <li>Users can only access their own archived emails by default</li> <li>Broader access (eg. auditor roles) must be explicitly assigned</li> <li>Search results and message visibility are limited according to role-based permissions</li> </ul> <p>This reduces unnecessary exposure of personal data.</p>"},{"location":"gdpr/#3-privacy-preserving-default-settings","title":"3. Privacy-preserving default settings","text":"<p>Out-of-the-box defaults are aligned with privacy principles:</p> <ul> <li>Restricted user visibility</li> <li>Access logging enabled</li> <li>Encryption at rest and in transit enabled</li> <li>No public or anonymous access to archived data</li> </ul> <p>Any relaxation of these defaults requires explicit administrative action.</p>"},{"location":"gdpr/#4-retention-and-deletion-controls","title":"4. Retention and deletion controls","text":"<ul> <li>Retention periods can be defined to meet legal or regulatory requirements</li> <li>Automated purging removes data that is no longer required</li> <li>Legal hold must be deliberately enabled and scoped</li> </ul> <p>This ensures that personal data is not retained longer than necessary by default.</p>"},{"location":"gdpr/#5-controlled-data-export","title":"5. Controlled data export","text":"<ul> <li>Export of archived emails is a privileged operation</li> <li>Export actions are logged and auditable</li> <li>Optional cryptographic signatures protect integrity of exported data</li> </ul> <p>This limits uncontrolled dissemination of personal data outside the archive.</p>"},{"location":"gdpr/#privacy-by-default-operational-implications","title":"Privacy by default: operational implications","text":"<p>Piler enterprise is designed so that:</p> <ul> <li>Only the minimum necessary data is accessible for each role</li> <li>Processing actions require authentication and authorization</li> <li>All access is traceable through audit logs</li> </ul> <p>Organizations must consciously configure any broader access or extended retention, supporting the GDPR principle that privacy-friendly behavior is the default.</p>"},{"location":"gdpr/#organizational-responsibility_2","title":"Organizational responsibility","text":"<p>While Piler enterprise supports privacy by design and default at a technical level, the data controller remains responsible for:</p> <ul> <li>Selecting appropriate retention periods</li> <li>Assigning user roles and privileges</li> <li>Ensuring lawful purposes for access and exports</li> <li>Periodically reviewing configurations</li> </ul> <p>The product enables compliance, but governance decisions remain with the organization.</p>"},{"location":"gdpr/#summary_3","title":"Summary","text":"<p>Piler enterprise supports Article 25 GDPR by:</p> <ul> <li>Embedding privacy safeguards into system architecture</li> <li>Enforcing restrictive access and logging by default</li> <li>Supporting purpose limitation, data minimization, and controlled retention</li> <li>Requiring explicit action to reduce privacy protections</li> </ul> <p>This ensures privacy is built in, not added later.</p>"},{"location":"gdpr/#appendix-article-28-gdpr-processor-obligations-mapping","title":"Appendix: Article 28 GDPR \u2013 Processor Obligations Mapping","text":"<p>The table below summarizes how piler enterprise supports the processor obligations set out in Article 28(3) GDPR. This appendix is intended to support vendor assessments, procurement reviews, and compliance audits.</p> Article 28(3) requirement How piler enterprise supports compliance Processing on documented instructions piler enterprise processes personal data solely based on controller configuration and documented instructions. The system does not determine processing purposes independently. Confidentiality Role-based access control, authentication mechanisms, and access logging restrict data access to authorized users only. Security of processing (Article 32) Encryption in transit and at rest, access controls, integrity protection, and logging are provided. Organizational security measures remain the controller\u2019s responsibility. Sub-processing No sub-processors are engaged unless explicitly agreed or required by the chosen deployment or hosting model. Assistance with data subject rights Search, export, deletion, and audit logging features support Articles 15\u201320 GDPR, under controller direction. Assistance with security and breach obligations Audit logs and system logs support incident investigation and breach impact assessment under Articles 33 and 34 GDPR. Deletion or return of data Upon termination, archived data can be deleted or returned in accordance with controller instructions and applicable legal obligations. Demonstration of compliance Detailed audit logs and configuration records support supervisory authority inquiries and compliance verification. <p>piler enterprise acts as a technical processor and does not replace the controller\u2019s governance, legal assessments, or documentation duties.</p>"},{"location":"gobd/","title":"GoBD Compliance for Email Archiving","text":"<p>This documentation applies to Piler enterprise edition 2.1.0+</p> <p>Revision #1</p> <p>Publication date: 2026-JAN-05</p> <p>Legal notice</p> <p>This documentation describes how piler enterprise supports compliance with the German GoBD requirements from a technical and organizational perspective.</p> <p>It does not constitute legal advice and does not replace the organization's obligation to assess its own legal requirements, risks, and compliance measures.</p> <p>Organizations remain solely responsible for:</p> <ul> <li>determining which emails are tax-relevant or commercially relevant,</li> <li>configuring appropriate retention periods,</li> <li>ensuring proper access controls and audit trails,</li> <li>maintaining overall compliance with German tax and commercial law.</li> </ul> <p>piler enterprise provides technical means to support, but not substitute, regulatory and legal decision-making.</p>"},{"location":"gobd/#what-is-gobd","title":"What is GoBD?","text":"<p>GoBD (Grunds\u00e4tze zur ordnungsm\u00e4\u00dfigen F\u00fchrung und Aufbewahrung von B\u00fcchern, Aufzeichnungen und Unterlagen in elektronischer Form sowie zum Datenzugriff) is a German administrative regulation issued by the Federal Ministry of Finance.</p> <p>It defines requirements for:</p> <ul> <li>Electronic bookkeeping and record-keeping</li> <li>Retention of tax-relevant documents in electronic form</li> <li>Data access rights for tax authorities during audits</li> </ul> <p>GoBD applies to all businesses subject to German tax law, regardless of size. Non-compliance can result in:</p> <ul> <li>Rejection of bookkeeping by tax authorities</li> <li>Estimated tax assessments</li> <li>Fines and penalties</li> <li>Increased audit scrutiny</li> </ul>"},{"location":"gobd/#legal-basis","title":"Legal basis","text":"<p>The GoBD requirements are derived from several German laws:</p> Law Requirement \u00a7 147 AO (Abgabenordnung) Retention of tax-relevant documents \u00a7 257 HGB (Handelsgesetzbuch) Retention of commercial correspondence \u00a7 14b UStG Retention of invoices for VAT purposes GoBD (BMF-Schreiben) Technical implementation requirements"},{"location":"gobd/#retention-periods","title":"Retention periods","text":"Document type Retention period Tax-relevant documents (invoices, contracts, financial records) 10 years Commercial correspondence (offers, order confirmations, general business letters) 6 years <p>The retention period begins at the end of the calendar year in which the document was created or received.</p>"},{"location":"gobd/#which-emails-must-be-archived","title":"Which emails must be archived?","text":"<p>Under GoBD, the following email types require archiving:</p>"},{"location":"gobd/#tax-relevant-emails-10-years","title":"Tax-relevant emails (10 years)","text":"<ul> <li>Invoices (incoming and outgoing)</li> <li>Invoice corrections and credit notes</li> <li>Contracts with financial implications</li> <li>Payment confirmations and reminders</li> <li>Tax declarations and correspondence with tax authorities</li> <li>Financial statements and accounting documents</li> </ul>"},{"location":"gobd/#commercially-relevant-emails-6-years","title":"Commercially relevant emails (6 years)","text":"<ul> <li>Offers and quotations</li> <li>Order confirmations</li> <li>Delivery notes and shipping confirmations</li> <li>General business correspondence</li> <li>Customer and supplier communications with commercial significance</li> </ul>"},{"location":"gobd/#emails-that-do-not-require-archiving","title":"Emails that do NOT require archiving","text":"<ul> <li>Private correspondence (if permitted by company policy)</li> <li>Spam and advertising</li> <li>Newsletters without business relevance</li> <li>Internal informal communications without commercial significance</li> </ul>"},{"location":"gobd/#gobd-requirements-and-piler-compliance","title":"GoBD requirements and Piler compliance","text":"<p>The following table maps GoBD requirements to Piler enterprise capabilities:</p> GoBD requirement Description Piler enterprise support Unver\u00e4nderbarkeit (Immutability) Documents must not be modifiable after archiving \u2713 Emails encrypted at rest with AES-256; stored in original format; SHA-256 hash verification on retrieval Vollst\u00e4ndigkeit (Completeness) All relevant documents must be captured \u2713 Automatic capture via SMTP journaling; no manual intervention required Ordnung (Organization) Documents must be systematically organized and retrievable \u2713 Full-text search; metadata indexing; folder/category organization Zeitgerechtheit (Timeliness) Documents must be archived promptly \u2713 Real-time archiving as emails are received Nachvollziehbarkeit (Traceability) All changes must be logged and traceable \u2713 Comprehensive audit logs; access tracking; SIEM integration Maschinelle Auswertbarkeit (Machine readability) Data must be searchable and exportable \u2713 Full-text search; metadata export; eDiscovery capabilities Aufbewahrungsfristen (Retention periods) Configurable retention per document type \u2713 Flexible retention policies per mailbox, domain, or category Datenzugriff (Data access) Tax authorities must be able to access data during audits \u2713 Export in standard formats; auditor role with controlled access"},{"location":"gobd/#technical-implementation","title":"Technical implementation","text":""},{"location":"gobd/#1-immutability-unveranderbarkeit","title":"1. Immutability (Unver\u00e4nderbarkeit)","text":"<p>GoBD requires that archived documents cannot be modified, deleted, or replaced without leaving a trace.</p> <p>How Piler ensures immutability:</p> <ul> <li>Emails are stored in their original format (EML) immediately upon receipt</li> <li>All stored emails are encrypted at rest using AES-256</li> <li>A SHA-256 hash is calculated and stored for each message</li> <li>Hash verification occurs on retrieval to detect any tampering</li> <li>Audit logs record all access and administrative actions</li> <li>Optional: Store on WORM-compatible storage (S3 Object Lock) for enhanced protection</li> <li>Optional: TSA timestamps provide cryptographically verifiable proof of archival time</li> </ul> <p>Configuration recommendation:</p> <p>For maximum GoBD compliance, enable:</p> <pre><code>TSA_ENABLED=true\nTSA_URL=https://freetsa.org/tsr\n</code></pre> <p>This provides independent timestamp verification for archived emails.</p>"},{"location":"gobd/#2-completeness-vollstandigkeit","title":"2. Completeness (Vollst\u00e4ndigkeit)","text":"<p>All tax-relevant and commercially relevant emails must be captured completely.</p> <p>How Piler ensures completeness:</p> <ul> <li>Journal transport rule on mail server captures all emails</li> <li>SMTP-based archiving captures emails in real-time</li> <li>Sender and recipient metadata preserved</li> <li>Attachments archived with parent email</li> <li>Headers preserved in full</li> <li>No email content is modified during archiving</li> </ul> <p>Recommended mail server configuration:</p> <p>Configure your mail server to send a journal copy of all emails to the Piler SMTP daemon. This ensures complete capture without relying on client-side forwarding.</p>"},{"location":"gobd/#3-organization-and-retrievability-ordnung","title":"3. Organization and retrievability (Ordnung)","text":"<p>Archived documents must be systematically organized and efficiently retrievable.</p> <p>How Piler supports organization:</p> <ul> <li>Full-text search across email bodies, subjects, and attachments</li> <li>Metadata search by sender, recipient, date range, size</li> <li>Category/folder system for manual classification</li> <li>Attachment type filtering (PDF, Office documents, etc.)</li> <li>Saved searches for recurring queries</li> <li>Tag system for custom classification</li> </ul> <p>Search capabilities for tax audits:</p> Search type Capability Date range Find all emails within a specific period Sender/recipient Find all correspondence with a specific party Keyword Full-text search across content and attachments Attachment type Find all invoices (PDF), contracts (DOCX), etc. Combined queries Complex searches combining multiple criteria"},{"location":"gobd/#4-traceability-nachvollziehbarkeit","title":"4. Traceability (Nachvollziehbarkeit)","text":"<p>All processing and access to archived documents must be logged.</p> <p>Piler audit logging includes:</p> <ul> <li>Authentication events: Login attempts (successful and failed), logout, session management</li> <li>Access events: Which user viewed which email, when, from which IP address</li> <li>Search events: What searches were performed and by whom</li> <li>Export events: What data was exported and by whom</li> <li>Administrative events: Configuration changes, user management, policy changes</li> <li>Deletion events: If permitted, what was deleted and by whom (with approval workflow)</li> </ul> <p>Audit log protection:</p> <ul> <li>Audit logs are stored separately from email content</li> <li>Logs can be forwarded to external SIEM systems (Splunk, Sumo Logic, Syslog)</li> <li>External log storage prevents tampering by local administrators</li> </ul>"},{"location":"gobd/#5-machine-readability-maschinelle-auswertbarkeit","title":"5. Machine readability (Maschinelle Auswertbarkeit)","text":"<p>Tax authorities may request data in machine-readable formats during audits.</p> <p>Piler export capabilities:</p> Format Use case EML Original email format; standard and portable MBOX Multiple emails in single file; Unix standard PDF Printed representation with metadata CSV Metadata export for spreadsheet analysis PST Microsoft Outlook format (via third-party conversion) <p>GDPdU/GoBD data access:</p> <p>For tax audits, Piler supports:</p> <ul> <li>Z1 access: Direct system access for auditors (via auditor role)</li> <li>Z2 access: Indirect access through reports and exports</li> <li>Z3 access: Data carrier provision (export to external media)</li> </ul> <p>The auditor role in Piler provides controlled read-only access to archived emails without modification capabilities.</p>"},{"location":"gobd/#6-retention-period-management","title":"6. Retention period management","text":"<p>GoBD requires retention of 6 or 10 years depending on document type.</p> <p>Piler retention features:</p> <ul> <li>Retention policies configurable per domain, mailbox, or category</li> <li>Automated purging after retention period expires</li> <li>Legal hold prevents deletion even after retention period</li> <li>Retention reports show what will be deleted and when</li> </ul> <p>Recommended configuration:</p> <pre><code># Default retention for commercial correspondence\nRETENTION_DAYS_DEFAULT=2192  # 6 years\n\n# Extended retention for invoices/financial documents\n# Configure per category or mailbox as needed\n</code></pre> <p>Important: Ensure invoices and tax-relevant documents are categorized for 10-year retention, while general correspondence uses 6-year retention.</p>"},{"location":"gobd/#2025-gobd-amendment-e-invoicing-requirements","title":"2025 GoBD amendment: E-invoicing requirements","text":"<p>As of January 2025, Germany mandates e-invoicing for B2B transactions. The July 2025 GoBD amendment clarifies archiving requirements:</p>"},{"location":"gobd/#key-requirements","title":"Key requirements","text":"Requirement Description Piler support Original format retention E-invoices must be stored in the format received \u2713 Emails stored in original EML format with attachments XML preservation For structured invoices (ZUGFeRD, XRechnung), XML component is legally binding \u2713 Attachments preserved in original format No format conversion required If PDF can be generated from XML, separate PDF storage not required \u2713 Original attachments always preserved Hybrid format handling ZUGFeRD invoices contain both PDF and embedded XML \u2713 Full attachment preservation <p>Piler automatically complies with e-invoicing requirements because:</p> <ul> <li>All email attachments are stored in their original format</li> <li>No conversion or modification occurs during archiving</li> <li>XML, PDF, and hybrid formats are all preserved as received</li> </ul>"},{"location":"gobd/#procedural-documentation-verfahrensdokumentation","title":"Procedural documentation (Verfahrensdokumentation)","text":"<p>GoBD requires organizations to maintain procedural documentation describing their archiving system. This documentation must cover:</p>"},{"location":"gobd/#required-elements","title":"Required elements","text":"<ol> <li>System description</li> <li>Software used (Piler enterprise)</li> <li>Hardware infrastructure</li> <li> <p>Storage locations and backup procedures</p> </li> <li> <p>Process description</p> </li> <li>How emails are captured (journal transport rules)</li> <li>How emails are classified (automatic vs. manual)</li> <li>How retention periods are applied</li> <li> <p>How access is controlled</p> </li> <li> <p>Internal control system (IKS)</p> </li> <li>Access control procedures</li> <li>Audit log monitoring</li> <li>Regular compliance reviews</li> <li> <p>Incident response procedures</p> </li> <li> <p>User documentation</p> </li> <li>Training materials</li> <li>Operating procedures</li> <li>Responsibility assignments</li> </ol> <p>Piler can support your procedural documentation by providing:</p> <ul> <li>System configuration exports</li> <li>Audit log reports</li> <li>User and role configuration reports</li> <li>Retention policy documentation</li> </ul>"},{"location":"gobd/#deployment-recommendations-for-gobd-compliance","title":"Deployment recommendations for GoBD compliance","text":""},{"location":"gobd/#minimum-requirements","title":"Minimum requirements","text":"<ol> <li>Enable comprehensive archiving</li> <li>Configure journal transport rule on mail server</li> <li> <p>Ensure all incoming and outgoing emails are captured</p> </li> <li> <p>Configure retention policies</p> </li> <li>10 years for invoices and financial documents</li> <li> <p>6 years for general commercial correspondence</p> </li> <li> <p>Enable audit logging</p> </li> <li>All access must be logged</li> <li> <p>Forward logs to external SIEM for tamper protection</p> </li> <li> <p>Restrict deletion capabilities</p> </li> <li>Only authorized roles (e.g., auditor, compliance officer) should be able to delete</li> <li> <p>Deletion should require approval workflow</p> </li> <li> <p>Regular backups</p> </li> <li>Follow 3-2-1 backup rule</li> <li>Test restore procedures regularly</li> </ol>"},{"location":"gobd/#enhanced-compliance","title":"Enhanced compliance","text":"<p>For organizations requiring highest assurance:</p> <ol> <li>Enable TSA timestamps</li> <li>Cryptographic proof of archival time</li> <li> <p>Independent third-party verification</p> </li> <li> <p>Use WORM storage</p> </li> <li>S3 Object Lock or equivalent</li> <li> <p>Physical immutability at storage level</p> </li> <li> <p>External audit log storage</p> </li> <li>SIEM integration (Splunk, Sumo Logic)</li> <li> <p>Prevents local administrator tampering</p> </li> <li> <p>Annual compliance audits</p> </li> <li>Review configuration against GoBD requirements</li> <li>Update procedural documentation</li> </ol>"},{"location":"gobd/#auditor-access-for-tax-inspections","title":"Auditor access for tax inspections","text":"<p>During tax audits, authorities may request access to archived emails. Piler supports this through the auditor role:</p>"},{"location":"gobd/#auditor-role-capabilities","title":"Auditor role capabilities","text":"Capability Description Search all emails Full access to archived content within defined scope View emails Read email content and attachments Export emails Download emails in standard formats View audit logs Review access history No modification Cannot delete, modify, or alter archived content"},{"location":"gobd/#creating-auditor-access-for-tax-inspection","title":"Creating auditor access for tax inspection","text":"<ol> <li>Create a user account with auditor role</li> <li>Define scope (date range, domains, mailboxes)</li> <li>Provide credentials to tax authority representative</li> <li>Monitor access via audit logs</li> <li>Disable account after audit completion</li> </ol> <p>All auditor access is fully logged for accountability.</p>"},{"location":"gobd/#summary-gobd-compliance-checklist","title":"Summary: GoBD compliance checklist","text":"Requirement Implementation Status Immutability AES-256 encryption, SHA-256 hashes, audit logs \u2713 Built-in Completeness Journal transport rule, SMTP archiving \u2713 Configuration required Organization Full-text search, metadata indexing, categories \u2713 Built-in Timeliness Real-time archiving \u2713 Built-in Traceability Comprehensive audit logging, SIEM integration \u2713 Built-in Machine readability EML, MBOX, CSV, PDF export \u2713 Built-in Retention periods Configurable retention policies, automated purging \u2713 Configuration required Data access Auditor role, controlled exports \u2713 Built-in Procedural documentation Customer responsibility, Piler provides supporting data \u25cb Customer task <p>Legend: \u2713 = Supported, \u25cb = Customer responsibility</p>"},{"location":"gobd/#related-documentation","title":"Related documentation","text":"<ul> <li>GDPR Compliance - EU data protection requirements</li> <li>Compliance Overview - General compliance capabilities</li> <li>SIEM Integration - Audit log forwarding</li> <li>Retention Policies - Configuration options</li> <li>eDiscovery - Export and legal hold features</li> </ul>"},{"location":"gobd/#references","title":"References","text":"<ul> <li>GoBD (BMF-Schreiben vom 28.11.2019) - Official GoBD document</li> <li>\u00a7 147 AO - Tax code retention requirements</li> <li>\u00a7 257 HGB - Commercial code retention requirements</li> <li>GoBD 2025 Amendment - E-invoicing clarifications</li> </ul>"},{"location":"google-workspace-auth/","title":"Authenticating against Google Workspace (formerly known as GSuite)","text":"<p>This documentation applies to Piler enterprise edition 2.0.0</p> <p>Revision #1</p> <p>Publication date: 2025-SEP-26</p> <p>Google Workspace is a widely used email platform. This documentation describes how to setup Single Sign-On (SSO).</p>"},{"location":"google-workspace-auth/#prerequisites","title":"Prerequisites","text":"<p>You have your own domain at Google Workspace.</p>"},{"location":"google-workspace-auth/#register-the-archive-as-a-web-application","title":"Register the archive as a web application","text":"<p>Go to https://console.developers.google.com/apis/credentials then click on \u201cCreate credentials\u201d, then select \u201cOAuth Client ID\u201d.</p> <p>Fill the required fields, then click on the \u201cCREATE\u201d button. see the image below. Make sure you use your own archive\u2019s hostname.</p> <p></p> <p>Then you\u2019ll see a popup window that \u201cOAuth client created\u201d. Record the client id and the client secret values.</p> <p></p> <pre><code>ENABLE_GOOGLE_AUTH=true\nGOOGLE_REDIRECT_URL=https://archive.example.com/auth/google/callback\nGOOGLE_CLIENT_ID=303962613204-lbusc167ip7oleddkrad0n66jml2igce.apps.googleusercontent.com\nGOOGLE_CLIENT_SECRET=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\n</code></pre>"},{"location":"google-workspace-auth/#configure-google-to-send-a-copy-of-each-received-email-to-piler","title":"Configure Google to send a copy of each received email to piler","text":"<p>Visit https://admin.google.com/AdminHome?hl=en#AppDetails:service=email then select \u201cAdvanced settings\u201d.</p> <p>Find the \u201cRouting\u201d section, hover over the \u201cReceiving routing\u201d item, then click \u201cConfigure\u201d.</p> <p>Give a name to the setting, eg. \u201cpiler-receiving-rule\u201d.</p> <p>Check the \u201cInbound\u201d, and \u201cInternal \u2013 receiving\u201d checkboxes under \u201c1. Email messages to affect\u201d.</p> <p>Check the \u201cAdd X-Gm-Original-To header\u201d option.</p> <p></p> <p>Right under the \u201cAlso deliver to\u201d option check \u201cAdd more recipients\u201d, select \u201cAdvanced\u201d, then check \u201cChange envelope recipient\u201d, and type the archiving email address at \u201cReplace recipient\u201d.</p> <p></p> <p>Click on \u201cSave\u201d, then on \u201cAdd setting\u201d.</p> <p>Do the same for \u201cSender routing\u201d, except select \u201cOutbound\u201d, and \u201cInternal \u2013 sending\u201d at \u201c1. Email messages to affect\u201d</p> <p>Finally click on the \u201cSave changes\u201d button.</p>"},{"location":"google-workspace-auth/#login-for-end-users","title":"Login for end users","text":"<p>Users should click on the \u201cGoogle Workspace\u201d link, then grant permission to the registered web application to read the user\u2019s settings.</p> <p></p> <p>If all goes well, then the user is redirected back to the archive and has access to his archived emails.</p> <p></p>"},{"location":"import-emails/","title":"Import emails","text":"<p>This documentation applies to Piler enterprise edition 2.1.0</p> <p>Revision #2</p> <p>Publication date: 2026-JAN-05</p>"},{"location":"import-emails/#import-local-emails","title":"Import local emails","text":"<pre><code>Usage: pilerimport [options]\n\nOptions:\n  -dir string\n        Process all files in directory (recursively)\n  -eml string\n        Process a single EML file\n  -mbox string\n        Process an mbox file (extracts all messages)\n  -progress\n        Show progress bar (suppresses info logs)\n  -remove\n        Remove file after successful processing\n  -tenantid string\n        Tenant ID (overrides TENANT_ID env var)\n  -workers int\n        Number of parallel workers (default 4)\n\nExamples:\n  pilerimport -eml message.eml -tenantid fictive\n  pilerimport -dir /path/to/emails -tenantid fictive -workers 8\n  pilerimport -mbox archive.mbox -tenantid fictive -workers 4 -progress\n  pilerimport -dir /path/to/emails -remove -workers 4 -progress\n</code></pre>"},{"location":"import-emails/#import-from-an-imap-server","title":"Import from an IMAP server","text":"<pre><code>Usage of imapfetch:\n  -batchsize int\n        batch size to download before processing\n  -dir string\n        directory to chdir\n  -folders string\n        Comma separated list of IMAP folders to download\n  -i    Read IMAP conn data from import table\n  -j int\n        job ID\n  -no-ssl\n        Do not use SSL/TLS\n  -oauth2-token string\n        OAuth2 access token file\n  -password string\n        IMAP password\n  -port int\n        port number (default 993)\n  -print-folders\n        only print IMAP folders, then exit\n  -readonly\n        Open mailbox in read-only mode\n  -remove\n        remove downloaded messages\n  -search string\n        Search expression\n  -server string\n        IMAP server\n  -tenantid string\n        tenant ID (required)\n  -user string\n        IMAP user\n  -verbose\n        verbose mode\n  -x string\n        IMAP folders to skip (default \"junk,trash,spam,draft\")\n\nExamples:\n  imapfetch -server imap.aaa.fu -user bela@aaa.fu -password abcde123 -tenantid piler\n</code></pre> <p>The imapfetch utility can download emails from an IMAP server to the current directory, then you can use pilerimport to process them.</p> <pre><code>pilerimport -dir . -remove\n</code></pre>"},{"location":"import-emails/#import-from-google-workspace","title":"Import from Google Workspace","text":""},{"location":"import-emails/#enable-gmail-api-and-admin-sdk-api","title":"Enable Gmail API and Admin SDK API","text":"<p>Go to Google Cloud Console</p> <p>Create a project, eg. \u201cimport-emails\u201d</p> <p>Click on \u201cAPIs &amp; Services\u201d, then \u201cEnable APIs and Services\u201d</p> <p>Enable the \u201cGmail API\u201d and \u201cAdmin SDK API\u201d</p>"},{"location":"import-emails/#create-a-service-account","title":"Create a Service Account","text":"<p>Click on \u201cAPIs &amp; Services\u201d, then \u201cCreate credentials\u201d, and select \u201cService account\u201d</p> <p></p> <p>After creating it, click on the service account.</p> <p></p> <p>Select the \u201cKeys\u201d tab, click on \u201cAdd key\u201d / \u201cCreate new key\u201d. The key type shall be \u201cJSON\u201d, then save the json file.</p> <p></p>"},{"location":"import-emails/#grant-domain-wide-delegation","title":"Grant domain wide delegation","text":"<p>We are going to impersonate users. To do that go Google Admin Console</p> <p>Click on \u201cSecurity\u201d, then \u201cAccess and data control\u201d and \u201cAPI Controls\u201d.</p> <p>Then select \u201cManage Domain Wide Delegation\u201d</p> <p></p> <p>Add the Service Account Client ID and authorize the following scopes:</p> <pre><code>https://www.googleapis.com/auth/gmail.readonly\nhttps://www.googleapis.com/auth/admin.directory.user.readonly\n</code></pre> <p></p>"},{"location":"import-emails/#download-all-emails","title":"Download all emails","text":"<p>Use your Google Workspace admin email (eg. admin@example.com) with the json credentials file you created above:</p> <pre><code>download-emails-google-workspace.py --admin admin@example.com --credentials import-emails-d25d9743f508.json\n</code></pre> <p>The script downloads emails to \u201cemails/user@example.com\u201d directory.</p> <p>Then all you need to do is to import them:</p> <pre><code>chown -R piler:piler .\npilerimport -dir emails -remove\n</code></pre>"},{"location":"import-emails/#import-from-microsoft-365","title":"Import from Microsoft 365","text":""},{"location":"import-emails/#create-a-new-application-with-a-secret-in-azure-portal","title":"Create a new application with a secret in Azure portal","text":"<p>Grant the following application type permissions:</p> <ul> <li>Mail.Read</li> <li>User.ReadBasic.All</li> </ul> <p></p> <p>If everything is set properly, you see a similar output for the decoded access token. Notice the \u201croles\u201d section.</p> <pre><code>{\n    \"aud\": \"https://graph.microsoft.com\",\n    \"iss\": \"https://sts.windows.net/fe3b7b62-7d1a-4bcc-a513-e3b0798e601f/\",\n    \"iat\": 1739172947,\n    \"nbf\": 1739172947,\n    \"exp\": 1739176847,\n    \"aio\": \"k2RgYGjT0svi6ArYtthhkX+BhEkbAA==\",\n    \"app_displayname\": \"imap-import\",\n    \"appid\": \"4bc3a597-1602-4d3f-b07e-264374805380\",\n    \"appidacr\": \"1\",\n    \"idp\": \"https://sts.windows.net/fe3b7b62-7d1a-4bcc-a513-e3b0798e601f/\",\n    \"idtyp\": \"app\",\n    \"oid\": \"456bad53-c1db-4ab2-b149-5c95e47c556c\",\n    \"rh\": \"1.AVIAYns7_hp9zEulE-OweY5gHwMAAAAAAAAAwAAAAAAAAAC6AABSAA.\",\n    \"roles\": [\n        \"User.ReadBasic.All\",\n        \"Mail.Read\"\n    ],\n    \"sub\": \"456bad53-c1db-4ab2-b149-5c95e47c556c\",\n    \"tenant_region_scope\": \"NA\",\n    \"tid\": \"fe3b7b62-7d1a-4bcc-a513-e3b0798e601f\",\n    \"uti\": \"5hddMVdLBEiufY9lQN7YAA\",\n    \"ver\": \"1.0\",\n    \"wids\": [\n        \"0997a1d0-0d1d-4acb-b408-d5ca73121e90\"\n    ],\n    \"xms_idrel\": \"7 10\",\n    \"xms_tcdt\": 1669093587\n}\n</code></pre>"},{"location":"import-emails/#install-the-msal-python3-package","title":"Install the msal python3 package","text":"<pre><code>pip install msal\n</code></pre>"},{"location":"import-emails/#create-configpy","title":"Create config.py","text":"<p>Create config.py, and set the values for client_id, client_secret and tenant_id. Feel free to customise the list of SKIP_FOLDERS. These are IMAP folders that won\u2019t be processed.</p> <p>config.py:</p> <pre><code>DEBUG = False\nSKIP_FOLDERS = ['Deleted Items', 'Drafts', 'Junk Email']\nclient_id = \"..........\"\nclient_secret = \"......\"\ntenant_id = \".......\"\n</code></pre>"},{"location":"import-emails/#usage","title":"Usage","text":"<p>You can download emails from a single mailbox</p> <p>download-emails-o365.py --email user@example.com</p> <p>Or you can download all users\u2019 emails by omitting the \u2013-email argument.</p> <p>The tool creates a directory called \u2018email\u2019 in the current directory. Each mailbox gets its own directory, eg. 8f7cd945-c816-491b-8c8c-577bd664189a</p> <p>The tool preserves the IMAP folder structure, eg.</p> <pre><code>ls -la emails/8f7cd945-c816-491b-8c8c-577bd664189a\n\ntotal 12\ndrwxr-xr-x 2 piler piler 4096 May 30 09:29  Inbox/\ndrwxr-xr-x 3 piler piler 4096 May 30 09:29  folder2/\ndrwxr-xr-x 2 piler piler 4096 May 30 09:29 'test folder 1'/\n</code></pre> <p>When you have downloaded all emails, run pilerimport to import them. The command below processes all emails in the \u201cemails\u201d directory, and removes the processed emails:</p> <pre><code>pilerimport -dir emails -remove\n</code></pre>"},{"location":"import-emails/#import-pst-files","title":"Import PST files","text":"<p>PST files are not supported directly. First you need to extract the individual emails as RFC-2822 formatted eml files, and then pilerimport can process them. Probably it's best done on a Windows computer.</p>"},{"location":"misc/","title":"Misc topics","text":"<p>This documentation applies to Piler enterprise edition 2.1.0</p> <p>Revision #1</p> <p>Publication date: 2025-DEC-07</p>"},{"location":"misc/#consolidating-several-anti-spam-message-headers-on-the-smtp-gateway","title":"Consolidating Several Anti Spam Message Headers On The Smtp Gateway","text":"<p>A dedicated SMTP gateway is optional in front of the archive, however it may provide huge benefits using one. For example it may shield your archive\u2019s smtp port from the outside world, or it may help you unify the various antispam message headers. Scenario</p> <p>You are a service provider, and receive emails from various sources that use different mail headers for recognized spam emails. You already have an SMTP gateway installed using postfix.</p> <p>Host1 sets the following header for spam emails:</p> <pre><code>X-Spam-Flag: YES\n</code></pre> <p>Host2 uses the following header line for spam:</p> <pre><code>X-DSPAM-Result: Spam\n</code></pre> <p>The problem is that piler allows us to set a single spam header only.</p>"},{"location":"misc/#solution","title":"Solution","text":"<p>Let\u2019s configure piler to use the following header line:</p> <pre><code>spam_header_line=X-Piler-Spam-Status: Yes\n</code></pre> <p>Then we need postfix either to re-write both X-Spam-Flag and X-DSPAM-Result headers to \u201cX-Piler-Spam-Status: Yes\u201d. Or we keep the spam headers as they are and append our header. We\u2019ll take the second approach.</p> <pre><code>/etc/postfix/main.cf:\n\nheader_checks = pcre:${config_directory}/header_checks\n\n/etc/postfix/header_checks:\n\n/X-Spam-Flag: YES/ prepend X-Piler-Spam-Status: Yes\n/X-DSPAM-Result: Spam/ prepend X-Piler-Spam-Status: Yes\n</code></pre> <p>Finally run</p> <pre><code>postfix reload\n</code></pre> <p>We are good to go! If we get a marked spam either from Host1 or Host2, the SMTP gateway will add our configured X-Piler-Spam-Status: yes header to email. Then we can deal with such spam based on the company policy. eg. either discard it or set a short retention value for it allowing it to be removed in 15 days or so.</p>"},{"location":"new-features-in-2.0.0/","title":"What's new in 2.0.0","text":"<p>This documentation applies to Piler enterprise edition 2.0.0</p> <p>Revision #1</p> <p>Publication date: 2025-SEP-26</p>"},{"location":"new-features-in-2.0.0/#better-ui-performance","title":"Better UI performance","text":"<p>Piler enterprise has a new web app backend. While the 1.x series relies on nginx+PHP, the 2.x series has been rewritten using Go Fiber. Though the look of the UI is the same, the backend offers a much better performance, see the benchmark comparison between fiber and the legacy nginx+php app.</p>"},{"location":"new-features-in-2.0.0/#jwt-token-authentication","title":"JWT token authentication","text":"<p>The REST API uses JWT tokens to authenticate the request.</p>"},{"location":"new-features-in-2.0.0/#support-for-external-authentiation","title":"Support for external authentiation","text":"<p>It's possible to use ED25519 signed JWT tokens to let an external application authenticate users, and grant them a user session in the piler UI.</p>"},{"location":"new-features-in-2.0.0/#audit-records-moved-to-manticore","title":"Audit records moved to Manticore","text":"<p>To offer better searchability, the audit records are written to a manticore table.</p>"},{"location":"new-features-in-2.0.0/#ui-license","title":"UI license","text":"<p>The UI requires a dedicated license file.</p>"},{"location":"new-features-in-2.0.0/#dot-env-style-configuration","title":"Dot-env style configuration","text":"<p>The fiber UI uses an .env file (similar to what node.js apps use) to set various parameters, see the UI config options page what config parameters are available.</p> <p>When having a multi-tenant deployment, the global values can be overridden by setting the per-tenant values in the piler database customer_settings table <code>settings_json</code> column, eg.</p> <pre><code>{\"HEADER_LINK_TITLE\":\"Example archive\", \"HEADER_LINK\":\"https://example.com\"}\n</code></pre>"},{"location":"new-features-in-2.0.0/#simplified-licensing","title":"Simplified licensing","text":"<p>Both the piler daemons and the UI use the same JWT style license file.</p>"},{"location":"new-features-in-2.1.0/","title":"What's new in 2.1.0","text":"<p>This documentation applies to Piler enterprise edition 2.1.0</p> <p>Revision #1</p> <p>Publication date: 2025-DEC-21</p>"},{"location":"new-features-in-2.1.0/#ai-summary","title":"AI summary","text":"<p>Get instant AI-generated summaries of lengthy emails. Understand the key points in seconds without reading walls of text.</p>"},{"location":"new-features-in-2.1.0/#ai-thread-summary","title":"AI thread summary","text":"<p>Understand entire email conversations at a glance. AI analyzes multi-message threads to extract decisions, action items, and key discussion points.</p>"},{"location":"new-features-in-2.1.0/#conversational-search","title":"Conversational Search","text":"<p>Search using natural language instead of complex syntax. Just ask questions like you would to a colleague, and AI translates them into precise search queries.</p>"},{"location":"new-features-in-2.1.0/#scanner","title":"Scanner","text":"<p>The scanner is addon that provides the following features:</p> <ul> <li>ML-powered phishing detection (95-98% accuracy)</li> <li>semantic search</li> <li>automated PII detection</li> <li>email categorization</li> </ul>"},{"location":"new-features-in-2.1.0/#unified-archiving","title":"Unified archiving","text":"<p>Archive all communications beyond emails including MS Teams and Slack messages.</p>"},{"location":"new-features-in-2.1.0/#ediscovery-support","title":"eDiscovery support","text":"<p>Piler's eDiscovery Export feature enables legal and compliance teams to produce court-ready document exports with proper Bates numbering, load files, and organized folder structures.</p>"},{"location":"new-features-in-2.1.0/#siem-support","title":"SIEM support","text":"<p>Piler supports exporting audit logs to external SIEM systems (Splunk, Elastic, Graylog, syslog, etc.) for centralized security monitoring and compliance.</p>"},{"location":"new-features-in-2.1.0/#gdpr-article-17-right-to-erasure","title":"GDPR Article 17 - Right to Erasure","text":"<p>Complete workflow for handling GDPR \"Right to be Forgotten\" requests:</p> <ul> <li>Create erasure requests for data subjects by email address</li> <li>Automated scope assessment (counts affected emails)</li> <li>Legal hold integration (blocks deletion if under litigation hold)</li> <li>Approval workflow with full audit trail</li> <li>Complete deletion execution (not just redaction)</li> <li>Deletion certificates in HTML and PDF formats</li> </ul> <p>See GDPR Article 17 - Right to Erasure for detailed documentation.</p>"},{"location":"overview/","title":"Overview of piler enterprise edition","text":"<p>This documentation applies to Piler enterprise edition 2.0.0</p> <p>Revision #1</p> <p>Publication date: 2025-SEP-21</p>"},{"location":"overview/#piler-architecture-overview","title":"Piler architecture overview","text":"<p>Piler is flexible enough to support several configurations and layouts. Use one of the following layouts matching your environment.</p>"},{"location":"overview/#single-node-layout","title":"Single node layout","text":"<p>Figure 1. Single node installation</p> <p>This is the simplest layout, when you have a single node running piler enterprise. It allows you to start small, and expand later as you grow.</p> <p>Piler receives the emails directly, and archives them. The Piler node also runs the UI. To restore the emails it uses the smtp smarthost to deliver emails to the users\u2019 mailboxes.</p>"},{"location":"overview/#multiple-nodes-layout","title":"Multiple nodes layout","text":"<p>Figure 2. Multiple nodes layout</p> <p>A typical installation contains the following nodes:</p> <p>MX server: receives emails from the mail server, and distributes them among the worker nodes based on your preferences</p> <p>Smarthost: receives emails to be restored from the UI node, and delivers them to mail server</p> <p>Worker nodes: run the Piler daemons and archive the received emails</p> <p>UI node: runs the Piler UI allowing users to view their emails</p>"},{"location":"overview/#archive-components","title":"Archive components","text":"<p>Figure 3. Components on the archive host</p> <p>Piler enterprise features the following components:</p> <ul> <li>piler binaries and daemons: archiving emails</li> <li>web appp: display the UI the REST API</li> <li>mysql: store crucial metadata</li> <li>manticore: search index and audit logs</li> <li>redis/valkey cache: store user sessions and other user data</li> <li>reverse proxy, eg. traefik, nginx: provide https entrypoint</li> </ul>"},{"location":"overview/#platform-requirements","title":"Platform requirements","text":"<p>Supported platforms:</p> <ul> <li>Ubuntu 24.04 LTS (Noble)</li> <li>Centos 10</li> <li>Docker compose (on any Linux ditro)</li> </ul> <p>Note that piler supports both x64 and arm64 platforms.</p>"},{"location":"overview/#hardware-requirements","title":"Hardware requirements","text":"<p>Piler can be installed on physical hardware, virtual machine (VMware, etc), in the cloud (AWS, etc) or in a Docker container. Piler requires:</p> <ul> <li>2+ GB memory</li> <li>2+ (v)CPU</li> <li>200+ GB disk space</li> </ul> <p>Note that piler stores data in /var/piler/store and /var/piler/astore directories. Expect to have several millions of files in various size ranging from few kB to several MB.</p> <p>See the email archive sizing calculator for more</p> <p>Piler also supports S3 compatible object stores, see section S3 object store for more details.</p>"},{"location":"permissions/","title":"Permission profiles","text":"<p>This documentation applies to Piler enterprise edition 2.0.0</p> <p>Revision #1</p> <p>Publication date: 2025-SEP-23</p> <p>The piler UI allows you to restrict user capabilities using a grading system.</p> Value Permission 0 None 1 View 2 Headers 4 PDF 8 Journal 16 Download 32 Exports 64 Restore 127 All <p>0 means no permissions. The user my login, but has no permission to do anything. 127 is the default permission, that allows the user to do any operation on his own emails.</p> <p>You may combine the values, eg. 1+2=3 allows the user to view the email content and its headers, but nothing else.</p> <p>1+16=17 allows the user to see the email contents, but not the full headers, and he's allowed to download his own emails.</p>"},{"location":"rest-api/","title":"REST API","text":"<p>This documentation applies to Piler enterprise edition 2.1.0+</p> <p>Revision #1</p> <p>Publication date: 2026-JAN-01</p> <p>Piler enterprise support a comprehensive OpenAPI 3.0 with interactive Swagger UI.</p> <p>The full OpenAPI 3.0 spec, and the interactive docs is available at <code>/api/docs</code>, see the demo site as an example.</p>"},{"location":"roles/","title":"User roles","text":"<p>This documentation applies to Piler enterprise edition 2.0.0</p> <p>Revision #1</p> <p>Publication date: 2025-SEP-23</p> <p>The piler UI supports several user roles. The users' capabilities are influenced by their roles.</p> Id Roles 0 Regular user 1 Administrator 2 Auditor 3 unused 4 Data officer 5 Restricted auditor"},{"location":"s3-storage/","title":"Using S3 object store","text":"<p>By default piler stores email files on the local filesystem under /var/piler subdirectories, thus requiring lots of disk space.</p> <p>Piler is able to store files on S3 compatible object stores, eg. Amazon S3, Wasabi, Exoscale, etc. Or you can even set up your own S3 object store with 3rd party software like Minio. Note that you should decide where to store the email files before starting archiving. Piler doesn\u2019t support a mixed mode where some emails are stored locally, and some emails on an S3 object store.</p> <p>When using S3 storage the piler daemon writes all files to /var/piler/s3 directory. Then a piler service processes these files, and upload them to the S3 store.</p> <p>Piler will upload all files for a given tenant to a single bucket only.</p>"},{"location":"s3-storage/#enable-the-s3-storage","title":"Enable the S3 storage","text":"<p>To enable using an S3 store, set the following in /etc/piler/piler.conf:</p> <pre><code>s3_hostname=your-s3-host.domain.com:9000\ns3_region=us-east-1\ns3_access_key=youraccesskey\ns3_secret_key=yoursecretkey\ns3_bucket_prefix=\ns3_dir=/var/piler/s3\ns3_use_subdirs=1\ns3_threads=10\ns3_secure=1\n</code></pre> <p>s3_hostname should be the S3 hostname and port. Eg. Minio uses port 9000. For Wasabi, it might be s3.us-west-1.wasabisys.com.</p> <p>Set <code>s3_secure=0</code> if your S3 host does NOT support TLS.</p> <p>By default s3_bucket_prefix is empty. If you need to specify one, then make sure it conforms to domain names.</p> <p>Notes: you must NOT use the dash (-) character, however you may use a trailing dot, eg.</p> <pre><code>s3_bucket_prefix=someprefix.\n</code></pre> <p>S3 settings for oracle cloud:</p> <pre><code>s3_access_key=youraccesskey\ns3_bucket_prefix=\ns3_dir=/var/piler/s3\ns3_hostname=frnsjgsfvvgl.compat.objectstorage.eu-frankfurt-1.oraclecloud.com\ns3_region=eu-frankfurt-1\ns3_secret_key=yoursecretkey\ns3_secure=1\ns3_threads=10\ns3_use_subdirs=1\n</code></pre> <p>S3 settings for Cloudflare bucket using EU jurisdiction:</p> <pre><code>s3_access_key=xxxxxxxxxxxxxxxxxx\ns3_bucket_prefix=\ns3_dir=/var/piler/s3\ns3_hostname=zzzzzzzzzzzzzzzzz.eu.r2.cloudflarestorage.com\ns3_region=auto\ns3_secret_key=yyyyyyyyyyyyyyyyyyyyyyyyyyyyy\ns3_secure=1\ns3_threads=10\ns3_use_subdirs=1\n</code></pre> <p>S3 settings for Backblaze bucket using EU-central:</p> <p>(Note: Backblaze doesn't accept dot (.) in the bucket name!)</p> <pre><code>s3_access_key=xxxxxxxxxxxxxxxxxx\ns3_bucket_prefix=\ns3_dir=/var/piler/s3\ns3_hostname=s3.eu-central-003.backblazeb2.com\ns3_region=us-east-1\ns3_secret_key=yyyyyyyyyyyyyyyyyyyyyyyyyyyyy\ns3_secure=1\ns3_threads=10\ns3_use_subdirs=1\n</code></pre> <p>S3 settings for Hetzner object store at fsn1 location:</p> <pre><code>s3_access_key=xxxxxxxxxxxxxxxxxx\ns3_bucket_prefix=\ns3_dir=/var/piler/s3\ns3_hostname=&lt;your hetzner id&gt;.fsn1.your-objectstorage.com\ns3_region=us-east-1\ns3_secret_key=yyyyyyyyyyyyyyyyyyyyyyyyyyyyy\ns3_secure=1\ns3_threads=10\ns3_use_subdirs=1\n</code></pre>"},{"location":"s3-storage/#update-the-ui-config","title":"Update the UI config","text":"<p>Put the S3 configuration to the UI env file as well. This is for a minio installation on port 9000 with no TLS configured:</p> <pre><code>RETRIEVER_METHOD=s3\nS3_ENDPOINT=minio:9000\nS3_ACCESS_KEY=root\nS3_SECRET_KEY=example156\nS3_USE_SSL=false\nS3_REGION=us-east-1\n</code></pre>"},{"location":"s3-storage/#enable-the-the-piler-s3-service","title":"Enable the the piler-s3 service","text":"<pre><code>cd /etc/systemd/system\nln -sf /usr/libexec/piler/piler-s3.service .\nsystemctl daemon-reload\nsystemctl enable piler-s3\nsystemctl start piler-s3\n</code></pre>"},{"location":"s3-storage/#s3-statistics","title":"S3 statistics","text":"<p>To allow S3 statistics you need to install the minio client:</p> <pre><code>curl -o /usr/local/bin/mc https://dl.min.io/client/mc/release/linux-amd64/mc\nchmod +x /usr/local/bin/mc\n</code></pre> <p>Then create a config file for minio:</p> <pre><code>su - piler\nmkdir -p /var/piler/.mc/\n</code></pre> <p>Create /var/piler/.mc/config.json. In the below example we used the following parameters (be sure to use your own settings):</p> <pre><code>s3_hostname=https://zzzzzzzzzzzzzzzzz.eu.r2.cloudflarestorage.com\ns3_access_key=aabbaabbaabb\ns3_secret_key=deadbeef0123456789abcdef\n</code></pre> <p>/var/piler/.mc/config.json:</p> <pre><code>{\"version\":\"10\", \"aliases\": {\"minio\": {\"url\":\"https://zzzzzzzzzzzzzzzzz.eu.r2.cloudflarestorage.com\",\"accessKey\":\"aabbaabbaabb\", \"secretKey\": \"deadbeef0123456789abcdef\", \"api\": \"S3v4\", \"path\": \"auto\"}}}\n</code></pre> <p>Then finally add the following to piler's crontab entries:</p> <pre><code>30 * * * * /usr/libexec/piler/s3-bucket-stat.sh minio\n</code></pre> <p>This will update the s3_bucket_stats table in the mysql piler database every hour. The result looks like the following. These details will be displayed at the tenant listing.</p> <pre><code>MariaDB [piler]&gt; select * from s3_bucket_stat;\n+---------+----------+---------+---------------------+\n| bucket  | size     | objects | t                   |\n+---------+----------+---------+---------------------+\n| fictive | 20481360 |    2978 | 2024-02-06 10:30:08 |\n+---------+----------+---------+---------------------+\n1 row in set (0.001 sec)\n</code></pre>"},{"location":"security/","title":"Securing the archive","text":"<p>This documentation applies to Piler enterprise edition 2.0.0</p> <p>Revision #1</p> <p>Publication date: 2025-SEP-23</p>"},{"location":"security/#single-node-layout","title":"Single node layout","text":"<p>The piler node should be accessed on port 443 from the Internet. Port 25 should be limited to your mail servers, also see the SMTP ACL feature below.</p>"},{"location":"security/#multiple-nodes-layout","title":"Multiple nodes layout","text":"<p>UI node ports accessibility:</p> <ul> <li>tcp/443: from the Internet</li> <li>tcp/3306: from the worker nodes</li> </ul> <p>The worker nodes ports accessibility:</p> <ul> <li>tcp/25: only the MX server</li> <li>tcp/80,443: only the UI node</li> <li>tcp/9312: only the UI node</li> </ul> <p>MX server ports accessibility:</p> <ul> <li>tcp/25: only from your mail servers</li> </ul> <p>It's also possible to use an internal network where the worker nodes' ports and the UI node mysql port are available.</p>"},{"location":"security/#starttls-support","title":"STARTTLS support","text":"<p>By default the installer creates a key and a self-signed certificate (/etc/piler/piler.pem) to support STARTTLS providing encrypted message transfer between the smtp client and the Piler smtp server. You are free to fix piler.pem to use your signed CA.</p>"},{"location":"security/#smtp-acl-lists","title":"SMTP ACL lists","text":"<p>Piler supports an smtp acl list similar to postscreen. See https://mailpiler.com/blog/smtp-acl-list for more.</p>"},{"location":"security/#antivirus-and-antispam-support","title":"Antivirus and antispam support","text":"<p>Piler expects clean emails only. Spam and other malware occupy valuable disk space and other resources on the piler host, not to mention that it might pose other problems. So you should do the heavy lifting of scanning and filtering of any spam and malware on your MX servers.</p> <p>However, Piler is able to use the result of any antispam application, provided that it sets a specific email header to mark spam emails. If you used SpamAssassin, then you may use the following setting in /var/piler/.env, then piler can recognize when it receives a spam:</p> <pre><code>SPAM_HEADER_LINE=X-Spam-Flag: YES\n</code></pre> <p>If piler recognizes a spam, then you may set an exlusion rule to discard it (preventing from getting to the archive) or archive it for a shorter time, eg. 30 days or so.</p> <p>Note that piler supports a single spam header line, ie. you cannot specify the anti-spam headers of several anti-spam products. However, by using an SMTP it\u2019s possible to rewrite several kind of antispam headers to a unified value. See consolidating several anti spam message headers on the smtp gateway for more.</p>"},{"location":"setup/","title":"Installing piler enterprise edition","text":"<p>This documentation applies to Piler enterprise edition 2.1.0+</p> <p>Revision #3</p> <p>Publication date: 2026-FEB-03</p>"},{"location":"setup/#installing-on-a-single-node-using-docker-compose","title":"Installing on a single node using docker compose","text":"<p>There's a docker compose stack that deploys all the necessary components. Follow the instructions in the README.</p>"},{"location":"setup/#installing-on-a-single-linux-node","title":"Installing on a single Linux node","text":"<p>Download the installer script, customise the following variables:</p> <ul> <li>PILER_HOSTNAME</li> <li>MYSQL_ROOT_PASSWORD</li> <li>MYSQL_PILER_PASSWORD</li> <li>ARCH (either \"amd64\" or \"arm64\")</li> </ul> <p>Execute the installer</p> <pre><code>curl -o install.sh https://download.mailpiler.com/install.sh\nchmod +x install.sh\nsudo ./install.sh\n</code></pre> <p>Copy the license file to /etc/piler/license.jwt, then reboot the host, and verify that all services come up properly.</p>"},{"location":"setup/#centosredhatoracle-linux-specific-notes","title":"Centos/Redhat/Oracle Linux specific notes","text":"<p>SELinux needs to be disabled.</p>"},{"location":"setup/#installing-on-multiple-linux-nodes","title":"Installing on multiple Linux nodes","text":"<p>In this setup you'll have 1 frontend node and 2 worker nodes. It's recommended to have an MX server that receives emails to be archived, and distributes them among the worker nodes.</p> <p>The frontend node runs only the UI (it also needs mysql, manticore and redis). The worker nodes run all components. Each worker node shall have its own unique server id (eg. 00, 01, 02, ...) that comes from the license file.</p> <p>The worker nodes hostnames are worker0.example.com and worker1.example.com</p>"},{"location":"setup/#installing-the-worker-nodes","title":"Installing the worker nodes","text":"<p>Run install.sh just as shown above. Add these extra settings to /var/piler/.env:</p> <pre><code>MULTINODES=true\nNODE_TYPE=worker\nJWT_SECRET=fi5w6x5sYPiY6llG8NxE2uMfFPlGxgCxHIjKh33iYQW4am75KZPgL0D03XiJOUfGFkOmlrM\n</code></pre> <p>The JWT secret shall be 40+ random characters. All nodes shall use the same JWT secret.</p>"},{"location":"setup/#installing-the-frontend-node","title":"Installing the frontend node","text":"<p>Run install.sh just as shown above. Add these extra settings to /var/piler/.env:</p> <pre><code>MULTINODES=true\nWORKERS=http://worker0.example.com:3000,http://worker1.example.com:3000\nJWT_SECRET=fi5w6x5sYPiY6llG8NxE2uMfFPlGxgCxHIjKh33iYQW4am75KZPgL0D03XiJOUfGFkOmlrM\n</code></pre> <p>Notice that the JWT secret is the same as on the worker nodes.</p> <p>Stop and disable the following services:</p> <ul> <li>piler</li> <li>piler-smtp</li> <li>scanner</li> <li>tika</li> </ul> <pre><code>systemctl stop piler\nsystemctl disable piler\n....\n</code></pre>"},{"location":"setup/#installing-the-mx-server","title":"Installing the MX server","text":"<p>You may use postfix, etc. as the MX server. See the examples repo for a working setup.</p>"},{"location":"setup/#security-considerations","title":"Security considerations","text":"<ul> <li>the worker nodes need to access mysql on the frontend node</li> <li>the frontend node needs to access port 9312 on the worker nodes</li> <li>the UI port (3000) of the worker nodes shall be accessed only from the frontend node</li> <li>the SMTP port (25) of the worker nodes shall be accessed only from the MX server</li> <li>you need a reverse proxy like traefik or nginx on the frontend node to provide https access</li> </ul>"},{"location":"siem/","title":"SIEM support","text":"<p>This documentation applies to Piler enterprise edition 2.1.0</p> <p>Revision #1</p> <p>Publication date: 2025-DEC-23</p> <p>Piler supports exporting audit logs to external SIEM systems (Splunk, Elastic, Graylog, etc.) for centralized security monitoring and compliance.</p> <p>Add the appropriate configuration to /var/piler/.env file</p>"},{"location":"siem/#syslog","title":"Syslog","text":"<pre><code>SIEM_EXPORT_ENABLED=true\nSIEM_SYSLOG_HOST=syslog.example.com\nSIEM_SYSLOG_PORT=514\nSIEM_SYSLOG_PROTOCOL=tcp\nSIEM_EXPORT_FORMAT=syslog\n</code></pre>"},{"location":"siem/#splunk","title":"Splunk","text":"<pre><code>SIEM_EXPORT_ENABLED=true\nSIEM_OUTPUT=http\nSIEM_EXPORT_FORMAT=splunk\nSIEM_HTTP_URL=https://inputs.&lt;splunk instance&gt;.splunkcloud.com:8088/services/collector/event\nSIEM_HTTP_TOKEN=&lt;your token&gt;\nSIEM_HTTP_TLS_SKIP_VERIFY=true\n</code></pre>"},{"location":"siem/#sumo-logic","title":"Sumo Logic","text":"<pre><code>SIEM_EXPORT_ENABLED=true\nSIEM_OUTPUT=http\nSIEM_EXPORT_FORMAT=sumo\nSIEM_HTTP_URL=https://collectors.de.sumologic.com/receiver/v1/http/&lt;your key&gt;\nSIEM_HTTP_SOURCE_CATEGORY=siem/piler/audit\n</code></pre>"},{"location":"tuning/","title":"Tuning the archive","text":""},{"location":"tuning/#mysql","title":"Mysql","text":"<p>By default the installer sets modest buffer sizes. If you have +8 GB memory, try these settings:</p> <pre><code>[mysqld]\ninnodb_buffer_pool_size = 2.5G\ninnodb_buffer_pool_instances = 4\ninnodb_log_file_size = 512M\ninnodb_log_buffer_size = 128M\ninnodb_flush_log_at_trx_commit = 1\ninnodb_flush_neighbors = 0\ninnodb_file_per_table = 1\ninnodb_io_capacity = 800\ninnodb_io_capacity_max = 1600\ninnodb_read_io_threads = 4\ninnodb_write_io_threads = 4\n\nthread_handling = pool-of-threads\n\nmax_connections = 250\ntable_open_cache = 4000\nopen_files_limit = 65535\nskip_name_resolve = 1\n\ntmp_table_size = 128M\nmax_heap_table_size = 128M\naria_pagecache_buffer_size = 128M\n\nquery_cache_type = 0\nquery_cache_size = 0\nperformance_schema = OFF\n</code></pre> <p>Systemd overrides (/etc/systemd/system/mariadb.service.d/override.conf)</p> <pre><code>[Service]\nLimitNOFILE=65535\n</code></pre>"},{"location":"tuning/#linux-sysctl-tunings","title":"Linux sysctl tunings","text":"<pre><code># MariaDB + general DB workload tuning\nvm.swappiness = 1\nvm.dirty_background_ratio = 5\nvm.dirty_ratio = 15\nfs.file-max = 2097152\n\n# Networking\nnet.core.somaxconn = 65535\nnet.ipv4.tcp_fin_timeout = 10\nnet.ipv4.tcp_tw_reuse = 1\nnet.ipv4.tcp_keepalive_time = 300\nnet.ipv4.tcp_keepalive_intvl = 60\nnet.ipv4.tcp_keepalive_probes = 9\n</code></pre>"},{"location":"tuning/#manticore","title":"Manticore","text":"<p>Try these settings if you have +8 GB memory:</p> <pre><code>searchd {\n    ...\n    rt_mem_limit = 2G\n    workers = threads\n    dist_threads = 4\n    max_children = 30\n}\n</code></pre>"},{"location":"tuning/#piler","title":"Piler","text":"<p>The number of worker processes should be the number of cpu cores + 1, eg. for 2 CPUs: 3</p> <p>The piler-smtp daemon buffers the email to memory. The <code>max_message_size</code> variable determines the max message size that piler-smtp accepts. The <code>max_smtp_memory</code> variable caps the max allocatable memory that piler-smtp may claim. Be sure to set these to match your needs in /etc/piler/piler.conf:</p> <pre><code>max_message_size=50000000\nmax_smtp_memory=500000000\n# having 2 cpus\nnumber_of_worker_processes=3\n\n</code></pre>"},{"location":"upgrade/","title":"Upgrading","text":"<p>This documentation applies to Piler enterprise edition 2.1.0</p> <p>Revision #2</p> <p>Publication date: 2025-NOV-23</p> <p>The 2.x version ships a brand new web app that is not compatible with the old one, has a different configuration mechanism, and has a few prerequisites</p>"},{"location":"upgrade/#prerequisites","title":"Prerequisites","text":"<ul> <li>real time index</li> <li>dynamic indexes when using a multi-tenant deployment</li> </ul>"},{"location":"upgrade/#upgrade-steps","title":"Upgrade steps","text":""},{"location":"upgrade/#fix-permissions","title":"Fix permissions","text":"<pre><code>chmod 750 /var/piler/store/\nchmod 750 /var/piler/astore/\n</code></pre>"},{"location":"upgrade/#run-the-migrations","title":"Run the migrations","text":"<p>Run mysql migrations on each piler related mysql database:</p> <pre><code>for i in /usr/share/piler/migrations/sql/*.sql; do\n   mariadb --defaults-file=/etc/piler/.my.cnf piler &lt; $i\ndone\n</code></pre> <p>Run manticore migrations for each tenant: In case of a multi-tenant deployment, be sure to use the tenant id</p> <pre><code>for i in /usr/share/piler/migrations/manticore/*.sql; do\n   sed 's/TENANTID/piler/g' \"$i\" | mariadb -h0 -P9306\ndone\n</code></pre> <p>For a multi-tenant deployment, run the mysql migrations for all piler databases, also run the manticore migrations for all tenant ids as well, and replace \"piler\" in the sed command with the tenant id, eg.</p> <pre><code>sed 's/TENANTID/example001/g' ....\n</code></pre>"},{"location":"upgrade/#update-the-passwords","title":"Update the passwords","text":"<p>Piler uses the bcrypt password hashing algorithm, so the passwords in the local database must be fixed.</p> <p>The below statement updates the built-in admin user's password to pilerrocks</p> <pre><code>mariadb --defaults-file=/etc/piler/.my.cnf piler &lt;&lt;&lt; 'update user set password=\"$2y$10$dEzUkJcI824suvEp4p.87u5IT7JitTzpMiMkBtOo7/RZvCYO5b8tC\" where uid=1'\n</code></pre>"},{"location":"user-guide/","title":"End user guide to piler enterprise edition","text":"<p>This documentation applies to Piler enterprise edition 2.0.0</p> <p>Revision #1</p> <p>Publication date: 2025-SEP-26</p>"},{"location":"user-guide/#overview-of-how-piler-works","title":"Overview of how Piler works","text":"<p>Piler is a secure email archive that keeps your messages in a central repository. Piler archives every email it receives whether it be an incoming, outgoing or even an internal email.</p> <p>An important part of the archiving process is called indexing. It allows you to find the archived emails later based on search terms. Piler provides a web based UI that can be accessed using a web browser, eg. Firefox, Chrome, etc.</p> <p>The message indexing is close to real time. Messages appear in the search results within seconds.</p> <p>The archived messages are encrypted in a tamper-proof manner. When you click on a message you should see a green tick sign that means that the message retrieved from the archive is the same that was actually archived. Otherwise you may see a red failure sign.</p> <p>The UI has a built-in access control to prevent a user from accessing others' messages. However, users with an auditor role can see every archived email.</p> <p>The UI also creates an audit event each time a user performs an action, eg. enters a search query, downloads or restores a message, etc. Only auditors and administrators may search in the audit logs.</p>"},{"location":"user-guide/#login","title":"Login","text":"<p>Go to the archive URL, usually it\u2019s https://archive.example.com/</p> <p>The archive is usually configured to allow you to use your email address, and your email password as login credentials. In case of an issue, ask your IT for help. In some environments single sign-on (SSO) is set. In that case you don't type your credentials to the piler UI. When in doubt, ask your system administrators.</p> <p></p>"},{"location":"user-guide/#settings","title":"Settings","text":"<p>After logging in you may view and edit your settings, eg. page length, date format and timezone. To get to the settings menu, click on gear icon at the top right corner.</p> <p>You may turn on two-factor authentication as well. If you do so, be sure to write down the backup codes.</p> <p></p>"},{"location":"user-guide/#search-for-emails","title":"Search for emails","text":"<p>When you enter the archive the GUI presents you the last 20 archived messages. To have more hits per page, go to the \u201cSettings\u201d menu in the upper right corner of the screen.</p> <p>You may use two search interfaces: - Quick search in the long text input field - Advanced (or guided) search</p>"},{"location":"user-guide/#quick-search","title":"Quick search","text":"<p>This is the default and the preferred way of searching. Just enter the search terms, and you get the last 10000 hits in a paged view. If there are more than 10000 hits, then the exact number is shown between parentheses.</p> <p></p> <p>By default the UI applies the search criteria to each field. Eg. if you type mycompany, then it searches for emails having mycompany in the sender email address, in the subject and in the body.</p> <p>Note that piler indexes the textual data of the attachments as well. If the UI is instructed to search in the body, then it also searches in the attachments as well.</p> <p>The search is very intuitive. The UI guesses the format of the words you type. If you type 2018-01-31 (2018.01.31 is also a valid date) then it knows it's a date. If it has a @ sign, then it's an email address. Otherwise it's a subject or body expression.</p> <p>You may enter a finer search query by specifying keywords that precisely identify the type of the given search word.</p> Field Meaning from: Sender address to: Recipient address subject: Subject of the email body: Body of the email, including attachments date1: From (=not before) date (YYYY-MM-DD 00:00:00) date2: To (=not after) date (YYYY-MM-DD 23:59:59) size: Size of the message in bytes attachment: Attachment type. Possible values: word, excel, powerpoint, pdf, compressed, text, odf, image, audio, video, flash, other, any a: Same as attachment:"},{"location":"user-guide/#quick-search-examples","title":"Quick search examples","text":"<p>Emails from Gmail on 2018.02.28: <code>2018-02-28 @gmail.com</code></p> <p>Emails from Gmail before 2018.02.28 23:59:59: <code>date2: 2018-02-28, from: @gmail.com</code></p> <p>Emails from the Matrix (Both sender email addresses and names are indexed): <code>from: Agent Smith</code></p> <p>Emails to someone in Big company after 2018.01.31 00:00:00: <code>date1: 2018-01-31, to: @bigcompany.com</code></p> <p>Emails from jane@aaa.fu OR bill@aaa.fu in 2018 March having any kind of attachment: <code>date1:2018-03-01, date2:2018-03-31, from: jane@aaa.fu OR bill@aaa.fu a:any</code></p> <p>Emails from jane@aaa.fu OR bill@aaa.fu on 2018.02.15 having any kind of attachment: <code>date1:2018-02-15, date2:2018-02-15, from: jane@aaa.fu OR bill@aaa.fu a:any</code></p> <p>Emails on 2018.02.15 that both jane@aaa.fu AND bill@aaa.fu received having any kind of attachment: <code>date1:2018-02-15, date2:2018-02-15, to: jane@aaa.fu bill@aaa.fu a:any</code></p> <p>Viagra spam bigger than 200 kB spoofing my email address as the sender, and having 'order', then 'now' in the body: <code>size:&gt;.2M, subject: viagra OR cialis, body: order &lt;&lt; now, from: my@email.address</code></p> <p>Emails with the following expression: \u2018you have to know\u2019: <code>\u201cyou have to know\u201d</code></p> <p>Price list to jenny@aaa.fu, in pdf attachment(s) smaller than 150 kB: <code>size:&lt;150k, a: pdf, subject: price list, to: jenny@aaa.fu</code></p> <p>Price list to jenny@aaa.fu, in pdf attachment(s) not containing the word \u2018discount\u2019: <code>a: pdf, subject: price list !discount, to: jenny@aaa.fu</code></p> <p>Search using a wildcard for words like permission, permissions, permissing, etc. (Note that you need at least 5 characters before the * symbol): <code>permissi*</code></p> <p>See the following table on some additional search operators:</p> Expression Meaning cat dog Having cat and dog (order is not important) cat OR dog Having cat or dog cat dog \u201ccat dog\u201d Having the expression \u201ccat dog\u201d !dog Not having dog -dog Not having dog \u201ccat dog\u201d ~10 Proximity search cat &lt;&lt; dog Before operator: cat has to precede dog"},{"location":"user-guide/#advanced-or-guided-search","title":"Advanced (or guided) search","text":"<p>The other search interface is the advanced or guided search. It's a popup window you can get by clicking on either the down arrow in the right corner of the search field or the \u201cAdvanced search\u201d button.</p> <p></p> <p>The quick search and the advanced search are equivalent, they give you the same possibilities to define a search query. The advanced search presents you a list of separated input fields giving a better visual view where you can specify the same fields (From, To, dates, etc.) as with the quick search.</p>"},{"location":"user-guide/#recall-previous-search-queries","title":"Recall previous search queries","text":"<p>You may see a down arrow at the right side of the search field. Click on it to see your previous search queries, then select the search term you want to execute again.</p> <p></p>"},{"location":"user-guide/#save-a-search-query","title":"Save a search query","text":"<p>The UI lets you save then load search queries. It's especially handy if you entered a longer search expression or if you have to perform some regular searches. To save the current search query, click on the \u201cSave query\u201d button.</p>"},{"location":"user-guide/#execute-a-saved-search-criteria","title":"Execute a saved search criteria","text":"<p>Click on the \u201cLoad queries\u201d button to recall your saved searches, then click on the appropriate search criteria to execute it. You may remove a saved query by clicking on the red trash bin icon next to the search expression.</p> <p></p>"},{"location":"user-guide/#use-the-search-results","title":"Use the search results","text":"<p>If you have a search result then you can view any of the messages by clicking on it, eg. on the subject line. The message is shown in the preview pane to the right.</p> <p></p> <p>You don\u2019t have to open a message to view its contents. You may simply hover over the subject text in the search results list to see the first few hundred bytes of the message.</p>"},{"location":"user-guide/#tag-messages","title":"Tag messages","text":"<p>You may assign tags to selected emails. To do that perform a query providing the search results you want to tag, then select the appropriate messages you want to tag. Enter the tag name to the input field, and finally click on the tag icon.</p> <p></p> <p>Then you may use \u201ctag:mytag\u201d search query to recall such tagged messages.</p> <p>You may also remove assigned tags. To do that select the messages you want to un-tag. Click on the tag icon, leave the tag field empty, then click on the \"Tag\" button.</p>"},{"location":"user-guide/#add-notes-to-messages","title":"Add notes to messages","text":"<p>You may assign notes to individual messages. To do that select the given message, and type your notes on the preview window in the lower pane, then finally click on the \u201cSave\u201d button.</p> <p></p> <p>Then you may use the <code>note: keywords</code> to recall such a message, eg. <code>note: test note</code></p>"},{"location":"user-guide/#download-messages","title":"Download messages","text":"<p>You may download individual emails by clicking on the Download link or icon in the message preview pane. Click on the PDF icon to download the message as a PDF file.</p> <p>It's also possible to download the search results from the current page as a zip file. To do so, select some or all messages in the upper search results window, then click on the download icon.</p> <p></p>"},{"location":"user-guide/#restore-messages","title":"Restore messages","text":"<p>You may restore a single message by clicking the message, and then on the restore button or link in the preview pane. The message is restored to your mailbox.</p> <p>Just as with the download feature, you may also restore several messages at a time. Select the messages you want to restore, then click on the right arrow icon on the top left icon bar.</p> <p></p>"},{"location":"user-guide/#exporting-messages-from-the-ui","title":"Exporting messages from the UI","text":"<p>You may download 20-100 emails from the UI at the same time by selecting them. What if you entered a search query, and it produced 5000 hits, and you need all of them?</p> <p>If the archive administrators enabled the export feature, you may click on the save icon (it looks like a floppy disc) in the top left icon bar to initiate a background process that exports all emails matching the search query.</p> <p>Then click on the \"Exports\" button, and you may download a zip file containing the emails. Be sure to click on the \"Remove\" link after you downloaded the zip file.</p> <p></p>"},{"location":"ediscovery/","title":"eDiscovery Export","text":"<p>Piler's eDiscovery Export feature enables legal and compliance teams to produce court-ready document exports with proper Bates numbering, load files, and organized folder structures.</p>"},{"location":"ediscovery/#documentation","title":"Documentation","text":"<ul> <li>User Guide - Step-by-step guide for legal/compliance teams</li> <li>Configuration Reference - Configuration options and settings</li> <li>Load File Fields - Complete field definitions for CSV/DAT files</li> <li>Example Workflows - Common eDiscovery scenarios and best practices</li> </ul>"},{"location":"ediscovery/#quick-start","title":"Quick Start","text":"<ol> <li>Search - Use the search interface to find relevant emails</li> <li>Select - Check the emails you want to include in the export</li> <li>Export - Click the briefcase icon and configure Bates numbering</li> <li>Download - Monitor progress and download the completed ZIP file</li> </ol>"},{"location":"ediscovery/#key-features","title":"Key Features","text":"<ul> <li>Bates Numbering - Automatic sequential numbering with customizable prefixes</li> <li>Load Files - Industry-standard CSV and Concordance DAT formats</li> <li>Native Files - Original EML files with full metadata preserved</li> <li>Text Extraction - Plain text versions for review platforms</li> <li>Attachment Handling - Separate extraction with parent-child relationships</li> <li>Custodian Organization - Optional folder structure by sender/recipient</li> </ul>"},{"location":"ediscovery/#requirements","title":"Requirements","text":"<ul> <li>Role: Auditor (role_id = 2) access required</li> <li>License: eDiscovery feature must be enabled in license</li> </ul>"},{"location":"ediscovery/configuration/","title":"eDiscovery Configuration Reference","text":"<p>This document covers all configuration options for the eDiscovery Export feature.</p>"},{"location":"ediscovery/configuration/#environment-variables","title":"Environment Variables","text":""},{"location":"ediscovery/configuration/#export-directory","title":"Export Directory","text":"<p>eDiscovery exports use the standard Piler export directory:</p> <pre><code># Base directory for all exports (default: /var/piler/export)\nDIR_EXPORT=/var/piler/export\n</code></pre> <p>eDiscovery exports are stored in a subdirectory structure:</p> <pre><code>{DIR_EXPORT}/\n\u2514\u2500\u2500 {tenant_id}/\n    \u2514\u2500\u2500 ediscovery/\n        \u2514\u2500\u2500 {job_id}/\n            \u251c\u2500\u2500 loadfile.csv\n            \u251c\u2500\u2500 loadfile.dat\n            \u251c\u2500\u2500 NATIVES/\n            \u251c\u2500\u2500 TEXT/\n            \u2514\u2500\u2500 ATTACHMENTS/\n</code></pre>"},{"location":"ediscovery/configuration/#concurrent-export-limits","title":"Concurrent Export Limits","text":"<pre><code># Maximum concurrent exports across all tenants (default: 3)\nEDISCOVERY_MAX_GLOBAL_EXPORTS=3\n\n# Maximum concurrent exports per tenant (default: 1)\nEDISCOVERY_MAX_TENANT_EXPORTS=1\n</code></pre> <p>These limits prevent resource exhaustion during large exports. The global limit ensures the server isn't overwhelmed when multiple tenants run exports simultaneously.</p>"},{"location":"ediscovery/configuration/#worker-threads","title":"Worker Threads","text":"<pre><code># Number of parallel workers for processing emails (default: 4, max: 32)\nEDISCOVERY_WORKERS=4\n</code></pre> <p>Increase for faster exports on high-CPU systems. Decrease if exports cause performance issues for other users.</p>"},{"location":"ediscovery/configuration/#database-tables","title":"Database Tables","text":""},{"location":"ediscovery/configuration/#per-tenant-tables","title":"Per-Tenant Tables","text":"<p>These tables are created in each tenant's database (<code>{tenant_id}.tablename</code>):</p>"},{"location":"ediscovery/configuration/#ediscovery_exports","title":"<code>ediscovery_exports</code>","text":"<p>Stores export job metadata.</p> Column Type Description <code>id</code> BIGINT Auto-increment primary key <code>job_id</code> VARCHAR(64) Unique job identifier (UUID) <code>status</code> VARCHAR(32) pending, running, completed, failed, cancelled <code>bates_prefix</code> VARCHAR(32) Bates number prefix <code>bates_start</code> INT Starting Bates number <code>bates_end</code> INT Ending Bates number (after completion) <code>total_emails</code> INT Total emails to process <code>processed</code> INT Emails processed so far <code>failed</code> INT Emails that failed processing <code>config_json</code> TEXT JSON export configuration <code>output_path</code> VARCHAR(512) Path to output directory <code>output_size</code> BIGINT Total size of export files <code>error_message</code> TEXT Error details if failed <code>created_by</code> VARCHAR(255) Email of user who created export <code>created_at</code> TIMESTAMP Creation timestamp <code>started_at</code> TIMESTAMP Processing start time <code>completed_at</code> TIMESTAMP Completion timestamp"},{"location":"ediscovery/configuration/#ediscovery_bates_sequences","title":"<code>ediscovery_bates_sequences</code>","text":"<p>Tracks Bates number sequences for continuity.</p> Column Type Description <code>id</code> BIGINT Auto-increment primary key <code>prefix</code> VARCHAR(32) Bates prefix (unique) <code>last_number</code> INT Last assigned number <code>updated_at</code> TIMESTAMP Last update timestamp"},{"location":"ediscovery/configuration/#ediscovery_export_items","title":"<code>ediscovery_export_items</code>","text":"<p>Maps individual emails to their Bates numbers.</p> Column Type Description <code>id</code> BIGINT Auto-increment primary key <code>job_id</code> VARCHAR(64) Reference to export job <code>email_id</code> BIGINT Reference to archived email <code>bates_number</code> VARCHAR(64) Assigned Bates number <code>status</code> VARCHAR(32) success, failed, skipped <code>error_message</code> TEXT Error if failed <code>processed_at</code> TIMESTAMP Processing timestamp"},{"location":"ediscovery/configuration/#ediscovery_download_log","title":"<code>ediscovery_download_log</code>","text":"<p>Audit trail for export downloads.</p> Column Type Description <code>id</code> BIGINT Auto-increment primary key <code>job_id</code> VARCHAR(64) Reference to export job <code>downloaded_by</code> VARCHAR(255) User who downloaded <code>downloaded_at</code> TIMESTAMP Download timestamp <code>ip_address</code> VARCHAR(45) Client IP address <code>user_agent</code> TEXT Browser user agent"},{"location":"ediscovery/configuration/#global-table","title":"Global Table","text":"<p>Created in the main <code>piler</code> database:</p>"},{"location":"ediscovery/configuration/#ediscovery_active_exports","title":"<code>ediscovery_active_exports</code>","text":"<p>Tracks currently running exports across all tenants for enforcing global limits.</p> Column Type Description <code>id</code> BIGINT Auto-increment primary key <code>tenant_id</code> VARCHAR(32) Tenant identifier <code>job_id</code> VARCHAR(64) Export job ID <code>started_at</code> TIMESTAMP When export started"},{"location":"ediscovery/configuration/#export-configuration-object","title":"Export Configuration Object","text":"<p>When creating an export, the following configuration is stored as JSON:</p> <pre><code>{\n  \"bates_prefix\": \"ACME\",\n  \"bates_start_number\": 1,\n  \"bates_digits\": 6,\n  \"include_natives\": true,\n  \"include_text\": true,\n  \"include_attachments\": true,\n  \"organize_by_custodian\": false,\n  \"load_file_format\": \"csv\",\n  \"date_format\": \"iso8601\",\n  \"email_ids\": [1001, 1002, 1003],\n  \"workers\": 4\n}\n</code></pre>"},{"location":"ediscovery/configuration/#configuration-fields","title":"Configuration Fields","text":"Field Type Default Description <code>bates_prefix</code> string required Prefix for Bates numbers <code>bates_start_number</code> int 0 (auto) Starting number, 0 = continue from last <code>bates_digits</code> int 6 Number of digits in Bates number <code>include_natives</code> bool true Include original EML files <code>include_text</code> bool false Extract plain text files <code>include_attachments</code> bool false Extract attachments separately <code>organize_by_custodian</code> bool false Create custodian folders <code>load_file_format</code> string \"csv\" \"csv\", \"dat\", or \"both\" <code>date_format</code> string \"iso8601\" \"iso8601\", \"us\", or \"eu\" <code>email_ids</code> []int64 required List of email IDs to export <code>workers</code> int 4 Parallel processing workers (1-32)"},{"location":"ediscovery/configuration/#load-file-formats","title":"Load File Formats","text":""},{"location":"ediscovery/configuration/#csv-format","title":"CSV Format","text":"<ul> <li>Delimiter: Comma (<code>,</code>)</li> <li>Quote character: Double quote (<code>\"</code>)</li> <li>Encoding: UTF-8 with BOM</li> <li>Line endings: CRLF (<code>\\r\\n</code>)</li> <li>Header row: Yes</li> </ul>"},{"location":"ediscovery/configuration/#dat-format-concordance","title":"DAT Format (Concordance)","text":"<ul> <li>Field delimiter: <code>\u00fe</code> (U+00FE, Concordance default)</li> <li>Text qualifier: <code>\u00b6</code> (U+00B6, Concordance default)</li> <li>Newline replacement: <code>\u00ae</code> (U+00AE)</li> <li>Encoding: UTF-8</li> <li>Line endings: CRLF (<code>\\r\\n</code>)</li> <li>Header row: Yes</li> </ul>"},{"location":"ediscovery/configuration/#file-naming-conventions","title":"File Naming Conventions","text":""},{"location":"ediscovery/configuration/#native-files","title":"Native Files","text":"<pre><code>{BATES_PREFIX}_{NUMBER}.eml\nExample: ACME_000001.eml\n</code></pre>"},{"location":"ediscovery/configuration/#text-files","title":"Text Files","text":"<pre><code>{BATES_PREFIX}_{NUMBER}.txt\nExample: ACME_000001.txt\n</code></pre>"},{"location":"ediscovery/configuration/#attachments","title":"Attachments","text":"<pre><code>{BATES_PREFIX}_{NUMBER}_{ATTACHMENT_SEQ}.{ext}\nExample: ACME_000001_001.pdf\n</code></pre>"},{"location":"ediscovery/configuration/#custodian-organization","title":"Custodian Organization","text":"<p>When enabled, files are organized:</p> <pre><code>{CUSTODIAN_EMAIL}/\n\u251c\u2500\u2500 NATIVES/\n\u2502   \u2514\u2500\u2500 ACME_000001.eml\n\u251c\u2500\u2500 TEXT/\n\u2502   \u2514\u2500\u2500 ACME_000001.txt\n\u2514\u2500\u2500 ATTACHMENTS/\n    \u2514\u2500\u2500 ACME_000001_001.pdf\n</code></pre>"},{"location":"ediscovery/configuration/#api-endpoints","title":"API Endpoints","text":""},{"location":"ediscovery/configuration/#auditor-endpoints-require-auditor-role","title":"Auditor Endpoints (require auditor role)","text":"Method Endpoint Description POST <code>/api/v1/ediscovery/export</code> Create new export GET <code>/api/v1/ediscovery/exports</code> List all exports GET <code>/api/v1/ediscovery/exports/:job_id</code> Get export details POST <code>/api/v1/ediscovery/exports/:job_id/cancel</code> Cancel running export DELETE <code>/api/v1/ediscovery/exports/:job_id</code> Delete export GET <code>/api/v1/ediscovery/exports/:job_id/download</code> Download export ZIP GET <code>/api/v1/ediscovery/bates-prefixes</code> Get Bates prefix sequences"},{"location":"ediscovery/configuration/#admin-endpoints-require-admin-role","title":"Admin Endpoints (require admin role)","text":"Method Endpoint Description GET <code>/api/v1/admin/ediscovery/exports</code> List all tenant exports GET <code>/api/v1/admin/ediscovery/bates-prefixes</code> Get all Bates prefixes"},{"location":"ediscovery/configuration/#security-considerations","title":"Security Considerations","text":""},{"location":"ediscovery/configuration/#access-control","title":"Access Control","text":"<ul> <li>Only users with auditor role (role_id = 2) can create exports</li> <li>Users can only see/download their own tenant's exports</li> <li>Download actions are logged with IP and user agent</li> </ul>"},{"location":"ediscovery/configuration/#file-system-security","title":"File System Security","text":"<ul> <li>Export directories should be on encrypted volumes</li> <li>Consider filesystem permissions on the export directory</li> </ul>"},{"location":"ediscovery/configuration/#data-retention","title":"Data Retention","text":"<ul> <li>Exports remain until manually deleted</li> <li>Consider implementing automatic cleanup policies</li> <li>Download logs are retained indefinitely for audit purposes</li> </ul>"},{"location":"ediscovery/configuration/#migration","title":"Migration","text":"<p>Apply the migration to create required tables:</p> <pre><code># Run migration 014_ediscovery_export.sql on each tenant database\nmysql -u piler -p tenant_db &lt; util/migrations/sql/014_ediscovery_export.sql\n\n# Run global migration on piler database\nmysql -u piler -p piler &lt; util/migrations/sql/014_ediscovery_global.sql\n</code></pre>"},{"location":"ediscovery/load-file-fields/","title":"Load File Field Definitions","text":"<p>This document provides detailed definitions for all fields in the eDiscovery load files generated by Piler.</p>"},{"location":"ediscovery/load-file-fields/#field-overview","title":"Field Overview","text":"Field Name Description Example Value DOCID Bates number (primary identifier) <code>ACME_000001</code> BEGBATES Beginning Bates number <code>ACME_000001</code> ENDBATES Ending Bates number <code>ACME_000001</code> BEGATTACH First Bates of attachment range <code>ACME_000001</code> ENDATTACH Last Bates of attachment range <code>ACME_000001_003</code> PARENTID Parent document Bates (for attachments) <code>ACME_000001</code> ATTACHNUM Attachment sequence number <code>001</code> FROM Sender email address <code>john.smith@company.com</code> TO Recipient email addresses <code>jane.doe@company.com; bob@ext.com</code> CC CC recipient addresses <code>legal@company.com</code> BCC BCC recipient addresses <code>archive@company.com</code> SUBJECT Email subject line <code>RE: Contract Review</code> DATESENT Date and time sent <code>2024-03-15T10:30:00Z</code> DATERECEIVED Date and time received <code>2024-03-15T10:30:05Z</code> HASATTACH Whether email has attachments <code>TRUE</code> or <code>FALSE</code> ATTACHCOUNT Number of attachments <code>3</code> ATTACHNAMES Semicolon-separated attachment names <code>contract.pdf; terms.docx</code> ATTACHPATH Path to extracted attachments <code>ATTACHMENTS/ACME_000001_001.pdf</code> NATIVEPATH Path to native EML file <code>NATIVES/ACME_000001.eml</code> TEXTPATH Path to extracted text file <code>TEXT/ACME_000001.txt</code> CUSTODIAN Primary custodian (sender) <code>john.smith@company.com</code> FILETYPE Document type <code>Email</code> or <code>Attachment</code> FILEEXT File extension <code>.eml</code>, <code>.pdf</code>, <code>.docx</code> FILESIZE File size in bytes <code>45678</code> MD5HASH MD5 hash of native file <code>d41d8cd98f00b204e9800998ecf8427e</code> SHA256HASH SHA-256 hash of native file <code>e3b0c44298fc1c149afb...</code> MESSAGEID Email Message-ID header <code>&lt;abc123@mail.company.com&gt;</code> INREPLYTO In-Reply-To header <code>&lt;def456@mail.company.com&gt;</code> REFERENCES References header <code>&lt;ref1@company.com&gt;; &lt;ref2@company.com&gt;</code> CONVERSATIONID Thread/conversation identifier <code>thread_abc123</code> IMPORTANCE Email importance/priority <code>Normal</code>, <code>High</code>, <code>Low</code> SENSITIVITY Sensitivity classification <code>Normal</code>, <code>Personal</code>, <code>Confidential</code> DIRECTION Email direction <code>Inbound</code>, <code>Outbound</code>, <code>Internal</code> VERIFIED Archive integrity verified <code>TRUE</code> or <code>FALSE</code>"},{"location":"ediscovery/load-file-fields/#detailed-field-definitions","title":"Detailed Field Definitions","text":""},{"location":"ediscovery/load-file-fields/#document-identification","title":"Document Identification","text":""},{"location":"ediscovery/load-file-fields/#docid","title":"DOCID","text":"<p>Type: String Format: <code>{PREFIX}_{NUMBER}</code> or <code>{PREFIX}_{NUMBER}_{ATTACH}</code></p> <p>The primary unique identifier for each document in the production. For parent emails, this is the Bates number. For attachments, this includes the attachment sequence.</p> <p>Examples: - Email: <code>ACME_000001</code> - Attachment: <code>ACME_000001_001</code></p>"},{"location":"ediscovery/load-file-fields/#begbates-endbates","title":"BEGBATES / ENDBATES","text":"<p>Type: String Format: Same as DOCID</p> <p>For single-page documents (emails), BEGBATES equals ENDBATES. These fields support multi-page document productions where page ranges are needed.</p>"},{"location":"ediscovery/load-file-fields/#begattach-endattach","title":"BEGATTACH / ENDATTACH","text":"<p>Type: String Format: Bates number</p> <p>Defines the range of attachments for a parent email. BEGATTACH is the parent Bates number; ENDATTACH is the last attachment Bates number.</p> <p>Example: - Email with 3 attachments: BEGATTACH=<code>ACME_000001</code>, ENDATTACH=<code>ACME_000001_003</code> - Email with no attachments: Both fields equal <code>ACME_000001</code></p>"},{"location":"ediscovery/load-file-fields/#parentid","title":"PARENTID","text":"<p>Type: String Format: Bates number or empty</p> <p>For attachments, contains the parent email's Bates number. Empty for parent emails.</p> <p>Examples: - Parent email: (empty) - Attachment: <code>ACME_000001</code></p>"},{"location":"ediscovery/load-file-fields/#attachnum","title":"ATTACHNUM","text":"<p>Type: String Format: Zero-padded number or empty</p> <p>Sequential number for attachments within a parent email.</p> <p>Examples: - Parent email: (empty) - First attachment: <code>001</code> - Second attachment: <code>002</code></p>"},{"location":"ediscovery/load-file-fields/#addressing-fields","title":"Addressing Fields","text":""},{"location":"ediscovery/load-file-fields/#from","title":"FROM","text":"<p>Type: String Format: Email address</p> <p>The sender's email address, extracted from the From header.</p> <p>Example: <code>\"John Smith\" &lt;john.smith@company.com&gt;</code> or <code>john.smith@company.com</code></p>"},{"location":"ediscovery/load-file-fields/#to","title":"TO","text":"<p>Type: String Format: Semicolon-separated email addresses</p> <p>All recipients from the To header.</p> <p>Example: <code>jane.doe@company.com; bob.jones@external.com</code></p>"},{"location":"ediscovery/load-file-fields/#cc","title":"CC","text":"<p>Type: String Format: Semicolon-separated email addresses</p> <p>All CC recipients.</p>"},{"location":"ediscovery/load-file-fields/#bcc","title":"BCC","text":"<p>Type: String Format: Semicolon-separated email addresses</p> <p>BCC recipients (when available from journal/envelope data).</p>"},{"location":"ediscovery/load-file-fields/#date-fields","title":"Date Fields","text":""},{"location":"ediscovery/load-file-fields/#datesent","title":"DATESENT","text":"<p>Type: String Format: Configured date format</p> <p>The date and time the email was sent, from the Date header.</p> <p>Formats: - ISO 8601: <code>2024-03-15T10:30:00Z</code> - US: <code>03/15/2024 10:30:00 AM</code> - EU: <code>15/03/2024 10:30:00</code></p>"},{"location":"ediscovery/load-file-fields/#datereceived","title":"DATERECEIVED","text":"<p>Type: String Format: Configured date format</p> <p>The date and time the email was received/archived.</p>"},{"location":"ediscovery/load-file-fields/#attachment-information","title":"Attachment Information","text":""},{"location":"ediscovery/load-file-fields/#hasattach","title":"HASATTACH","text":"<p>Type: String Values: <code>TRUE</code> or <code>FALSE</code></p> <p>Indicates whether the email has attachments.</p>"},{"location":"ediscovery/load-file-fields/#attachcount","title":"ATTACHCOUNT","text":"<p>Type: Integer Format: Numeric</p> <p>Number of attachments on the email. <code>0</code> for emails without attachments.</p>"},{"location":"ediscovery/load-file-fields/#attachnames","title":"ATTACHNAMES","text":"<p>Type: String Format: Semicolon-separated filenames</p> <p>List of attachment filenames.</p> <p>Example: <code>Q1_Report.pdf; Financial_Summary.xlsx; Notes.docx</code></p>"},{"location":"ediscovery/load-file-fields/#file-paths","title":"File Paths","text":""},{"location":"ediscovery/load-file-fields/#nativepath","title":"NATIVEPATH","text":"<p>Type: String Format: Relative path</p> <p>Path to the native file within the export package.</p> <p>Examples: - Email: <code>NATIVES/ACME_000001.eml</code> - With custodian folders: <code>john.smith@company.com/NATIVES/ACME_000001.eml</code></p>"},{"location":"ediscovery/load-file-fields/#textpath","title":"TEXTPATH","text":"<p>Type: String Format: Relative path</p> <p>Path to the extracted text file. Empty if text extraction was not enabled.</p> <p>Example: <code>TEXT/ACME_000001.txt</code></p>"},{"location":"ediscovery/load-file-fields/#attachpath","title":"ATTACHPATH","text":"<p>Type: String Format: Relative path</p> <p>For attachments, path to the extracted attachment file. Empty for parent emails or if attachment extraction was not enabled.</p> <p>Example: <code>ATTACHMENTS/ACME_000001_001.pdf</code></p>"},{"location":"ediscovery/load-file-fields/#document-properties","title":"Document Properties","text":""},{"location":"ediscovery/load-file-fields/#custodian","title":"CUSTODIAN","text":"<p>Type: String Format: Email address</p> <p>The primary custodian for the document. For emails, this is typically the sender's address.</p>"},{"location":"ediscovery/load-file-fields/#filetype","title":"FILETYPE","text":"<p>Type: String Values: <code>Email</code> or <code>Attachment</code></p> <p>Indicates whether the record is for a parent email or an attachment.</p>"},{"location":"ediscovery/load-file-fields/#fileext","title":"FILEEXT","text":"<p>Type: String Format: Extension with dot</p> <p>The file extension of the native document.</p> <p>Examples: <code>.eml</code>, <code>.pdf</code>, <code>.docx</code>, <code>.xlsx</code></p>"},{"location":"ediscovery/load-file-fields/#filesize","title":"FILESIZE","text":"<p>Type: Integer Format: Bytes</p> <p>Size of the native file in bytes.</p>"},{"location":"ediscovery/load-file-fields/#hash-values","title":"Hash Values","text":""},{"location":"ediscovery/load-file-fields/#md5hash","title":"MD5HASH","text":"<p>Type: String Format: 32-character hexadecimal</p> <p>MD5 hash of the native file for deduplication and integrity verification.</p> <p>Example: <code>d41d8cd98f00b204e9800998ecf8427e</code></p>"},{"location":"ediscovery/load-file-fields/#sha256hash","title":"SHA256HASH","text":"<p>Type: String Format: 64-character hexadecimal</p> <p>SHA-256 hash of the native file for cryptographic integrity verification.</p> <p>Example: <code>e3b0c44298fc1c149afbf4c8996fb92427ae41e4649b934ca495991b7852b855</code></p>"},{"location":"ediscovery/load-file-fields/#email-threading","title":"Email Threading","text":""},{"location":"ediscovery/load-file-fields/#messageid","title":"MESSAGEID","text":"<p>Type: String Format: RFC 2822 Message-ID</p> <p>The unique Message-ID header from the email.</p> <p>Example: <code>&lt;CABx+4AH2M7dKKO-ABC123@mail.gmail.com&gt;</code></p>"},{"location":"ediscovery/load-file-fields/#inreplyto","title":"INREPLYTO","text":"<p>Type: String Format: RFC 2822 Message-ID</p> <p>The Message-ID this email is replying to.</p>"},{"location":"ediscovery/load-file-fields/#references","title":"REFERENCES","text":"<p>Type: String Format: Semicolon-separated Message-IDs</p> <p>Chain of Message-IDs representing the conversation thread.</p>"},{"location":"ediscovery/load-file-fields/#conversationid","title":"CONVERSATIONID","text":"<p>Type: String Format: Thread identifier</p> <p>Internal conversation/thread identifier for grouping related emails.</p>"},{"location":"ediscovery/load-file-fields/#email-metadata","title":"Email Metadata","text":""},{"location":"ediscovery/load-file-fields/#importance","title":"IMPORTANCE","text":"<p>Type: String Values: <code>Normal</code>, <code>High</code>, <code>Low</code></p> <p>Email priority/importance level from headers.</p>"},{"location":"ediscovery/load-file-fields/#sensitivity","title":"SENSITIVITY","text":"<p>Type: String Values: <code>Normal</code>, <code>Personal</code>, <code>Private</code>, <code>Confidential</code></p> <p>Email sensitivity classification from headers.</p>"},{"location":"ediscovery/load-file-fields/#direction","title":"DIRECTION","text":"<p>Type: String Values: <code>Inbound</code>, <code>Outbound</code>, <code>Internal</code></p> <p>Direction of email relative to the organization: - Inbound: External sender to internal recipient - Outbound: Internal sender to external recipient - Internal: Internal sender to internal recipient</p>"},{"location":"ediscovery/load-file-fields/#verified","title":"VERIFIED","text":"<p>Type: String Values: <code>TRUE</code> or <code>FALSE</code></p> <p>Whether the archived email passed integrity verification (hash check).</p>"},{"location":"ediscovery/load-file-fields/#csv-format-example","title":"CSV Format Example","text":"<pre><code>DOCID,BEGBATES,ENDBATES,BEGATTACH,ENDATTACH,PARENTID,ATTACHNUM,FROM,TO,CC,BCC,SUBJECT,DATESENT,DATERECEIVED,HASATTACH,ATTACHCOUNT,ATTACHNAMES,ATTACHPATH,NATIVEPATH,TEXTPATH,CUSTODIAN,FILETYPE,FILEEXT,FILESIZE,MD5HASH,SHA256HASH,MESSAGEID,INREPLYTO,REFERENCES,CONVERSATIONID,IMPORTANCE,SENSITIVITY,DIRECTION,VERIFIED\nACME_000001,ACME_000001,ACME_000001,ACME_000001,ACME_000001_002,,,\"john@company.com\",\"jane@company.com; bob@external.com\",\"legal@company.com\",\"\",\"RE: Contract Review\",\"2024-03-15T10:30:00Z\",\"2024-03-15T10:30:05Z\",TRUE,2,\"contract.pdf; terms.docx\",\"\",\"NATIVES/ACME_000001.eml\",\"TEXT/ACME_000001.txt\",\"john@company.com\",Email,.eml,45678,d41d8cd98f00b204e9800998ecf8427e,e3b0c44298fc1c149afbf4c8996fb924,\"&lt;abc123@mail.company.com&gt;\",\"&lt;def456@mail.company.com&gt;\",\"&lt;ref1@company.com&gt;\",\"thread_123\",Normal,Normal,Outbound,TRUE\nACME_000001_001,ACME_000001_001,ACME_000001_001,,,ACME_000001,001,,,,,\"contract.pdf\",,,,,,,\"ATTACHMENTS/ACME_000001_001.pdf\",,\"john@company.com\",Attachment,.pdf,125000,a1b2c3d4e5f6a1b2c3d4e5f6a1b2c3d4,f1e2d3c4b5a6f1e2d3c4b5a6f1e2d3c4b5a6f1e2d3c4b5a6f1e2d3c4b5a6f1e2,,,,,,,,\n</code></pre>"},{"location":"ediscovery/load-file-fields/#dat-format-example","title":"DAT Format Example","text":"<pre><code>\u00feDOCID\u00fe\u00feBEGBATES\u00fe\u00feENDBATES\u00fe\u00feBEGATTACH\u00fe\u00feENDATTACH\u00fe\u00fePARENTID\u00fe\u00feATTACHNUM\u00fe\u00feFROM\u00fe\u00feTO\u00fe\u00feCC\u00fe\u00feBCC\u00fe\u00feSUBJECT\u00fe\u00feDATESENT\u00fe\u00feDATERECEIVED\u00fe\u00feHASATTACH\u00fe\u00feATTACHCOUNT\u00fe\u00feATTACHNAMES\u00fe\u00feATTACHPATH\u00fe\u00feNATIVEPATH\u00fe\u00feTEXTPATH\u00fe\u00feCUSTODIAN\u00fe\u00feFILETYPE\u00fe\u00feFILEEXT\u00fe\u00feFILESIZE\u00fe\u00feMD5HASH\u00fe\u00feSHA256HASH\u00fe\u00feMESSAGEID\u00fe\u00feINREPLYTO\u00fe\u00feREFERENCES\u00fe\u00feCONVERSATIONID\u00fe\u00feIMPORTANCE\u00fe\u00feSENSITIVITY\u00fe\u00feDIRECTION\u00fe\u00feVERIFIED\u00fe\n\u00feACME_000001\u00fe\u00feACME_000001\u00fe\u00feACME_000001\u00fe\u00feACME_000001\u00fe\u00feACME_000001_002\u00fe\u00fe\u00fe\u00fe\u00fe\u00fejohn@company.com\u00fe\u00fejane@company.com; bob@external.com\u00fe\u00felegal@company.com\u00fe\u00fe\u00fe\u00feRE: Contract Review\u00fe\u00fe2024-03-15T10:30:00Z\u00fe\u00fe2024-03-15T10:30:05Z\u00fe\u00feTRUE\u00fe\u00fe2\u00fe\u00fecontract.pdf; terms.docx\u00fe\u00fe\u00fe\u00feNATIVES/ACME_000001.eml\u00fe\u00feTEXT/ACME_000001.txt\u00fe\u00fejohn@company.com\u00fe\u00feEmail\u00fe\u00fe.eml\u00fe\u00fe45678\u00fe\u00fed41d8cd98f00b204e9800998ecf8427e\u00fe\u00fee3b0c44298fc1c149afbf4c8996fb924\u00fe\u00fe&lt;abc123@mail.company.com&gt;\u00fe\u00fe&lt;def456@mail.company.com&gt;\u00fe\u00fe&lt;ref1@company.com&gt;\u00fe\u00fethread_123\u00fe\u00feNormal\u00fe\u00feNormal\u00fe\u00feOutbound\u00fe\u00feTRUE\u00fe\n</code></pre>"},{"location":"ediscovery/load-file-fields/#import-compatibility","title":"Import Compatibility","text":""},{"location":"ediscovery/load-file-fields/#relativity","title":"Relativity","text":"<p>Map fields as follows: - DOCID \u2192 Control Number - BEGBATES \u2192 Beg Bates - ENDBATES \u2192 End Bates - FROM \u2192 From - TO \u2192 To - SUBJECT \u2192 Subject - DATESENT \u2192 Date Sent - NATIVEPATH \u2192 Native File Path</p>"},{"location":"ediscovery/load-file-fields/#concordance","title":"Concordance","text":"<p>The DAT format is directly compatible with Concordance. Use the standard field mapping.</p>"},{"location":"ediscovery/load-file-fields/#nuix","title":"NUIX","text":"<p>Map fields using NUIX's load file import wizard. SHA256HASH can be used for deduplication.</p>"},{"location":"ediscovery/load-file-fields/#logikcull","title":"Logikcull","text":"<p>Use CSV format with automatic field detection or manual mapping.</p>"},{"location":"ediscovery/load-file-fields/#special-characters","title":"Special Characters","text":""},{"location":"ediscovery/load-file-fields/#csv-handling","title":"CSV Handling","text":"<ul> <li>Commas in values are enclosed in double quotes</li> <li>Double quotes in values are escaped as <code>\"\"</code></li> <li>Newlines in values are preserved within quotes</li> </ul>"},{"location":"ediscovery/load-file-fields/#dat-handling","title":"DAT Handling","text":"<ul> <li>The delimiter <code>\u00fe</code> (thorn) rarely appears in email content</li> <li>Newlines in values are replaced with <code>\u00ae</code></li> <li>The text qualifier <code>\u00b6</code> wraps multiline fields</li> </ul>"},{"location":"ediscovery/user-guide/","title":"eDiscovery Export User Guide","text":"<p>This guide is designed for legal and compliance professionals who need to produce document exports for litigation, regulatory investigations, or internal reviews.</p>"},{"location":"ediscovery/user-guide/#overview","title":"Overview","text":"<p>Piler's eDiscovery Export creates production-ready packages that include: - Bates-numbered documents - Industry-standard load files (CSV/DAT) - Native email files (EML format) - Extracted text files - Separated attachments with parent-child linking</p>"},{"location":"ediscovery/user-guide/#getting-started","title":"Getting Started","text":""},{"location":"ediscovery/user-guide/#prerequisites","title":"Prerequisites","text":"<ul> <li>Auditor role access to Piler</li> <li>Understanding of your matter's Bates numbering requirements</li> <li>Knowledge of your review platform's preferred load file format</li> </ul>"},{"location":"ediscovery/user-guide/#step-1-search-for-relevant-emails","title":"Step 1: Search for Relevant Emails","text":"<ol> <li>Log in to Piler with your auditor account</li> <li>Use the search interface to find emails relevant to your matter</li> <li>Available search criteria:</li> <li>Date ranges</li> <li>Sender/recipient addresses</li> <li>Keywords in subject or body</li> <li>Attachment types</li> <li>Tags and categories</li> </ol> <p>Tip: Save your search queries for reproducibility. This creates an audit trail of your collection methodology.</p>"},{"location":"ediscovery/user-guide/#step-2-select-emails-for-export","title":"Step 2: Select Emails for Export","text":"<ol> <li>Review the search results</li> <li>Select individual emails by clicking the checkbox on each result</li> <li>Or use \"Select All\" to select all visible results</li> <li>The action bar shows the count of selected emails</li> </ol> <p>Note: You can run multiple searches and accumulate selections before creating the export.</p>"},{"location":"ediscovery/user-guide/#step-3-create-the-export","title":"Step 3: Create the Export","text":"<ol> <li>Click the briefcase icon in the action bar</li> <li>The eDiscovery Export dialog opens</li> </ol>"},{"location":"ediscovery/user-guide/#configure-bates-numbering","title":"Configure Bates Numbering","text":"Field Description Example Prefix Unique identifier for this production <code>ACME</code>, <code>SMITH2024</code> Starting Number First number in sequence (leave blank to auto-continue) <code>1</code>, <code>5001</code> <p>The system generates Bates numbers in the format: <code>PREFIX_000001</code></p> <p>Continuing a Production: Click on an existing prefix badge to reuse it. The system automatically continues from the last used number.</p>"},{"location":"ediscovery/user-guide/#select-export-options","title":"Select Export Options","text":"Option Description When to Use Include native EML files Original email in EML format Always recommended for completeness Extract text files Plain text version of each email Required by most review platforms Extract attachments separately Attachments as individual files When attachments need separate review Organize by custodian Folder structure by sender Large multi-custodian matters"},{"location":"ediscovery/user-guide/#choose-load-file-format","title":"Choose Load File Format","text":"Format Description Compatible With CSV Standard comma-separated values Excel, most review tools DAT Concordance delimited format Relativity, Concordance, LAW Both Generates both formats Maximum compatibility"},{"location":"ediscovery/user-guide/#select-date-format","title":"Select Date Format","text":"Format Example Use Case ISO 8601 <code>2024-03-15T10:30:00Z</code> International, technical US <code>03/15/2024 10:30:00 AM</code> US-based matters EU <code>15/03/2024 10:30:00</code> European matters"},{"location":"ediscovery/user-guide/#step-4-start-the-export","title":"Step 4: Start the Export","text":"<ol> <li>Click Start eDiscovery Export</li> <li>The export job is queued and begins processing</li> <li>You'll see a confirmation with the Job ID</li> </ol>"},{"location":"ediscovery/user-guide/#step-5-monitor-progress","title":"Step 5: Monitor Progress","text":"<ol> <li>Click eDiscovery Exports in the secondary action bar</li> <li>The drawer shows all your export jobs</li> <li>Running exports show a progress bar with percentage</li> <li>Auto-refresh updates progress every 3 seconds</li> </ol>"},{"location":"ediscovery/user-guide/#step-6-download-the-export","title":"Step 6: Download the Export","text":"<ol> <li>When status shows completed, click the green Download button</li> <li>A ZIP file downloads containing:    <code>ACME_Production/    \u251c\u2500\u2500 loadfile.csv           # Or loadfile.dat    \u251c\u2500\u2500 NATIVES/    \u2502   \u251c\u2500\u2500 ACME_000001.eml    \u2502   \u251c\u2500\u2500 ACME_000002.eml    \u2502   \u2514\u2500\u2500 ...    \u251c\u2500\u2500 TEXT/    \u2502   \u251c\u2500\u2500 ACME_000001.txt    \u2502   \u251c\u2500\u2500 ACME_000002.txt    \u2502   \u2514\u2500\u2500 ...    \u2514\u2500\u2500 ATTACHMENTS/           # If enabled        \u251c\u2500\u2500 ACME_000001_001.pdf        \u251c\u2500\u2500 ACME_000001_002.docx        \u2514\u2500\u2500 ...</code></li> </ol>"},{"location":"ediscovery/user-guide/#managing-exports","title":"Managing Exports","text":""},{"location":"ediscovery/user-guide/#viewing-export-history","title":"Viewing Export History","text":"<p>The eDiscovery Exports drawer shows: - All exports with status (pending, running, completed, failed, cancelled) - Bates prefix and range used - Creation date and creator - File size when completed</p>"},{"location":"ediscovery/user-guide/#cancelling-an-export","title":"Cancelling an Export","text":"<ol> <li>Find the running export in the list</li> <li>Click the yellow Cancel button</li> <li>Confirm the cancellation</li> <li>Partially processed files are removed</li> </ol>"},{"location":"ediscovery/user-guide/#deleting-an-export","title":"Deleting an Export","text":"<ol> <li>Find the completed/failed/cancelled export</li> <li>Click the red Delete button</li> <li>Confirm deletion</li> <li>All export files are permanently removed</li> </ol> <p>Warning: Deletion is permanent. Download the export before deleting if you need to preserve it.</p>"},{"location":"ediscovery/user-guide/#tracking-bates-numbers","title":"Tracking Bates Numbers","text":"<p>The \"Bates Number Sequences\" section shows: - All prefixes used in your tenant - The last number assigned for each prefix - Use this to plan continuation productions</p>"},{"location":"ediscovery/user-guide/#best-practices","title":"Best Practices","text":""},{"location":"ediscovery/user-guide/#naming-conventions","title":"Naming Conventions","text":"<ul> <li>Use meaningful prefixes: <code>SMITHV_JONES_001</code> not just <code>EXPORT1</code></li> <li>Include matter identifiers in prefix</li> <li>Document your naming convention in your protocol</li> </ul>"},{"location":"ediscovery/user-guide/#quality-control","title":"Quality Control","text":"<ol> <li>Verify counts: Compare export email count to search results</li> <li>Spot check: Open several native files to verify content</li> <li>Load file review: Import into Excel to verify field population</li> <li>Hash verification: Use the SHA256 hashes in load file for integrity</li> </ol>"},{"location":"ediscovery/user-guide/#documentation","title":"Documentation","text":"<p>For defensible collections: 1. Save your search queries with descriptive names 2. Document date ranges and search terms used 3. Record the Bates range for each production 4. Note any emails excluded and why</p>"},{"location":"ediscovery/user-guide/#large-productions","title":"Large Productions","text":"<p>For exports over 10,000 emails: - Consider breaking into multiple batches by date or custodian - Monitor server resources during export - Schedule during off-peak hours if possible</p>"},{"location":"ediscovery/user-guide/#troubleshooting","title":"Troubleshooting","text":""},{"location":"ediscovery/user-guide/#export-stuck-at-0","title":"Export Stuck at 0%","text":"<ul> <li>Check server connectivity</li> <li>Verify storage space is available</li> <li>Contact administrator if persists</li> </ul>"},{"location":"ediscovery/user-guide/#missing-attachments","title":"Missing Attachments","text":"<ul> <li>Ensure \"Extract attachments separately\" was enabled</li> <li>Some attachments may be embedded (inline images)</li> <li>Check the <code>ATTACHPATH</code> field in load file</li> </ul>"},{"location":"ediscovery/user-guide/#load-file-encoding-issues","title":"Load File Encoding Issues","text":"<ul> <li>CSV uses UTF-8 encoding with BOM</li> <li>DAT uses UTF-8 encoding</li> <li>Ensure your review tool is configured for UTF-8</li> </ul>"},{"location":"ediscovery/user-guide/#download-fails","title":"Download Fails","text":"<ul> <li>Check browser download settings</li> <li>Try a different browser</li> <li>For very large exports, ensure stable connection</li> </ul>"},{"location":"ediscovery/user-guide/#support","title":"Support","text":"<p>For technical issues: 1. Note the Job ID from the export 2. Check the job status and any error messages 3. Contact your Piler administrator with details</p>"},{"location":"ediscovery/workflows/","title":"eDiscovery Example Workflows","text":"<p>This document provides step-by-step workflows for common eDiscovery scenarios.</p>"},{"location":"ediscovery/workflows/#workflow-1-initial-document-production","title":"Workflow 1: Initial Document Production","text":"<p>Scenario: Responding to a litigation hold with first production of relevant documents.</p>"},{"location":"ediscovery/workflows/#step-1-define-collection-scope","title":"Step 1: Define Collection Scope","text":"<p>Work with legal counsel to define: - Custodians (email addresses to collect) - Date range (relevant time period) - Keywords (search terms) - Document types (emails, attachments)</p>"},{"location":"ediscovery/workflows/#step-2-execute-collection","title":"Step 2: Execute Collection","text":"<ol> <li>Log in as auditor</li> <li>Open Advanced Search (sliders icon)</li> <li>Configure search parameters:</li> <li>Date range: Set From/To dates</li> <li>Sender/Recipient: Enter custodian email addresses</li> <li>Keywords: Add relevant search terms</li> <li>Click Search</li> <li>Save the search with a descriptive name (e.g., \"Smith_v_Jones_Custodian1_Initial\")</li> </ol>"},{"location":"ediscovery/workflows/#step-3-review-and-select","title":"Step 3: Review and Select","text":"<ol> <li>Review search results for relevance</li> <li>Select all relevant emails using checkboxes</li> <li>If needed, run additional searches and add to selection</li> </ol>"},{"location":"ediscovery/workflows/#step-4-create-production","title":"Step 4: Create Production","text":"<ol> <li>Click the briefcase icon (eDiscovery Export)</li> <li>Configure:</li> <li>Prefix: <code>SMITH001</code> (matter identifier + production number)</li> <li>Starting Number: Leave blank (starts at 1)</li> <li>Options: Enable all (natives, text, attachments)</li> <li>Format: DAT (for Relativity) or CSV</li> <li>Date Format: Match opposing counsel's preference</li> <li>Click Start eDiscovery Export</li> </ol>"},{"location":"ediscovery/workflows/#step-5-quality-control","title":"Step 5: Quality Control","text":"<ol> <li>Open the eDiscovery Exports drawer</li> <li>Wait for completion (monitor progress)</li> <li>Download the ZIP file</li> <li>Verify:</li> <li>Email count matches selection</li> <li>Load file opens correctly</li> <li>Spot check several native files</li> <li>Verify Bates range (e.g., SMITH001_000001 to SMITH001_000150)</li> </ol>"},{"location":"ediscovery/workflows/#step-6-document-production","title":"Step 6: Document Production","text":"<p>Record in your production log: - Production date - Bates range: SMITH001_000001 - SMITH001_000150 - Total documents: 150 - Search terms used - Custodians included</p>"},{"location":"ediscovery/workflows/#workflow-2-supplemental-production","title":"Workflow 2: Supplemental Production","text":"<p>Scenario: Producing additional documents using the same Bates prefix to continue numbering.</p>"},{"location":"ediscovery/workflows/#step-1-check-current-sequence","title":"Step 1: Check Current Sequence","text":"<ol> <li>Open eDiscovery Exports drawer</li> <li>View \"Bates Number Sequences\" section</li> <li>Note the last number for your prefix (e.g., SMITH001: 150)</li> </ol>"},{"location":"ediscovery/workflows/#step-2-new-collection","title":"Step 2: New Collection","text":"<ol> <li>Execute new searches for additional documents</li> <li>Review and select relevant emails</li> <li>Ensure no duplicates from previous production</li> </ol>"},{"location":"ediscovery/workflows/#step-3-create-continuation-production","title":"Step 3: Create Continuation Production","text":"<ol> <li>Click the briefcase icon</li> <li>Configure:</li> <li>Prefix: Click <code>SMITH001</code> badge to reuse prefix</li> <li>Starting Number: Leave blank (auto-continues from 151)</li> <li>Keep other options consistent with initial production</li> <li>Click Start eDiscovery Export</li> </ol>"},{"location":"ediscovery/workflows/#step-4-verify-continuity","title":"Step 4: Verify Continuity","text":"<p>After completion, verify: - New range starts at SMITH001_000151 - No gaps in numbering - Consistent formatting with initial production</p>"},{"location":"ediscovery/workflows/#workflow-3-multi-custodian-production","title":"Workflow 3: Multi-Custodian Production","text":"<p>Scenario: Producing documents from multiple custodians with organized folder structure.</p>"},{"location":"ediscovery/workflows/#step-1-plan-custodian-strategy","title":"Step 1: Plan Custodian Strategy","text":"<p>Decide on approach: - Option A: Single prefix, organized by custodian folders - Option B: Separate prefix per custodian (SMITH_JONES, SMITH_DOE)</p>"},{"location":"ediscovery/workflows/#step-2-collection-by-custodian","title":"Step 2: Collection by Custodian","text":"<p>For each custodian: 1. Search for that custodian's emails 2. Save search with custodian name 3. Select relevant documents</p>"},{"location":"ediscovery/workflows/#step-3-create-organized-export","title":"Step 3: Create Organized Export","text":"<p>Option A - Single Export with Custodian Folders: 1. Select all custodians' documents 2. Click briefcase icon 3. Enable Organize by custodian 4. Use single prefix (e.g., <code>SMITH2024</code>)</p> <p>Result structure:</p> <pre><code>SMITH2024_Production/\n\u251c\u2500\u2500 loadfile.csv\n\u251c\u2500\u2500 john.smith@company.com/\n\u2502   \u251c\u2500\u2500 NATIVES/\n\u2502   \u2514\u2500\u2500 TEXT/\n\u251c\u2500\u2500 jane.doe@company.com/\n\u2502   \u251c\u2500\u2500 NATIVES/\n\u2502   \u2514\u2500\u2500 TEXT/\n</code></pre> <p>Option B - Separate Exports: 1. For each custodian, create separate export 2. Use prefix indicating custodian: <code>SMITH_JONES</code>, <code>SMITH_DOE</code> 3. Combine productions for delivery</p>"},{"location":"ediscovery/workflows/#workflow-4-rolling-production","title":"Workflow 4: Rolling Production","text":"<p>Scenario: Producing documents on a regular schedule (weekly/monthly) as review completes.</p>"},{"location":"ediscovery/workflows/#step-1-establish-naming-convention","title":"Step 1: Establish Naming Convention","text":"<pre><code>{MATTER}_{PRODUCTION_NUMBER}\nExample: ACME_P001, ACME_P002, ACME_P003\n</code></pre>"},{"location":"ediscovery/workflows/#step-2-weekly-production-process","title":"Step 2: Weekly Production Process","text":"<p>Each production cycle:</p> <ol> <li>Monday: Run saved searches, review new documents</li> <li>Wednesday: Complete privilege review, finalize selection</li> <li>Friday: Create export with next production number</li> </ol>"},{"location":"ediscovery/workflows/#step-3-track-productions","title":"Step 3: Track Productions","text":"<p>Maintain a production log:</p> Production Date Bates Range Doc Count Notes ACME_P001 2024-03-01 000001-000500 500 Initial production ACME_P002 2024-03-08 000501-000750 250 Week 2 ACME_P003 2024-03-15 000751-001000 250 Week 3"},{"location":"ediscovery/workflows/#step-4-clawback-procedure","title":"Step 4: Clawback Procedure","text":"<p>If privileged document produced accidentally: 1. Document the Bates number 2. Notify opposing counsel per agreement 3. Note in production log as clawed back 4. Do NOT delete from Piler (maintain audit trail)</p>"},{"location":"ediscovery/workflows/#workflow-5-regulatory-investigation-response","title":"Workflow 5: Regulatory Investigation Response","text":"<p>Scenario: Responding to regulatory subpoena with specific requirements.</p>"},{"location":"ediscovery/workflows/#step-1-parse-requirements","title":"Step 1: Parse Requirements","text":"<p>Regulatory requests often specify: - Specific date ranges - Named custodians - Particular document types - Required metadata fields - Delivery format</p>"},{"location":"ediscovery/workflows/#step-2-configure-for-compliance","title":"Step 2: Configure for Compliance","text":"<p>Common regulatory requirements:</p> <p>SEC/FINRA: - Include all metadata - Use DAT format - SHA-256 hashes required - Text extraction required</p> <p>DOJ/Antitrust: - Native format required - Family relationships preserved - Conversation threading</p>"},{"location":"ediscovery/workflows/#step-3-production-settings","title":"Step 3: Production Settings","text":"<ol> <li>Enable all export options:</li> <li>\u2713 Include native EML files</li> <li>\u2713 Extract text files</li> <li>\u2713 Extract attachments separately</li> <li>Select Both (CSV and DAT) for maximum compatibility</li> <li>Use ISO 8601 date format for precision</li> </ol>"},{"location":"ediscovery/workflows/#step-4-chain-of-custody","title":"Step 4: Chain of Custody","text":"<p>Document the production process: 1. Who executed searches (auditor name) 2. Search parameters used 3. Date/time of export 4. Hash values from load file 5. Delivery method to regulator</p>"},{"location":"ediscovery/workflows/#workflow-6-internal-investigation","title":"Workflow 6: Internal Investigation","text":"<p>Scenario: HR or compliance investigation requiring confidential document review.</p>"},{"location":"ediscovery/workflows/#step-1-secure-access","title":"Step 1: Secure Access","text":"<p>Ensure only authorized personnel have auditor access for this matter.</p>"},{"location":"ediscovery/workflows/#step-2-targeted-collection","title":"Step 2: Targeted Collection","text":"<ol> <li>Search for specific employee's emails</li> <li>Include date range of concern</li> <li>Consider keywords related to investigation</li> </ol>"},{"location":"ediscovery/workflows/#step-3-export-for-review","title":"Step 3: Export for Review","text":"<ol> <li>Create export with investigation-specific prefix</li> <li>Use Organize by custodian if multiple subjects</li> <li>Enable text extraction for keyword searching</li> </ol>"},{"location":"ediscovery/workflows/#step-4-review-outside-piler","title":"Step 4: Review Outside Piler","text":"<ol> <li>Download export</li> <li>Import into review tool or Excel</li> <li>Conduct review with appropriate confidentiality</li> <li>Document findings</li> </ol>"},{"location":"ediscovery/workflows/#step-5-retention","title":"Step 5: Retention","text":"<p>After investigation: - Determine retention requirements - Delete export if no longer needed - Maintain audit log of investigation</p>"},{"location":"ediscovery/workflows/#workflow-7-legal-hold-preservation","title":"Workflow 7: Legal Hold Preservation","text":"<p>Scenario: Implementing litigation hold to preserve potentially relevant documents.</p>"},{"location":"ediscovery/workflows/#step-1-identify-scope","title":"Step 1: Identify Scope","text":"<p>Define hold parameters: - Custodians under hold - Date range to preserve - Subject matter keywords</p>"},{"location":"ediscovery/workflows/#step-2-create-preservation-export","title":"Step 2: Create Preservation Export","text":"<p>Even if not producing immediately: 1. Search and select all potentially relevant documents 2. Create export with hold-specific prefix: <code>HOLD_SMITH_V_JONES</code> 3. This creates a point-in-time snapshot</p>"},{"location":"ediscovery/workflows/#step-3-document-hold","title":"Step 3: Document Hold","text":"<p>Record: - Hold implementation date - Custodians notified - Bates range preserved - Search criteria used</p>"},{"location":"ediscovery/workflows/#step-4-periodic-verification","title":"Step 4: Periodic Verification","text":"<p>Quarterly or as needed: 1. Re-run saved searches 2. Identify new documents since hold 3. Create supplemental preservation export</p>"},{"location":"ediscovery/workflows/#workflow-8-cross-border-production","title":"Workflow 8: Cross-Border Production","text":"<p>Scenario: Production involving data privacy considerations (GDPR, etc.)</p>"},{"location":"ediscovery/workflows/#step-1-privacy-assessment","title":"Step 1: Privacy Assessment","text":"<p>Before export: - Identify custodian locations - Determine applicable privacy laws - Assess transfer mechanisms needed</p>"},{"location":"ediscovery/workflows/#step-2-redaction-consideration","title":"Step 2: Redaction Consideration","text":"<p>Note: Piler exports full documents. If redaction needed: 1. Export from Piler 2. Import to review platform 3. Apply redactions in review tool 4. Re-export redacted versions</p>"},{"location":"ediscovery/workflows/#step-3-date-format-selection","title":"Step 3: Date Format Selection","text":"<p>Choose format appropriate for recipient jurisdiction: - EU production: Use EU date format (DD/MM/YYYY) - US production: Use US date format (MM/DD/YYYY) - International: Use ISO 8601 (YYYY-MM-DD)</p>"},{"location":"ediscovery/workflows/#step-4-transfer-documentation","title":"Step 4: Transfer Documentation","text":"<p>Document for privacy compliance: - Legal basis for transfer - Data subjects involved - Security measures applied - Recipient protections</p>"},{"location":"ediscovery/workflows/#best-practices-summary","title":"Best Practices Summary","text":""},{"location":"ediscovery/workflows/#before-production","title":"Before Production","text":"<ul> <li>[ ] Define clear naming convention</li> <li>[ ] Document search methodology</li> <li>[ ] Save all search queries</li> <li>[ ] Verify custodian coverage</li> </ul>"},{"location":"ediscovery/workflows/#during-production","title":"During Production","text":"<ul> <li>[ ] Use consistent export settings</li> <li>[ ] Enable all recommended options</li> <li>[ ] Monitor progress for errors</li> <li>[ ] Download immediately upon completion</li> </ul>"},{"location":"ediscovery/workflows/#after-production","title":"After Production","text":"<ul> <li>[ ] Verify document counts</li> <li>[ ] Spot check native files</li> <li>[ ] Validate load file format</li> <li>[ ] Record Bates ranges</li> <li>[ ] Update production log</li> <li>[ ] Secure delivery to recipient</li> </ul>"},{"location":"ediscovery/workflows/#quality-control-checklist","title":"Quality Control Checklist","text":"<ul> <li>[ ] Bates numbers sequential with no gaps</li> <li>[ ] All selected documents exported</li> <li>[ ] Attachments linked to parents</li> <li>[ ] Dates formatted correctly</li> <li>[ ] Hash values present</li> <li>[ ] Native files openable</li> <li>[ ] Text files readable</li> </ul>"},{"location":"migration/","title":"Migration Overview","text":"<p>This documentation applies to Piler enterprise edition 2.1.0</p> <p>Revision #1</p> <p>Publication date: 2025-DEC-12</p>"},{"location":"migration/#overview","title":"Overview","text":"<p>Piler can import emails from any email archiving solution that exports to standard formats (EML, MBOX). This section provides step-by-step guides for migrating from popular competitors.</p>"},{"location":"migration/#supported-migration-sources","title":"Supported Migration Sources","text":"Source Export Format Complexity Guide MailStore EML Easy MailStore Migration MailArchiva EML, MBOX Easy MailArchiva Migration Barracuda Message Archiver ZIP (EML) Medium Barracuda Migration Any EML/MBOX source EML, MBOX Easy Import Emails"},{"location":"migration/#general-migration-process","title":"General Migration Process","text":"<p>All migrations follow the same basic workflow:</p> <ol> <li>Export - Extract emails from the source archive in EML or MBOX format</li> <li>Transfer - Move exported files to the Piler server</li> <li>Import - Use <code>pilerimport</code> to archive the emails</li> </ol>"},{"location":"migration/#import-tool","title":"Import Tool","text":"<p>The <code>pilerimport</code> tool handles all imports:</p> <pre><code>pilerimport -dir /path/to/exported/emails -tenantid &lt;tenant&gt; -workers 8 -progress\n</code></pre> <p>Key options:</p> <ul> <li><code>-dir</code> - Directory containing exported EML files (recursive)</li> <li><code>-mbox</code> - Single MBOX file to import</li> <li><code>-tenantid</code> - Target tenant ID</li> <li><code>-workers</code> - Parallel processing threads (default: 4, recommended: 8-16)</li> <li><code>-progress</code> - Show progress bar</li> <li><code>-remove</code> - Delete files after successful import</li> </ul> <p>See Import Emails for complete documentation.</p>"},{"location":"migration/#before-you-begin","title":"Before You Begin","text":""},{"location":"migration/#storage-requirements","title":"Storage Requirements","text":"<p>Ensure the Piler server has sufficient disk space:</p> <ul> <li>Exported data size + 20% overhead for indexes</li> <li>Example: 500GB export needs ~600GB free space</li> </ul>"},{"location":"migration/#network-transfer","title":"Network Transfer","text":"<p>For large archives, consider:</p> <ul> <li>rsync - Resumable transfers, handles interruptions</li> <li>USB/external drive - Fastest for multi-TB archives</li> <li>Secure copy (scp) - For remote transfers</li> </ul> <p>Example rsync:</p> <pre><code>rsync -avz --progress /source/export/ piler-server:/var/piler/import/\n</code></pre>"},{"location":"migration/#permissions","title":"Permissions","text":"<p>Ensure the import directory is readable by the piler user:</p> <pre><code>chown -R piler:piler /var/piler/import/\n</code></pre>"},{"location":"migration/#post-migration-verification","title":"Post-Migration Verification","text":"<p>After import completes:</p> <ol> <li>Check import statistics (success/failed counts)</li> <li>Search for recent and old emails to verify date range coverage</li> <li>Spot-check attachments open correctly</li> <li>Verify user access permissions work as expected</li> </ol>"},{"location":"migration/#need-help","title":"Need Help?","text":"<p>For migration assistance, contact support.</p>"},{"location":"migration/barracuda/","title":"Migrating from Barracuda Message Archiver","text":"<p>This documentation applies to Piler enterprise edition 2.1.0</p> <p>Revision #1</p> <p>Publication date: 2025-DEC-12</p>"},{"location":"migration/barracuda/#overview","title":"Overview","text":"<p>Barracuda Message Archiver stores emails in a proprietary format but provides an export feature that outputs ZIP files containing EML messages. This guide covers the self-service export process.</p> <p>Note: Barracuda's professional migration services can cost $10,000-$50,000. The self-service approach described here is free but requires administrator effort.</p>"},{"location":"migration/barracuda/#prerequisites","title":"Prerequisites","text":"<ul> <li>Barracuda Message Archiver administrator access</li> <li>Sufficient disk space for export (1.5-2x your archive size for ZIP + extracted files)</li> <li>Network or USB storage for transferring data to Piler server</li> </ul>"},{"location":"migration/barracuda/#step-1-export-from-barracuda","title":"Step 1: Export from Barracuda","text":""},{"location":"migration/barracuda/#access-the-web-interface","title":"Access the Web Interface","text":"<ol> <li>Log into the Barracuda Message Archiver web interface</li> <li>Navigate using an administrator account</li> </ol>"},{"location":"migration/barracuda/#navigate-to-export","title":"Navigate to Export","text":"<ol> <li>Go to Tools in the main navigation</li> <li>Click Export Messages</li> </ol>"},{"location":"migration/barracuda/#configure-export-settings","title":"Configure Export Settings","text":"<ol> <li>Date Range: Select the time period to export</li> <li>For full migration, select your earliest archive date to today</li> <li> <p>For large archives, consider exporting in yearly chunks</p> </li> <li> <p>Mailboxes: Select which mailboxes to export</p> </li> <li>Choose \"All\" for complete migration</li> <li> <p>Or select specific mailboxes/users</p> </li> <li> <p>Format: Select ZIP format</p> </li> <li>ZIP files contain individual EML messages</li> <li> <p>PST format requires Windows conversion step</p> </li> <li> <p>Destination: Choose where to save exports</p> </li> <li>Network share recommended for large exports</li> <li> <p>Local disk if transferring via USB later</p> </li> <li> <p>Click Export to begin</p> </li> </ol>"},{"location":"migration/barracuda/#monitor-export-progress","title":"Monitor Export Progress","text":"<ul> <li>Barracuda shows export progress in the interface</li> <li>Large archives may take many hours or days</li> <li>Exports may be split into multiple ZIP files</li> </ul>"},{"location":"migration/barracuda/#download-exported-files","title":"Download Exported Files","text":"<ol> <li>Once export completes, download all ZIP files</li> <li>Verify file integrity (check file sizes, no truncation)</li> <li>Store in accessible location for transfer</li> </ol>"},{"location":"migration/barracuda/#step-2-extract-zip-files","title":"Step 2: Extract ZIP Files","text":"<p>Before importing, extract all ZIP archives.</p>"},{"location":"migration/barracuda/#on-linux","title":"On Linux","text":"<pre><code># Create extraction directory\nmkdir -p /var/piler/import/barracuda\n\n# Extract all ZIP files\ncd /path/to/downloaded/zips\nfor zip in *.zip; do\n  unzip -o \"$zip\" -d /var/piler/import/barracuda/\ndone\n</code></pre>"},{"location":"migration/barracuda/#on-windows-if-extracting-before-transfer","title":"On Windows (if extracting before transfer)","text":"<ol> <li>Right-click each ZIP file</li> <li>Select \"Extract All...\"</li> <li>Extract to a folder for transfer</li> </ol>"},{"location":"migration/barracuda/#verify-extraction","title":"Verify Extraction","text":"<pre><code># Count extracted EML files\nfind /var/piler/import/barracuda -name \"*.eml\" | wc -l\n\n# Check sample file\nhead -20 /var/piler/import/barracuda/sample.eml\n</code></pre>"},{"location":"migration/barracuda/#step-3-transfer-to-piler-server","title":"Step 3: Transfer to Piler Server","text":"<p>If extracted on a different machine, transfer to Piler server.</p>"},{"location":"migration/barracuda/#using-rsync-recommended","title":"Using rsync (Recommended)","text":"<pre><code>rsync -avz --progress /path/to/barracuda/ piler-server:/var/piler/import/barracuda/\n</code></pre>"},{"location":"migration/barracuda/#using-usb-drive","title":"Using USB Drive","text":"<p>For multi-TB archives:</p> <ol> <li>Copy extracted files to USB drive</li> <li>Connect to Piler server</li> <li>Mount and copy to import directory</li> </ol>"},{"location":"migration/barracuda/#step-4-import-into-piler","title":"Step 4: Import into Piler","text":""},{"location":"migration/barracuda/#set-permissions","title":"Set Permissions","text":"<pre><code>chown -R piler:piler /var/piler/import/barracuda/\n</code></pre>"},{"location":"migration/barracuda/#run-import","title":"Run Import","text":"<pre><code>pilerimport -dir /var/piler/import/barracuda \\\n  -tenantid fictive \\\n  -workers 8 \\\n  -progress\n</code></pre> <p>For very large archives:</p> <pre><code>pilerimport -dir /var/piler/import/barracuda \\\n  -tenantid fictive \\\n  -workers 16 \\\n  -progress\n</code></pre>"},{"location":"migration/barracuda/#monitor-progress","title":"Monitor Progress","text":"<p>Watch the progress bar for:</p> <ul> <li>Total files discovered</li> <li>Processing rate</li> <li>Success/failure counts</li> </ul>"},{"location":"migration/barracuda/#step-5-verify-migration","title":"Step 5: Verify Migration","text":""},{"location":"migration/barracuda/#review-import-statistics","title":"Review Import Statistics","text":"<pre><code>Import completed:\n  Processed:  2,500,000\n  Success:    2,450,000\n  Duplicates:    45,000\n  Failed:         5,000\n</code></pre>"},{"location":"migration/barracuda/#verify-in-piler-ui","title":"Verify in Piler UI","text":"<ol> <li>Log into Piler web interface</li> <li>Search across different date ranges</li> <li>Verify attachments open correctly</li> <li>Confirm all expected users/mailboxes appear</li> </ol>"},{"location":"migration/barracuda/#investigate-failures","title":"Investigate Failures","text":"<p>Common failure causes:</p> <ul> <li>Corrupted EML files in Barracuda export</li> <li>Encoding issues with special characters</li> <li>Malformed headers in old emails</li> </ul> <p>Review failed files manually if count is significant.</p>"},{"location":"migration/barracuda/#troubleshooting","title":"Troubleshooting","text":""},{"location":"migration/barracuda/#zip-extraction-fails","title":"ZIP extraction fails","text":"<pre><code># Try unzip with different options\nunzip -o -O CP437 archive.zip -d /var/piler/import/\n\n# For corrupted ZIP, try recovering\nzip -FF corrupted.zip --out fixed.zip\n</code></pre>"},{"location":"migration/barracuda/#non-eml-files-in-export","title":"Non-EML files in export","text":"<p>Barracuda may include metadata files. These are automatically skipped by pilerimport.</p>"},{"location":"migration/barracuda/#very-slow-export-from-barracuda","title":"Very slow export from Barracuda","text":"<ul> <li>Export during off-hours</li> <li>Export in smaller date range chunks</li> <li>Contact Barracuda support if export hangs</li> </ul>"},{"location":"migration/barracuda/#memory-issues-during-large-import","title":"Memory issues during large import","text":"<p>Reduce worker count:</p> <pre><code>pilerimport -dir /var/piler/import/barracuda -workers 4 -progress\n</code></pre>"},{"location":"migration/barracuda/#high-failure-rate-1","title":"High failure rate (&gt;1%)","text":"<ol> <li>Check sample failed files for patterns</li> <li>Verify ZIP extraction completed fully</li> <li>Look for encoding issues in filenames</li> <li>Check Piler server disk space</li> </ol>"},{"location":"migration/barracuda/#alternative-barracuda-support-export","title":"Alternative: Barracuda Support Export","text":"<p>If self-service export isn't feasible:</p> <ol> <li>Contact Barracuda Technical Support</li> <li>Request export assistance</li> <li>Be prepared for professional services fees ($10K-$50K)</li> <li>Barracuda will provide exported files in EML or PST format</li> <li>Follow import steps above once you receive the export</li> </ol>"},{"location":"migration/barracuda/#cleanup","title":"Cleanup","text":"<p>After successful migration:</p> <pre><code># Remove imported files\nrm -rf /var/piler/import/barracuda/\n\n# Remove original ZIP files\nrm -rf /path/to/downloaded/zips/\n</code></pre>"},{"location":"migration/barracuda/#reference","title":"Reference","text":"<ul> <li>Barracuda Migration Guide</li> <li>Piler Import Documentation</li> </ul>"},{"location":"migration/mailarchiva/","title":"Migrating from MailArchiva","text":"<p>This documentation applies to Piler enterprise edition 2.1.0</p> <p>Revision #1</p> <p>Publication date: 2025-DEC-12</p>"},{"location":"migration/mailarchiva/#overview","title":"Overview","text":"<p>MailArchiva provides a built-in volume export feature that outputs emails in EML or MBOX format. This guide walks you through the self-service export process and importing into Piler.</p>"},{"location":"migration/mailarchiva/#prerequisites","title":"Prerequisites","text":"<ul> <li>MailArchiva administrator access</li> <li>Sufficient disk space for export (roughly equal to your archive size)</li> <li>Network or USB storage for transferring data to Piler server</li> </ul>"},{"location":"migration/mailarchiva/#step-1-export-from-mailarchiva","title":"Step 1: Export from MailArchiva","text":""},{"location":"migration/mailarchiva/#access-the-admin-interface","title":"Access the Admin Interface","text":"<ol> <li>Log into the MailArchiva web interface</li> <li>Use an administrator account</li> </ol>"},{"location":"migration/mailarchiva/#navigate-to-export","title":"Navigate to Export","text":"<ol> <li>Go to Configuration in the main menu</li> <li>Click Volumes</li> <li>Select the volume(s) you want to export</li> <li>Click Export Data</li> </ol>"},{"location":"migration/mailarchiva/#configure-export-settings","title":"Configure Export Settings","text":"<ol> <li>Format: Select EML (RFC 2822)</li> <li>EML is the standard format Piler accepts</li> <li> <p>MBOX is also supported if preferred</p> </li> <li> <p>Date Range (if available):</p> </li> <li>Select full range for complete migration</li> <li> <p>Or filter by date for partial migration</p> </li> <li> <p>Destination: Choose export location</p> </li> <li>Network share for large archives</li> <li> <p>Local storage if transferring via USB</p> </li> <li> <p>Click Export to begin</p> </li> </ol>"},{"location":"migration/mailarchiva/#monitor-export-progress","title":"Monitor Export Progress","text":"<ul> <li>MailArchiva displays progress during export</li> <li>Large archives may take several hours</li> <li>Ensure sufficient disk space throughout the process</li> </ul>"},{"location":"migration/mailarchiva/#step-2-transfer-to-piler-server","title":"Step 2: Transfer to Piler Server","text":""},{"location":"migration/mailarchiva/#option-a-network-share","title":"Option A: Network Share","text":"<p>If Piler server can access the export location:</p> <pre><code># Mount network share\nmount -t cifs //server/mailarchiva-export /mnt/import -o username=user,password=pass\n\n# Or NFS\nmount -t nfs server:/export/mailarchiva /mnt/import\n</code></pre>"},{"location":"migration/mailarchiva/#option-b-rsync-remote-transfer","title":"Option B: rsync (Remote transfer)","text":"<pre><code># Transfer with resume support\nrsync -avz --progress /path/to/mailarchiva-export/ piler-server:/var/piler/import/\n\n# Resume interrupted transfer\nrsync -avz --progress --partial /path/to/mailarchiva-export/ piler-server:/var/piler/import/\n</code></pre>"},{"location":"migration/mailarchiva/#option-c-physical-media","title":"Option C: Physical Media","text":"<p>For large archives, USB drives are often fastest:</p> <ol> <li>Copy export to USB drive</li> <li>Connect to Piler server</li> <li>Mount and import directly</li> </ol>"},{"location":"migration/mailarchiva/#step-3-import-into-piler","title":"Step 3: Import into Piler","text":""},{"location":"migration/mailarchiva/#set-permissions","title":"Set Permissions","text":"<pre><code>chown -R piler:piler /var/piler/import/\n</code></pre>"},{"location":"migration/mailarchiva/#import-eml-files","title":"Import EML Files","text":"<pre><code>pilerimport -dir /var/piler/import/mailarchiva-export \\\n  -tenantid fictive \\\n  -workers 8 \\\n  -progress\n</code></pre>"},{"location":"migration/mailarchiva/#import-mbox-file-if-exported-as-mbox","title":"Import MBOX File (if exported as MBOX)","text":"<pre><code>pilerimport -mbox /var/piler/import/mailarchiva-export.mbox \\\n  -tenantid fictive \\\n  -workers 8 \\\n  -progress\n</code></pre>"},{"location":"migration/mailarchiva/#for-large-archives","title":"For Large Archives","text":"<p>Increase worker count for better throughput:</p> <pre><code>pilerimport -dir /var/piler/import/mailarchiva-export \\\n  -tenantid fictive \\\n  -workers 16 \\\n  -progress\n</code></pre>"},{"location":"migration/mailarchiva/#with-automatic-cleanup","title":"With Automatic Cleanup","text":"<pre><code>pilerimport -dir /var/piler/import/mailarchiva-export \\\n  -tenantid fictive \\\n  -workers 8 \\\n  -progress \\\n  -remove\n</code></pre>"},{"location":"migration/mailarchiva/#step-4-verify-migration","title":"Step 4: Verify Migration","text":""},{"location":"migration/mailarchiva/#review-import-statistics","title":"Review Import Statistics","text":"<p>After import completes:</p> <pre><code>Import completed:\n  Processed:  850,000\n  Success:    830,000\n  Duplicates:  18,000\n  Failed:       2,000\n</code></pre>"},{"location":"migration/mailarchiva/#verify-in-piler-ui","title":"Verify in Piler UI","text":"<ol> <li>Log into Piler web interface</li> <li>Search for emails across different date ranges</li> <li>Verify attachments are accessible</li> <li>Confirm all expected mailboxes appear in search results</li> </ol>"},{"location":"migration/mailarchiva/#investigate-failures","title":"Investigate Failures","text":"<p>If files failed to import:</p> <ul> <li>Check for corrupted EML files</li> <li>Review file permissions</li> <li>Check Piler logs:</li> </ul> <p><code>docker logs piler 2&gt;&amp;1 | grep -i error</code></p> <p>or</p> <p><code>journalctl -xeu piler  | grep -i error</code></p>"},{"location":"migration/mailarchiva/#troubleshooting","title":"Troubleshooting","text":""},{"location":"migration/mailarchiva/#export-option-not-visible","title":"Export option not visible","text":"<ul> <li>Ensure you have administrator privileges</li> <li>Check MailArchiva license includes export feature</li> <li>Contact MailArchiva support if export is disabled</li> </ul>"},{"location":"migration/mailarchiva/#permission-denied-during-import","title":"\"Permission denied\" during import","text":"<pre><code>chown -R piler:piler /var/piler/import/\nchmod -R 644 /var/piler/import/*.eml\n</code></pre>"},{"location":"migration/mailarchiva/#slow-import-performance","title":"Slow import performance","text":"<ul> <li>Increase workers: <code>-workers 16</code></li> <li>Use SSD storage for import directory</li> <li>Ensure database server has adequate resources</li> </ul>"},{"location":"migration/mailarchiva/#high-duplicate-count","title":"High duplicate count","text":"<p>Normal behavior - MailArchiva may have stored the same email multiple times (e.g., sent to multiple recipients). Piler deduplicates automatically without using extra storage.</p>"},{"location":"migration/mailarchiva/#encoding-issues-with-filenames","title":"Encoding issues with filenames","text":"<p>If EML files have special characters in names:</p> <pre><code># Rename files to safe names\ncd /var/piler/import/mailarchiva-export\nfind . -name \"*.eml\" -exec rename 's/[^a-zA-Z0-9._-]/_/g' {} \\;\n</code></pre>"},{"location":"migration/mailarchiva/#mbox-import-fails","title":"MBOX import fails","text":"<p>If MBOX file is corrupted or malformed:</p> <ol> <li>Try splitting into smaller files</li> <li>Convert to individual EML files using a tool like <code>mb2md</code></li> <li>Import the EML files instead</li> </ol>"},{"location":"migration/mailarchiva/#cleanup","title":"Cleanup","text":"<p>After verifying successful migration:</p> <pre><code># Remove imported files\nrm -rf /var/piler/import/mailarchiva-export/\n\n# Unmount network share if used\numount /mnt/import\n</code></pre>"},{"location":"migration/mailarchiva/#reference","title":"Reference","text":"<ul> <li>MailArchiva Email Migration Guide</li> <li>MailArchiva Export Data Documentation</li> <li>Piler Import Documentation</li> </ul>"},{"location":"migration/mailstore/","title":"Migrating from MailStore","text":"<p>This documentation applies to Piler enterprise edition 2.1.0</p> <p>Revision #1</p> <p>Publication date: 2025-DEC-12</p>"},{"location":"migration/mailstore/#overview","title":"Overview","text":"<p>MailStore Server (now owned by OpenText) provides a straightforward export-to-filesystem feature that outputs emails in EML format. This guide walks you through exporting from MailStore and importing into Piler.</p>"},{"location":"migration/mailstore/#prerequisites","title":"Prerequisites","text":"<ul> <li>MailStore Server administrator access</li> <li>Sufficient disk space for export (roughly equal to your archive size)</li> <li>Network or USB storage for transferring data to Piler server</li> </ul>"},{"location":"migration/mailstore/#step-1-export-from-mailstore","title":"Step 1: Export from MailStore","text":""},{"location":"migration/mailstore/#open-mailstore-client","title":"Open MailStore Client","text":"<ol> <li>Launch MailStore Client and connect to your MailStore Server</li> <li>Log in with an administrator account</li> </ol>"},{"location":"migration/mailstore/#navigate-to-export","title":"Navigate to Export","text":"<ol> <li>In the navigation pane, expand Administrative Tools</li> <li>Click Export E-mail</li> <li>Select Export E-mail to File System</li> </ol>"},{"location":"migration/mailstore/#configure-export-settings","title":"Configure Export Settings","text":"<ol> <li>Source: Select the archives to export</li> <li>Choose \"All Users\" for complete migration</li> <li> <p>Or select specific users/archives as needed</p> </li> <li> <p>Target Folder: Choose the export destination</p> </li> <li>Use a network share or local drive with sufficient space</li> <li> <p>Example: <code>\\\\fileserver\\mailstore-export\\</code> or <code>D:\\mailstore-export\\</code></p> </li> <li> <p>File Format: Select EML (RFC 822)</p> </li> <li> <p>This is the standard email format Piler accepts</p> </li> <li> <p>Options:</p> </li> <li>Enable Retain folder structure (optional, helps organization)</li> <li>Enable Export signed if you want integrity verification</li> <li> <p>Set date range filters if doing partial migration</p> </li> <li> <p>Click Next and then Finish to start the export</p> </li> </ol>"},{"location":"migration/mailstore/#monitor-export-progress","title":"Monitor Export Progress","text":"<ul> <li>MailStore displays progress during export</li> <li>Large archives (millions of emails) may take several hours</li> <li>Export speed depends on disk I/O and archive size</li> </ul>"},{"location":"migration/mailstore/#step-2-transfer-to-piler-server","title":"Step 2: Transfer to Piler Server","text":""},{"location":"migration/mailstore/#option-a-network-share-recommended-for-large-archives","title":"Option A: Network Share (Recommended for large archives)","text":"<p>If Piler server can access the export location directly:</p> <pre><code># Mount network share on Piler server\nmount -t cifs //fileserver/mailstore-export /mnt/import -o username=user,password=pass\n\n# Or use NFS if available\nmount -t nfs fileserver:/export/mailstore /mnt/import\n</code></pre>"},{"location":"migration/mailstore/#option-b-rsync-remote-transfer-with-resume-support","title":"Option B: rsync (Remote transfer with resume support)","text":"<pre><code># From the machine with exported files\nrsync -avz --progress /path/to/mailstore-export/ piler-server:/var/piler/import/\n\n# Resume interrupted transfer\nrsync -avz --progress --partial /path/to/mailstore-export/ piler-server:/var/piler/import/\n</code></pre>"},{"location":"migration/mailstore/#option-c-physical-media","title":"Option C: Physical Media","text":"<p>For multi-TB archives, USB drives are often fastest:</p> <ol> <li>Copy export to USB drive</li> <li>Connect USB to Piler server</li> <li>Mount and import directly</li> </ol>"},{"location":"migration/mailstore/#step-3-import-into-piler","title":"Step 3: Import into Piler","text":""},{"location":"migration/mailstore/#set-permissions","title":"Set Permissions","text":"<pre><code>chown -R piler:piler /var/piler/import/\n</code></pre>"},{"location":"migration/mailstore/#run-import","title":"Run Import","text":"<p>Basic import:</p> <pre><code>pilerimport -dir /var/piler/import/mailstore-export -tenantid fictive -workers 8 -progress\n</code></pre> <p>For large archives (recommended settings):</p> <pre><code>pilerimport -dir /var/piler/import/mailstore-export \\\n  -tenantid fictive \\\n  -workers 16 \\\n  -progress\n</code></pre> <p>Import with automatic cleanup:</p> <pre><code>pilerimport -dir /var/piler/import/mailstore-export \\\n  -tenantid fictive \\\n  -workers 8 \\\n  -progress \\\n  -remove\n</code></pre>"},{"location":"migration/mailstore/#monitor-progress","title":"Monitor Progress","text":"<p>The <code>-progress</code> flag shows:</p> <ul> <li>Files processed / total</li> <li>Success, duplicate, and failed counts</li> <li>Estimated time remaining</li> </ul>"},{"location":"migration/mailstore/#step-4-verify-migration","title":"Step 4: Verify Migration","text":""},{"location":"migration/mailstore/#check-statistics","title":"Check Statistics","text":"<p>After import completes, review the summary:</p> <pre><code>Import completed:\n  Processed:  1,234,567\n  Success:    1,200,000\n  Duplicates:    30,000\n  Failed:         4,567\n  Excluded:           0\n</code></pre>"},{"location":"migration/mailstore/#verify-in-piler-ui","title":"Verify in Piler UI","text":"<ol> <li>Log into Piler web interface</li> <li>Search for emails from different time periods</li> <li>Verify attachments are accessible</li> <li>Check that all expected mailboxes appear</li> </ol>"},{"location":"migration/mailstore/#investigate-failures","title":"Investigate Failures","text":"<p>If files failed to import:</p> <ul> <li>Check file permissions</li> <li>Look for corrupted EML files</li> <li>Review Piler logs:</li> </ul> <p><code>docker logs piler 2&gt;&amp;1 | grep -i error</code></p> <p>or</p> <p><code>journalctl -xeu piler  | grep -i error</code></p>"},{"location":"migration/mailstore/#troubleshooting","title":"Troubleshooting","text":""},{"location":"migration/mailstore/#permission-denied-errors","title":"\"Permission denied\" errors","text":"<pre><code>chown -R piler:piler /var/piler/import/\nchmod -R 644 /var/piler/import/*.eml\n</code></pre>"},{"location":"migration/mailstore/#slow-import-performance","title":"Slow import performance","text":"<ul> <li>Increase workers: <code>-workers 16</code> or <code>-workers 32</code></li> <li>Use SSD storage for import directory</li> <li>Ensure database has adequate resources</li> </ul>"},{"location":"migration/mailstore/#high-duplicate-count","title":"High duplicate count","text":"<p>This is normal if:</p> <ul> <li>MailStore archived the same email multiple times</li> <li>Multiple users received the same email (expected behavior)</li> </ul> <p>Piler deduplicates automatically - duplicates don't consume extra storage.</p>"},{"location":"migration/mailstore/#missing-emails-after-import","title":"Missing emails after import","text":"<ol> <li>Verify export completed fully in MailStore</li> <li>Check for files that failed to import</li> <li>Re-run import (already-imported files are skipped)</li> </ol>"},{"location":"migration/mailstore/#cleanup","title":"Cleanup","text":"<p>After verifying successful migration:</p> <pre><code># Remove imported files (if not using -remove flag)\nrm -rf /var/piler/import/mailstore-export/\n\n# Unmount network share if used\numount /mnt/import\n</code></pre>"},{"location":"migration/mailstore/#reference","title":"Reference","text":"<ul> <li>MailStore Export Documentation</li> <li>Piler Import Documentation</li> </ul>"}]}